(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["jewelry/materialDetails"],{132:function(e,t,i){"use strict";(function(e){i(5);n(i(3));var t=n(i(133));function n(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=i,e(t.default)}).call(this,i(1)["createPage"])},133:function(e,t,i){"use strict";i.r(t);var n=i(134),r=i(136);for(var a in r)"default"!==a&&function(e){i.d(t,e,(function(){return r[e]}))}(a);i(138);var l,s=i(11),o=Object(s["default"])(r["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],l);o.options.__file="jewelry/materialDetails.vue",t["default"]=o.exports},134:function(e,t,i){"use strict";i.r(t);var n=i(135);i.d(t,"render",(function(){return n["render"]})),i.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]})),i.d(t,"recyclableRender",(function(){return n["recyclableRender"]})),i.d(t,"components",(function(){return n["components"]}))},135:function(e,t,i){"use strict";var n;i.r(t),i.d(t,"render",(function(){return r})),i.d(t,"staticRenderFns",(function(){return l})),i.d(t,"recyclableRender",(function(){return a})),i.d(t,"components",(function(){return n}));try{n={uniSwiperDot:function(){return i.e("uni_modules/uni-swiper-dot/components/uni-swiper-dot/uni-swiper-dot").then(i.bind(null,446))},uniList:function(){return i.e("uni_modules/uni-list/components/uni-list/uni-list").then(i.bind(null,453))},uniSection:function(){return i.e("uni_modules/uni-section/components/uni-section/uni-section").then(i.bind(null,460))},uniListItem:function(){return i.e("uni_modules/uni-list/components/uni-list-item/uni-list-item").then(i.bind(null,467))},uniPopup:function(){return i.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(i.bind(null,409))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var e=this,t=e.$createElement,i=(e._self._c,e.initOk?e.getState(e.materialDetails.state):null),n=e.initOk&&e.materialDetails.unitPrice>0&&("粒"==e.materialDetails.chargeUnit||"件"==e.materialDetails.chargeUnit)?parseInt(e.materialDetails.unitPrice*e.materialDetails.number):null,r=e.initOk&&e.materialDetails.unitPrice>0&&"粒"!=e.materialDetails.chargeUnit&&"件"!=e.materialDetails.chargeUnit?parseInt(e.materialDetails.unitPrice*e.materialDetails.weight):null,a=e.initOk?e.getState(e.materialDetails.state):null,l=e.initOk&&e.materialDetails.stockInOutList.length>0?e.__map(e.materialDetails.stockInOutList,(function(t,i){var n=e.__get_orig(t),r=t.time.slice(0,10);return{$orig:n,g0:r}})):null;e.$mp.data=Object.assign({},{$root:{m0:i,m1:n,m2:r,m3:a,l0:l}})},a=!1,l=[];r._withStripped=!0},136:function(e,t,i){"use strict";i.r(t);var n=i(137),r=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,(function(){return n[e]}))}(a);t["default"]=r.a},137:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(i(125));function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,i,n,r,a,l){try{var s=e[a](l),o=s.value}catch(u){return void i(u)}s.done?t(o):Promise.resolve(o).then(n,r)}function l(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var l=e.apply(t,i);function s(e){a(l,n,r,s,o,"next",e)}function o(e){a(l,n,r,s,o,"throw",e)}s(void 0)}))}}var s={data:function(){return{role:"",imgUrl:this.$baseUrl+"/jewellery/api",initOk:!1,dotsStyles:{selectedBackgroundColor:"#1e92ff",selectedBorder:"#1e92ff"},detailId:null,productNumber:"",materialDetails:{},imgSrc:[],states:[{id:-1,name:"全部"},{id:0,name:"库存中"},{id:1,name:"运输中"},{id:5,name:"未加工"},{id:2,name:"加工中"},{id:3,name:"加工完成"},{id:4,name:"已出售"}],share:{title:"PAULIANA 宝莉安娜高级珠宝",path:"/jewelry/materialDetails?id="+this.detailId,imageUrl:"",desc:"",content:""}}},onLoad:function(t){var i=this;return l(n.default.mark((function r(){var a,l;return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,i.$onLaunched;case 2:a=e.getStorageSync("token"),""==a||null==a?i.$nextTick((function(){i.$refs.popup.open()})):(void 0!=t.id?i.detailId=t.id:i.productNumber=t.productNumber,l=getApp().globalData.userInfo.userPermissions,l&&l.jewelry_user&&(i.role=l.jewelry_user.seller),i.getDetails());case 4:case"end":return n.stop()}}),r)})))()},onReady:function(){this.hidePageNavInWechatBrowser()},onPullDownRefresh:function(){e.showLoading({title:"正在刷新"}),this.getDetails(),e.stopPullDownRefresh()},onShareAppMessage:function(t){return this.share.path="/jewelry/materialDetails?id="+this.detailId,{title:this.share.title,path:this.share.path,imageUrl:this.share.imageUrl,desc:this.share.desc,content:this.share.content,success:function(t){e.showToast({title:"分享成功",icon:"none"})},fail:function(t){e.showToast({title:"分享失败",icon:"none"})}}},onShareTimeline:function(t){return this.share.path="/jewelry/materialDetails?id="+this.detailId,{title:this.share.title,path:this.share.path,imageUrl:this.share.imageUrl,desc:this.share.desc,content:this.share.content,success:function(t){e.showToast({title:"分享成功",icon:"none"})},fail:function(t){e.showToast({title:"分享失败",icon:"none"})}}},methods:{getDetails:function(){var t=this;e.showLoading({title:"加载中......"});var i="";i=this.detailId>0?"/jewelleryInfo?id="+this.detailId:"/jewelleryInfo?productNumber="+this.productNumber,e.request({url:this.$baseUrl+"/jewellery/api"+i,header:{"content-type":"application/json",token:e.getStorageSync("token")},complete:function(i){if(e.hideLoading(),0!=t.checkBack(i,!0)){if(t.materialDetails=i.data.materialInfo,console.log(t.materialDetails),e.setNavigationBarTitle({title:t.materialDetails.materialName}),t.imgSrc=[],""!=t.materialDetails.img&&null!=t.materialDetails.img)if(-1==t.materialDetails.img.indexOf("|"))t.imgSrc.push(t.imgUrl+"/file/"+t.materialDetails.img);else for(var n=t.materialDetails.img.split("|"),r=0;r<n.length;r++)t.imgSrc.push(t.imgUrl+"/file/"+n[r].trim());t.materialDetails.certs=[];var a=[];a=t.materialDetails.certificateNumber.indexOf(",")>0?t.materialDetails.certificateNumber.split(","):t.materialDetails.certificateNumber.split("，");for(var l=0;l<a.length;++l){var s=a[l].trim();s.length>0&&t.materialDetails.certs.push(s)}t.initOk=!0}}})},imagePreview:function(t){e.previewImage({current:t,urls:this.imgSrc})},getState:function(e){for(var t=0;t<this.states.length;++t){if(e==this.states[t].id)return this.states[t].name;if(4==e)return"已售"}return""},goToLogin:function(){this.$refs.popup.close(),e.navigateTo({url:"../comm/login"})},closePopup:function(){this.$refs.popup.close()}}};t.default=s}).call(this,i(1)["default"])},138:function(e,t,i){"use strict";i.r(t);var n=i(139),r=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,(function(){return n[e]}))}(a);t["default"]=r.a},139:function(e,t,i){}},[[132,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../.sourcemap/mp-weixin/jewelry/materialDetails.js.map