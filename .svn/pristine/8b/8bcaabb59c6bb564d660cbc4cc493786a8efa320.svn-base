{"version":3,"sources":["uni-app:///uni_modules/qiun-data-charts/js_sdk/u-charts/u-charts.js"],"names":["config","version","yAxisWidth","yAxisSplit","xAxisHeight","xAxisLineHeight","legendHeight","yAxisTitleWidth","padding","pixelRatio","rotate","columePadding","fontSize","fontColor","dataPointShape","color","linearColor","pieChartLinePadding","pieChartTextPadding","xAxisTextPadding","titleColor","titleFontSize","subtitleColor","subtitleFontSize","toolTipPadding","toolTipBackground","toolTipOpacity","toolTipLineHeight","radarLabelTextMargin","gaugeLabelTextMargin","assign","target","varArgs","TypeError","length","deepAssign","obj1","obj2","key","toString","forEach","val","util","toFixed","num","limit","isFloat","approximatelyEqual","num1","num2","Math","abs","isSameSign","isSameXCoordinateArea","p1","p2","x","isCollision","end","start","width","y","height","flag","getH5Offset","e","mp","changedTouches","push","offsetX","offsetY","lonlat2mercator","longitude","latitude","mercator","Array","log","tan","PI","mercator2lonlat","lonlat","atan","exp","hexToRgb","hexValue","opc","rgx","hex","replace","m","r","g","b","rgb","exec","parseInt","findRange","type","isNaN","Error","multiple","ceil","floor","calCandleMA","dayArr","nameArr","colorArr","kdata","seriesTemp","k","seriesItem","data","name","i","len","sum","j","calValidDistance","self","distance","chartData","opts","dataChartAreaWidth","area","dataChartWidth","eachSpacing","xAxisData","xAxisPoints","validDistance","uevent","trigger","scrollOption","position","xAxis","scrollPosition","isInAngleRange","angle","startAngle","endAngle","adjust","calRotateTranslate","h","xv","yv","transX","sqrt","transY","createCurveControlPoints","points","isNotMiddlePoint","max","min","isNotMiddlePointX","a","pAx","pAy","pBx","pBy","last","ctrA","ctrB","convertCoordinateOrigin","center","avoidCollision","obj","fixPieSeries","series","pieSeriesArr","constructor","indexOf","_pieSeries_","oldseries","formatter","value","fillSeries","index","item","linearIndex","show","pointShape","legendShape","fillCustomColor","linearType","customColor","newcolor","chazhi","getDataRange","minData","maxData","range","minRange","maxRange","measureText","text","context","String","undefined","setFontSize","split","test","dataCombine","reduce","concat","dataCombineStack","getTouches","touches","clientX","pix","pageY","currentTarget","offsetTop","getSeriesDataItem","group","newSeries","indexIsArr","tempSeries","filterSeries","tmpindex","style","disableLegend","getMaxTextListLength","list","lengthList","map","apply","getRadarCoordinateSeries","eachAngle","CoordinateSeries","getToolTipData","seriesData","categories","option","arguments","calPoints","filterPoints","textList","titleText","offset","round","getMixToolTipData","filter","getCandleToolTipData","extra","upColor","upFill","downColor","downFill","text1","text2","text3","text4","validCalPoints","findCurrentIndex","currentPoints","current","spacing","boundaryGap","isInExactChartArea","timePoints","pointValue","pointIndex","minValue","findBarChartCurrentIndex","yAxisPoints","findLegendIndex","legendData","currentIndex","gap","isInExactLegendArea","findRadarChartCurrentIndex","radarData","count","eachAngleArea","isInExactPieChartArea","radius","fixAngle","atan2","angleList","rangeStart","rangeEnd","findFunnelChartCurrentIndex","funnelData","funnelArea","findWordChartCurrentIndex","wordData","findMapChartCurrentIndex","cData","mapData","tmp","pointToCoordinate","bounds","scale","xoffset","yoffset","poi","geometry","coordinates","isPoiWithinPoly","findRoseChartCurrentIndex","pieData","getRoseDataPoints","_series_","rose","offsetAngle","_start_","_rose_proportion_","findPieChartCurrentIndex","getPieDataPoints","pie","ring","_proportion_","pow","splitPoints","eachSeries","newPoints","items","connectNulls","calLegendData","wholeWidth","wholeHeight","widthArr","heightArr","legend","margin","shapeWidth","shapeRight","lineHeight","legendList","widthCount","widthCountArr","currentRow","itemWidth","itemGap","legendWidth","float","maxHeight","maxLength","lineNum","temp","slice","maxWidth","calCategoriesData","result","categoriesTextLenth","maxTextLength","rotateLabel","sin","getXAxisTextList","stack","sorted","subitem","rangeSpan","eachRange","splitNumber","calXAxisData","columnstyle","bar","ranges","rangesFormat","xAxisScaleValues","Object","getXAxisPoints","textLength","disabled","getRadarDataPoints","process","radarOption","radar","each","listItem","proportion","cos","_radius_","getFunnelDataPoints","sort","reverse","minRadius","dataArr","radiusLength","getArcbarDataPoints","arcbarOption","totalAngle","getGaugeAxisPoints","tempStartAngle","_startAngle_","_endAngle_","getGaugeDataPoints","gaugeOption","pointer","_oldAngle_","oldAngle","oldData","getPieTextMaxLength","textSize","fixColumeData","columnLen","seriesGap","categoryGap","mix","column","fixBarData","fixColumeMeterData","border","fixColumeStackData","indexn","fixBarStackData","spacingValid","dataCount","enableScroll","itemCount","startX","endX","getCandleDataPoints","validHeight","cPoints","indexs","point","getDataPoints","validWidth","xranges","xminRange","xmaxRange","shift","pop","t","getBarDataPoints","getStackDataPoints","seriesIndex","stackSeries","value0","height0","heightc","y0","getBarStackDataPoints","x0","getYAxisTextList","yData","dataRange","yAxis","calYAxisData","YLength","rangesArr","rangesFormatArr","yAxisWidthArr","unit","tofix","yAxisFontSizes","calibration","yAxisFontSize","calTooltipYAxisData","yAxisData","minAxis","maxVal","minVal","calMarkLineData","yAxisIndex","contextRotate","rotateLock","translate","_rotate_","drawPointShape","shape","beginPath","dataPointShapeType","setStrokeStyle","setFillStyle","background","setLineWidth","moveTo","lineTo","arc","rect","closePath","fill","stroke","drawRingTitle","titlefontSize","title","subtitlefontSize","subtitle","titleFontColor","subtitleFontColor","titleHeight","subtitleHeight","textWidth","startY","fillText","_textWidth","_startX","_startY","drawPointText","textOffset","textColor","formatVal","setTextAlign","drawBarPointText","drawGaugeLabel","centerPosition","labelOffset","splitAngle","splitLine","totalNumber","endNumber","startNumber","nowAngle","nowNumber","pos","labelText","labelColor","drawRadarLabel","posRelativeCanvas","drawPieText","lineRadius","textObjectCollection","lastTextObject","seriesConvert","orginX1","orginY1","orginX2","orginY2","orginX3","orginY3","textObject","lineStart","lineEnd","lineStartPoistion","lineEndPoistion","textPosition","curveStartX","textStartX","quadraticCurveTo","drawToolTipSplitLine","toolTipOption","tooltip","gridType","dashLength","endY","setLineDash","gridColor","xAxisLabel","textX","textY","labelBgColor","labelBgOpacity","labelFontColor","drawMarkLine","markLineOption","markLine","lineColor","showLabel","bgStartX","bgEndX","bgWidth","drawToolTipHorizentalLine","yAxisLabel","tStartLeft","tStartRight","drawToolTipSplitArea","activeBgColor","activeBgOpacity","drawBarToolTipSplitArea","drawToolTip","showBox","showArrow","showCategory","bgColor","bgOpacity","borderColor","borderWidth","borderRadius","borderOpacity","unshift","legendMarginRight","arrowWidth","isOverRightBorder","toolTipWidth","toolTipHeight","_scrollDistance_","fillRect","drawColumnDataPoints","columnOption","meterBorder","meterFillColor","barBorderCircle","barBorderRadius","linearOpacity","colorStop","save","leftNum","rightNum","tooltipPoints","fillColor","strokeColor","grd","createLinearGradient","addColorStop","left","top","r0","r1","r2","r3","dataLabel","restore","drawBarDataPoints","heigh","drawCandleDataPoints","seriesMA","candleOption","average","candle","upLine","downLine","day","leftSpace","rightSpace","splitPointList","startPoint","ctrlPoint","bezierCurveTo","drawAreaDataPoints","areaOption","opacity","addLine","gradient","firstPoint","lastPoint","lineType","drawScatterDataPoints","scatterOption","scatter","drawBubbleDataPoints","bubbleOption","bubble","drawLineDataPoints","lineOption","line","drawMixDataPoints","columnIndex","columnLength","addPoint","drawToolTipBridge","horizentalLine","drawXAxis","scrollShow","scrollY","scrollScreenWidth","scrollTotalWidth","scrollWidth","scrollLeft","setLineCap","scrollBackgroundColor","scrollColor","disableGrid","gridEval","maxXAxisListLength","labelCount","ratio","newCategories","cgLength","xAxisFontSize","_xAxisTextAngle_","xitem","scrollHeight","_calRotateTranslate","axisLine","axisLineColor","drawYAxisGrid","xAxiseachSpacing","TotalWidth","drawYAxis","fillEndY","tStartCenter","textAlign","tmpstrat","gapwidth","showTitle","titleOffsetX","titleOffsetY","drawLegend","legendArea","backgroundColor","itemList","listIndex","hiddenColor","fontTrans","drawPieDataPoints","pieOption","activeOpacity","activeRadius","labelWidth","ringWidth","customRadius","centerColor","_pieTextMaxLength_","lineJoin","fillcolor","createCircularGradient","createRadialGradient","innerPieWidth","valid","drawRoseDataPoints","roseOption","drawArcbarDataPoints","arcbar","centerX","centerY","drawGaugeDataPoints","fixRadius","childNumber","childWidth","gauge","innerRadius","pieRadius","childAngle","proc","pointerRadius","gradient3","eachCategories","childendX","drawRadarDataPoints","gridCount","coordinateAngle","xr","yr","_loop","startPos","radarDataPoints","normalInt","iter","arr","random","collisionNew","isIn","getBoundingBox","coords","xMin","xMax","yMin","yMax","coorda","coordinateToPoint","pointY","pointX","isRayIntersectsSegment","s_poi","e_poi","xseg","poly","sinsc","epoly","drawMapDataPoints","mapOption","fillOpacity","activeBorderColor","activeFillColor","activeFillOpacity","xScale","yScale","gaosi","centerPoint","properties","centroid","draw","getWordCloudPoint","tHeight","tWidth","breaknum","Spin","isSpin","areav","drawWordCloudDataPoints","wordOption","autoColors","word","wordCloudData","strokeText","drawFunnelDataPoints","funnelOption","activeWidth","labelAlign","funnel","drawFunnelText","drawCanvas","Timing","easeIn","easeOut","easeInOut","linear","Animation","isStop","duration","timing","delay","createAnimationFrame","setTimeout","step","timeStamp","Date","requestAnimationFrame","animationFrame","startTimeStamp","_step","timestamp","onProcess","onAnimationFinish","timingFunction","bind","prototype","stop","drawCharts","_this","animation","animationInstance","_calLegendData","_calYAxisData","maxTitleHeight","rightIndex","leftIndex","_calCategoriesData","categoriesData","scrollAlign","offsetLeft","totalWidth","screenWidth","currentOffset","startTouchX","lastMoveTime","clearRect","_drawLineDataPoints","enableMarkLine","_drawScatterDataPoints","_drawBubbleDataPoints","_drawMixDataPoints","_drawColumnDataPoints","_drawBarDataPoints","_drawAreaDataPoints","arcbarData","gaugeData","_drawCandleDataPoints","uChartsEvent","events","addEventListener","listener","delEventListener","_len","args","_key","params","uCharts","canvas2d","config$$1","JSON","parse","stringify","tempWidth","tempHeight","strokeStyle","lineWidth","lineCap","font","fillStyle","call","updateData","_getXAxisPoints0","zoom","console","centerLeft","MaxLeft","stopAnimation","getCurrentDataIndex","_touches$","getLegendDataIndex","touchLegend","showToolTip","_getToolTipData","_getMixToolTipData","scrollStart","scroll","now","Limit","touchMoveLimit","currMoveTime","_distance","scrollEnd","_scrollOption"],"mappings":"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","file":"hermes/common/vendor.js","sourcesContent":["/*\r\n * uCharts®\r\n * 高性能跨平台图表库，支持H5、APP、小程序（微信/支付宝/百度/头条/QQ/360）、Vue、Taro等支持canvas的框架平台\r\n * Copyright (c) 2021 QIUN®秋云 https://www.ucharts.cn All rights reserved.\r\n * Licensed ( http://www.apache.org/licenses/LICENSE-2.0 )\r\n * 复制使用请保留本段注释，感谢支持开源！\r\n * \r\n * uCharts®官方网站\r\n * https://www.uCharts.cn\r\n * \r\n * 开源地址:\r\n * https://gitee.com/uCharts/uCharts\r\n * \r\n * uni-app插件市场地址：\r\n * http://ext.dcloud.net.cn/plugin?id=271\r\n * \r\n */\r\n\r\n'use strict';\r\n\r\nvar config = {\r\n  version: 'v2.3.7-20220122',\r\n  yAxisWidth: 15,\r\n  yAxisSplit: 5,\r\n  xAxisHeight: 22,\r\n  xAxisLineHeight: 22,\r\n  legendHeight: 15,\r\n  yAxisTitleWidth: 15,\r\n  padding: [10, 10, 10, 10],\r\n  pixelRatio: 1,\r\n  rotate: false,\r\n  columePadding: 3,\r\n  fontSize: 13,\r\n  fontColor: '#666666',\r\n  dataPointShape: ['circle', 'circle', 'circle', 'circle'],\r\n  color: ['#1890FF', '#91CB74', '#FAC858', '#EE6666', '#73C0DE', '#3CA272', '#FC8452', '#9A60B4', '#ea7ccc'],\r\n  linearColor: ['#0EE2F8', '#2BDCA8', '#FA7D8D', '#EB88E2', '#2AE3A0', '#0EE2F8', '#EB88E2', '#6773E3', '#F78A85'],\r\n  pieChartLinePadding: 15,\r\n  pieChartTextPadding: 5,\r\n  xAxisTextPadding: 3,\r\n  titleColor: '#333333',\r\n  titleFontSize: 20,\r\n  subtitleColor: '#999999',\r\n  subtitleFontSize: 15,\r\n  toolTipPadding: 3,\r\n  toolTipBackground: '#000000',\r\n  toolTipOpacity: 0.7,\r\n  toolTipLineHeight: 20,\r\n  radarLabelTextMargin: 13,\r\n  gaugeLabelTextMargin: 13\r\n};\r\n\r\nvar assign = function(target, ...varArgs) {\r\n  if (target == null) {\r\n    throw new TypeError('[uCharts] Cannot convert undefined or null to object');\r\n  }\r\n  if (!varArgs || varArgs.length <= 0) {\r\n    return target;\r\n  }\r\n  // 深度合并对象\r\n  function deepAssign(obj1, obj2) {\r\n    for (let key in obj2) {\r\n      obj1[key] = obj1[key] && obj1[key].toString() === \"[object Object]\" ?\r\n        deepAssign(obj1[key], obj2[key]) : obj1[key] = obj2[key];\r\n    }\r\n    return obj1;\r\n  }\r\n  varArgs.forEach(val => {\r\n    target = deepAssign(target, val);\r\n  });\r\n  return target;\r\n};\r\n\r\nvar util = {\r\n  toFixed: function toFixed(num, limit) {\r\n    limit = limit || 2;\r\n    if (this.isFloat(num)) {\r\n      num = num.toFixed(limit);\r\n    }\r\n    return num;\r\n  },\r\n  isFloat: function isFloat(num) {\r\n    return num % 1 !== 0;\r\n  },\r\n  approximatelyEqual: function approximatelyEqual(num1, num2) {\r\n    return Math.abs(num1 - num2) < 1e-10;\r\n  },\r\n  isSameSign: function isSameSign(num1, num2) {\r\n    return Math.abs(num1) === num1 && Math.abs(num2) === num2 || Math.abs(num1) !== num1 && Math.abs(num2) !== num2;\r\n  },\r\n  isSameXCoordinateArea: function isSameXCoordinateArea(p1, p2) {\r\n    return this.isSameSign(p1.x, p2.x);\r\n  },\r\n  isCollision: function isCollision(obj1, obj2) {\r\n    obj1.end = {};\r\n    obj1.end.x = obj1.start.x + obj1.width;\r\n    obj1.end.y = obj1.start.y - obj1.height;\r\n    obj2.end = {};\r\n    obj2.end.x = obj2.start.x + obj2.width;\r\n    obj2.end.y = obj2.start.y - obj2.height;\r\n    var flag = obj2.start.x > obj1.end.x || obj2.end.x < obj1.start.x || obj2.end.y > obj1.start.y || obj2.start.y < obj1.end.y;\r\n    return !flag;\r\n  }\r\n};\r\n\r\n//兼容H5点击事件\r\nfunction getH5Offset(e) {\r\n  e.mp = {\r\n    changedTouches: []\r\n  };\r\n  e.mp.changedTouches.push({\r\n    x: e.offsetX,\r\n    y: e.offsetY\r\n  });\r\n  return e;\r\n}\r\n\r\n// 经纬度转墨卡托\r\nfunction lonlat2mercator(longitude, latitude) {\r\n  var mercator = Array(2);\r\n  var x = longitude * 20037508.34 / 180;\r\n  var y = Math.log(Math.tan((90 + latitude) * Math.PI / 360)) / (Math.PI / 180);\r\n  y = y * 20037508.34 / 180;\r\n  mercator[0] = x;\r\n  mercator[1] = y;\r\n  return mercator;\r\n}\r\n\r\n// 墨卡托转经纬度\r\nfunction mercator2lonlat(longitude, latitude) {\r\n  var lonlat = Array(2)\r\n  var x = longitude / 20037508.34 * 180;\r\n  var y = latitude / 20037508.34 * 180;\r\n  y = 180 / Math.PI * (2 * Math.atan(Math.exp(y * Math.PI / 180)) - Math.PI / 2);\r\n  lonlat[0] = x;\r\n  lonlat[1] = y;\r\n  return lonlat;\r\n}\r\n\r\n// hex 转 rgba\r\nfunction hexToRgb(hexValue, opc) {\r\n  var rgx = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n  var hex = hexValue.replace(rgx, function(m, r, g, b) {\r\n    return r + r + g + g + b + b;\r\n  });\r\n  var rgb = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n  var r = parseInt(rgb[1], 16);\r\n  var g = parseInt(rgb[2], 16);\r\n  var b = parseInt(rgb[3], 16);\r\n  return 'rgba(' + r + ',' + g + ',' + b + ',' + opc + ')';\r\n}\r\n\r\nfunction findRange(num, type, limit) {\r\n  if (isNaN(num)) {\r\n    throw new Error('[uCharts] series数据需为Number格式');\r\n  }\r\n  limit = limit || 10;\r\n  type = type ? type : 'upper';\r\n  var multiple = 1;\r\n  while (limit < 1) {\r\n    limit *= 10;\r\n    multiple *= 10;\r\n  }\r\n  if (type === 'upper') {\r\n    num = Math.ceil(num * multiple);\r\n  } else {\r\n    num = Math.floor(num * multiple);\r\n  }\r\n  while (num % limit !== 0) {\r\n    if (type === 'upper') {\r\n      num++;\r\n    } else {\r\n      num--;\r\n    }\r\n  }\r\n  return num / multiple;\r\n}\r\n\r\nfunction calCandleMA(dayArr, nameArr, colorArr, kdata) {\r\n  let seriesTemp = [];\r\n  for (let k = 0; k < dayArr.length; k++) {\r\n    let seriesItem = {\r\n      data: [],\r\n      name: nameArr[k],\r\n      color: colorArr[k]\r\n    };\r\n    for (let i = 0, len = kdata.length; i < len; i++) {\r\n      if (i < dayArr[k]) {\r\n        seriesItem.data.push(null);\r\n        continue;\r\n      }\r\n      let sum = 0;\r\n      for (let j = 0; j < dayArr[k]; j++) {\r\n        sum += kdata[i - j][1];\r\n      }\r\n      seriesItem.data.push(+(sum / dayArr[k]).toFixed(3));\r\n    }\r\n    seriesTemp.push(seriesItem);\r\n  }\r\n  return seriesTemp;\r\n}\r\n\r\nfunction calValidDistance(self, distance, chartData, config, opts) {\r\n  var dataChartAreaWidth = opts.width - opts.area[1] - opts.area[3];\r\n  var dataChartWidth = chartData.eachSpacing * (opts.chartData.xAxisData.xAxisPoints.length - 1);\r\n  var validDistance = distance;\r\n  if (distance >= 0) {\r\n    validDistance = 0;\r\n    self.uevent.trigger('scrollLeft');\r\n    self.scrollOption.position = 'left'\r\n    opts.xAxis.scrollPosition = 'left';\r\n  } else if (Math.abs(distance) >= dataChartWidth - dataChartAreaWidth) {\r\n    validDistance = dataChartAreaWidth - dataChartWidth;\r\n    self.uevent.trigger('scrollRight');\r\n    self.scrollOption.position = 'right'\r\n    opts.xAxis.scrollPosition = 'right';\r\n  } else {\r\n    self.scrollOption.position = distance\r\n    opts.xAxis.scrollPosition = distance;\r\n  }\r\n  return validDistance;\r\n}\r\n\r\nfunction isInAngleRange(angle, startAngle, endAngle) {\r\n  function adjust(angle) {\r\n    while (angle < 0) {\r\n      angle += 2 * Math.PI;\r\n    }\r\n    while (angle > 2 * Math.PI) {\r\n      angle -= 2 * Math.PI;\r\n    }\r\n    return angle;\r\n  }\r\n  angle = adjust(angle);\r\n  startAngle = adjust(startAngle);\r\n  endAngle = adjust(endAngle);\r\n  if (startAngle > endAngle) {\r\n    endAngle += 2 * Math.PI;\r\n    if (angle < startAngle) {\r\n      angle += 2 * Math.PI;\r\n    }\r\n  }\r\n  return angle >= startAngle && angle <= endAngle;\r\n}\r\n\r\nfunction calRotateTranslate(x, y, h) {\r\n  var xv = x;\r\n  var yv = h - y;\r\n  var transX = xv + (h - yv - xv) / Math.sqrt(2);\r\n  transX *= -1;\r\n  var transY = (h - yv) * (Math.sqrt(2) - 1) - (h - yv - xv) / Math.sqrt(2);\r\n  return {\r\n    transX: transX,\r\n    transY: transY\r\n  };\r\n}\r\n\r\nfunction createCurveControlPoints(points, i) {\r\n  function isNotMiddlePoint(points, i) {\r\n    if (points[i - 1] && points[i + 1]) {\r\n      return points[i].y >= Math.max(points[i - 1].y, points[i + 1].y) || points[i].y <= Math.min(points[i - 1].y,\r\n        points[i + 1].y);\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n  function isNotMiddlePointX(points, i) {\r\n    if (points[i - 1] && points[i + 1]) {\r\n      return points[i].x >= Math.max(points[i - 1].x, points[i + 1].x) || points[i].x <= Math.min(points[i - 1].x,\r\n        points[i + 1].x);\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n  var a = 0.2;\r\n  var b = 0.2;\r\n  var pAx = null;\r\n  var pAy = null;\r\n  var pBx = null;\r\n  var pBy = null;\r\n  if (i < 1) {\r\n    pAx = points[0].x + (points[1].x - points[0].x) * a;\r\n    pAy = points[0].y + (points[1].y - points[0].y) * a;\r\n  } else {\r\n    pAx = points[i].x + (points[i + 1].x - points[i - 1].x) * a;\r\n    pAy = points[i].y + (points[i + 1].y - points[i - 1].y) * a;\r\n  }\r\n\r\n  if (i > points.length - 3) {\r\n    var last = points.length - 1;\r\n    pBx = points[last].x - (points[last].x - points[last - 1].x) * b;\r\n    pBy = points[last].y - (points[last].y - points[last - 1].y) * b;\r\n  } else {\r\n    pBx = points[i + 1].x - (points[i + 2].x - points[i].x) * b;\r\n    pBy = points[i + 1].y - (points[i + 2].y - points[i].y) * b;\r\n  }\r\n  if (isNotMiddlePoint(points, i + 1)) {\r\n    pBy = points[i + 1].y;\r\n  }\r\n  if (isNotMiddlePoint(points, i)) {\r\n    pAy = points[i].y;\r\n  }\r\n  if (isNotMiddlePointX(points, i + 1)) {\r\n    pBx = points[i + 1].x;\r\n  }\r\n  if (isNotMiddlePointX(points, i)) {\r\n    pAx = points[i].x;\r\n  }\r\n  if (pAy >= Math.max(points[i].y, points[i + 1].y) || pAy <= Math.min(points[i].y, points[i + 1].y)) {\r\n    pAy = points[i].y;\r\n  }\r\n  if (pBy >= Math.max(points[i].y, points[i + 1].y) || pBy <= Math.min(points[i].y, points[i + 1].y)) {\r\n    pBy = points[i + 1].y;\r\n  }\r\n  if (pAx >= Math.max(points[i].x, points[i + 1].x) || pAx <= Math.min(points[i].x, points[i + 1].x)) {\r\n    pAx = points[i].x;\r\n  }\r\n  if (pBx >= Math.max(points[i].x, points[i + 1].x) || pBx <= Math.min(points[i].x, points[i + 1].x)) {\r\n    pBx = points[i + 1].x;\r\n  }\r\n  return {\r\n    ctrA: {\r\n      x: pAx,\r\n      y: pAy\r\n    },\r\n    ctrB: {\r\n      x: pBx,\r\n      y: pBy\r\n    }\r\n  };\r\n}\r\n\r\nfunction convertCoordinateOrigin(x, y, center) {\r\n  return {\r\n    x: center.x + x,\r\n    y: center.y - y\r\n  };\r\n}\r\n\r\nfunction avoidCollision(obj, target) {\r\n  if (target) {\r\n    // is collision test\r\n    while (util.isCollision(obj, target)) {\r\n      if (obj.start.x > 0) {\r\n        obj.start.y--;\r\n      } else if (obj.start.x < 0) {\r\n        obj.start.y++;\r\n      } else {\r\n        if (obj.start.y > 0) {\r\n          obj.start.y++;\r\n        } else {\r\n          obj.start.y--;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return obj;\r\n}\r\n\r\nfunction fixPieSeries(series, opts, config){\r\n  let pieSeriesArr = [];\r\n  if(series.length>0 && series[0].data.constructor.toString().indexOf('Array') > -1){\r\n    opts._pieSeries_ = series;\r\n    let oldseries = series[0].data;\r\n    for (var i = 0; i < oldseries.length; i++) {\r\n      oldseries[i].formatter = series[0].formatter;\r\n      oldseries[i].data = oldseries[i].value;\r\n      pieSeriesArr.push(oldseries[i]);\r\n    }\r\n    opts.series = pieSeriesArr;\r\n  }else{\r\n    pieSeriesArr = series;\r\n  }\r\n  return pieSeriesArr;\r\n}\r\n\r\nfunction fillSeries(series, opts, config) {\r\n  var index = 0;\r\n  for (var i = 0; i < series.length; i++) {\r\n    let item = series[i];\r\n    if (!item.color) {\r\n      item.color = config.color[index];\r\n      index = (index + 1) % config.color.length;\r\n    }\r\n    if (!item.linearIndex) {\r\n      item.linearIndex = i;\r\n    }\r\n    if (!item.index) {\r\n      item.index = 0;\r\n    }\r\n    if (!item.type) {\r\n      item.type = opts.type;\r\n    }\r\n    if (typeof item.show == \"undefined\") {\r\n      item.show = true;\r\n    }\r\n    if (!item.type) {\r\n      item.type = opts.type;\r\n    }\r\n    if (!item.pointShape) {\r\n      item.pointShape = \"circle\";\r\n    }\r\n    if (!item.legendShape) {\r\n      switch (item.type) {\r\n        case 'line':\r\n          item.legendShape = \"line\";\r\n          break;\r\n        case 'column':\r\n          item.legendShape = \"rect\";\r\n          break;\r\n        case 'area':\r\n          item.legendShape = \"triangle\";\r\n          break;\r\n        case 'bar':\r\n          item.legendShape = \"rect\";\r\n          break;\r\n        default:\r\n          item.legendShape = \"circle\";\r\n      }\r\n    }\r\n  }\r\n  return series;\r\n}\r\n\r\nfunction fillCustomColor(linearType, customColor, series, config) {\r\n  var newcolor = customColor || [];\r\n  if (linearType == 'custom' && newcolor.length == 0 ) {\r\n    newcolor = config.linearColor;\r\n  }\r\n  if (linearType == 'custom' && newcolor.length < series.length) {\r\n    let chazhi = series.length - newcolor.length;\r\n    for (var i = 0; i < chazhi; i++) {\r\n      newcolor.push(config.linearColor[(i + 1) % config.linearColor.length]);\r\n    }\r\n  }\r\n  return newcolor;\r\n}\r\n  \r\nfunction getDataRange(minData, maxData) {\r\n  var limit = 0;\r\n  var range = maxData - minData;\r\n  if (range >= 10000) {\r\n    limit = 1000;\r\n  } else if (range >= 1000) {\r\n    limit = 100;\r\n  } else if (range >= 100) {\r\n    limit = 10;\r\n  } else if (range >= 10) {\r\n    limit = 5;\r\n  } else if (range >= 1) {\r\n    limit = 1;\r\n  } else if (range >= 0.1) {\r\n    limit = 0.1;\r\n  } else if (range >= 0.01) {\r\n    limit = 0.01;\r\n  } else if (range >= 0.001) {\r\n    limit = 0.001;\r\n  } else if (range >= 0.0001) {\r\n    limit = 0.0001;\r\n  } else if (range >= 0.00001) {\r\n    limit = 0.00001;\r\n  } else {\r\n    limit = 0.000001;\r\n  }\r\n  return {\r\n    minRange: findRange(minData, 'lower', limit),\r\n    maxRange: findRange(maxData, 'upper', limit)\r\n  };\r\n}\r\n\r\nfunction measureText(text, fontSize, context) {\r\n  var width = 0;\r\n  text = String(text);\r\n\r\n\r\n\r\n  if (context !== false && context !== undefined && context.setFontSize && context.measureText) {\r\n    context.setFontSize(fontSize);\r\n    return context.measureText(text).width;\r\n  } else {\r\n    var text = text.split('');\r\n    for (let i = 0; i < text.length; i++) {\r\n      let item = text[i];\r\n      if (/[a-zA-Z]/.test(item)) {\r\n        width += 7;\r\n      } else if (/[0-9]/.test(item)) {\r\n        width += 5.5;\r\n      } else if (/\\./.test(item)) {\r\n        width += 2.7;\r\n      } else if (/-/.test(item)) {\r\n        width += 3.25;\r\n      } else if (/:/.test(item)) {\r\n        width += 2.5;\r\n      } else if (/[\\u4e00-\\u9fa5]/.test(item)) {\r\n        width += 10;\r\n      } else if (/\\(|\\)/.test(item)) {\r\n        width += 3.73;\r\n      } else if (/\\s/.test(item)) {\r\n        width += 2.5;\r\n      } else if (/%/.test(item)) {\r\n        width += 8;\r\n      } else {\r\n        width += 10;\r\n      }\r\n    }\r\n    return width * fontSize / 10;\r\n  }\r\n}\r\n\r\nfunction dataCombine(series) {\r\n  return series.reduce(function(a, b) {\r\n    return (a.data ? a.data : a).concat(b.data);\r\n  }, []);\r\n}\r\n\r\nfunction dataCombineStack(series, len) {\r\n  var sum = new Array(len);\r\n  for (var j = 0; j < sum.length; j++) {\r\n    sum[j] = 0;\r\n  }\r\n  for (var i = 0; i < series.length; i++) {\r\n    for (var j = 0; j < sum.length; j++) {\r\n      sum[j] += series[i].data[j];\r\n    }\r\n  }\r\n  return series.reduce(function(a, b) {\r\n    return (a.data ? a.data : a).concat(b.data).concat(sum);\r\n  }, []);\r\n}\r\n\r\nfunction getTouches(touches, opts, e) {\r\n  let x, y;\r\n  if (touches.clientX) {\r\n    if (opts.rotate) {\r\n      y = opts.height - touches.clientX * opts.pix;\r\n      x = (touches.pageY - e.currentTarget.offsetTop - (opts.height / opts.pix / 2) * (opts.pix - 1)) * opts.pix;\r\n    } else {\r\n      x = touches.clientX * opts.pix;\r\n      y = (touches.pageY - e.currentTarget.offsetTop - (opts.height / opts.pix / 2) * (opts.pix - 1)) * opts.pix;\r\n    }\r\n  } else {\r\n    if (opts.rotate) {\r\n      y = opts.height - touches.x * opts.pix;\r\n      x = touches.y * opts.pix;\r\n    } else {\r\n      x = touches.x * opts.pix;\r\n      y = touches.y * opts.pix;\r\n    }\r\n  }\r\n  return {\r\n    x: x,\r\n    y: y\r\n  }\r\n}\r\n\r\nfunction getSeriesDataItem(series, index, group) {\r\n  var data = [];\r\n  var newSeries = [];\r\n  var indexIsArr = index.constructor.toString().indexOf('Array') > -1;\r\n  if(indexIsArr){\r\n    let tempSeries = filterSeries(series);\r\n    for (var i = 0; i < group.length; i++) {\r\n      newSeries.push(tempSeries[group[i]]);\r\n    }\r\n  }else{\r\n    newSeries = series;\r\n  };\r\n  for (let i = 0; i < newSeries.length; i++) {\r\n    let item = newSeries[i];\r\n    let tmpindex = -1;\r\n    if(indexIsArr){\r\n      tmpindex = index[i];\r\n    }else{\r\n      tmpindex = index;\r\n    }\r\n    if (item.data[tmpindex] !== null && typeof item.data[tmpindex] !== 'undefined' && item.show) {\r\n      let seriesItem = {};\r\n      seriesItem.color = item.color;\r\n      seriesItem.type = item.type;\r\n      seriesItem.style = item.style;\r\n      seriesItem.pointShape = item.pointShape;\r\n      seriesItem.disableLegend = item.disableLegend;\r\n      seriesItem.name = item.name;\r\n      seriesItem.show = item.show;\r\n      seriesItem.data = item.formatter ? item.formatter(item.data[tmpindex]) : item.data[tmpindex];\r\n      data.push(seriesItem);\r\n    }\r\n  }\r\n  return data;\r\n}\r\n\r\nfunction getMaxTextListLength(list, fontSize, context) {\r\n  var lengthList = list.map(function(item) {\r\n    return measureText(item, fontSize, context);\r\n  });\r\n  return Math.max.apply(null, lengthList);\r\n}\r\n\r\nfunction getRadarCoordinateSeries(length) {\r\n  var eachAngle = 2 * Math.PI / length;\r\n  var CoordinateSeries = [];\r\n  for (var i = 0; i < length; i++) {\r\n    CoordinateSeries.push(eachAngle * i);\r\n  }\r\n  return CoordinateSeries.map(function(item) {\r\n    return -1 * item + Math.PI / 2;\r\n  });\r\n}\r\n\r\nfunction getToolTipData(seriesData, opts, index, group, categories) {\r\n  var option = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\r\n  var calPoints = opts.chartData.calPoints?opts.chartData.calPoints:[];\r\n  let points = {};\r\n  if(group.length > 0){\r\n    let filterPoints = [];\r\n    for (let i = 0; i < group.length; i++) {\r\n      filterPoints.push(calPoints[group[i]])\r\n    }\r\n    points = filterPoints[0][index[0]];\r\n  }else{\r\n    points = calPoints[0][index];\r\n  };\r\n  var textList = seriesData.map(function(item) {\r\n    let titleText = null;\r\n    if (opts.categories && opts.categories.length>0) {\r\n      titleText = categories[index];\r\n    };\r\n    return {\r\n      text: option.formatter ? option.formatter(item, titleText, index, opts) : item.name + ': ' + item.data,\r\n      color: item.color\r\n    };\r\n  });\r\n  var offset = {\r\n    x: Math.round(points.x),\r\n    y: Math.round(points.y)\r\n  };\r\n  return {\r\n    textList: textList,\r\n    offset: offset\r\n  };\r\n}\r\n\r\nfunction getMixToolTipData(seriesData, opts, index, categories) {\r\n  var option = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\r\n  var points = opts.chartData.xAxisPoints[index] + opts.chartData.eachSpacing / 2;\r\n  var textList = seriesData.map(function(item) {\r\n    return {\r\n      text: option.formatter ? option.formatter(item, categories[index], index, opts) : item.name + ': ' + item.data,\r\n      color: item.color,\r\n      disableLegend: item.disableLegend ? true : false\r\n    };\r\n  });\r\n  textList = textList.filter(function(item) {\r\n    if (item.disableLegend !== true) {\r\n      return item;\r\n    }\r\n  });\r\n  var offset = {\r\n    x: Math.round(points),\r\n    y: 0\r\n  };\r\n  return {\r\n    textList: textList,\r\n    offset: offset\r\n  };\r\n}\r\n\r\nfunction getCandleToolTipData(series, seriesData, opts, index, categories, extra) {\r\n  var option = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : {};\r\n  var calPoints = opts.chartData.calPoints;\r\n  let upColor = extra.color.upFill;\r\n  let downColor = extra.color.downFill;\r\n  //颜色顺序为开盘，收盘，最低，最高\r\n  let color = [upColor, upColor, downColor, upColor];\r\n  var textList = [];\r\n  seriesData.map(function(item) {\r\n    if (index == 0) {\r\n      if (item.data[1] - item.data[0] < 0) {\r\n        color[1] = downColor;\r\n      } else {\r\n        color[1] = upColor;\r\n      }\r\n    } else {\r\n      if (item.data[0] < series[index - 1][1]) {\r\n        color[0] = downColor;\r\n      }\r\n      if (item.data[1] < item.data[0]) {\r\n        color[1] = downColor;\r\n      }\r\n      if (item.data[2] > series[index - 1][1]) {\r\n        color[2] = upColor;\r\n      }\r\n      if (item.data[3] < series[index - 1][1]) {\r\n        color[3] = downColor;\r\n      }\r\n    }\r\n    let text1 = {\r\n      text: '开盘：' + item.data[0],\r\n      color: color[0]\r\n    };\r\n    let text2 = {\r\n      text: '收盘：' + item.data[1],\r\n      color: color[1]\r\n    };\r\n    let text3 = {\r\n      text: '最低：' + item.data[2],\r\n      color: color[2]\r\n    };\r\n    let text4 = {\r\n      text: '最高：' + item.data[3],\r\n      color: color[3]\r\n    };\r\n    textList.push(text1, text2, text3, text4);\r\n  });\r\n  var validCalPoints = [];\r\n  var offset = {\r\n    x: 0,\r\n    y: 0\r\n  };\r\n  for (let i = 0; i < calPoints.length; i++) {\r\n    let points = calPoints[i];\r\n    if (typeof points[index] !== 'undefined' && points[index] !== null) {\r\n      validCalPoints.push(points[index]);\r\n    }\r\n  }\r\n  offset.x = Math.round(validCalPoints[0][0].x);\r\n  return {\r\n    textList: textList,\r\n    offset: offset\r\n  };\r\n}\r\n\r\nfunction filterSeries(series) {\r\n  let tempSeries = [];\r\n  for (let i = 0; i < series.length; i++) {\r\n    if (series[i].show == true) {\r\n      tempSeries.push(series[i])\r\n    }\r\n  }\r\n  return tempSeries;\r\n}\r\n\r\nfunction findCurrentIndex(currentPoints, calPoints, opts, config) {\r\n  var offset = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\r\n  var current={ index:-1, group:[] };\r\n  var spacing = opts.chartData.eachSpacing / 2;\r\n  let xAxisPoints = [];\r\n  if (calPoints && calPoints.length > 0) {\r\n    if (!opts.categories) {\r\n      spacing = 0;\r\n    }else{\r\n      for (let i = 1; i < opts.chartData.xAxisPoints.length; i++) {\r\n        xAxisPoints.push(opts.chartData.xAxisPoints[i] - spacing);\r\n      }\r\n      if ((opts.type == 'line' || opts.type == 'area') && opts.xAxis.boundaryGap == 'justify') {\r\n        xAxisPoints = opts.chartData.xAxisPoints;\r\n      }\r\n    }\r\n    if (isInExactChartArea(currentPoints, opts, config)) {\r\n      if (!opts.categories) {\r\n        let timePoints = Array(calPoints.length);\r\n        for (let i = 0; i < calPoints.length; i++) {\r\n          timePoints[i] = Array(calPoints[i].length)\r\n          for (let j = 0; j < calPoints[i].length; j++) {\r\n            timePoints[i][j] = (Math.abs(calPoints[i][j].x - currentPoints.x));\r\n          }\r\n        };\r\n        let pointValue =  Array(timePoints.length);\r\n        let pointIndex =  Array(timePoints.length);\r\n        for (let i = 0; i < timePoints.length; i++) {\r\n          pointValue[i] = Math.min.apply(null, timePoints[i]);\r\n          pointIndex[i] = timePoints[i].indexOf(pointValue[i]);\r\n        }\r\n        let minValue = Math.min.apply(null, pointValue);\r\n        current.index = [];\r\n        for (let i = 0; i < pointValue.length; i++) {\r\n          if(pointValue[i] == minValue){\r\n            current.group.push(i);\r\n            current.index.push(pointIndex[i]);\r\n          }\r\n        };\r\n      }else{\r\n        xAxisPoints.forEach(function(item, index) {\r\n          if (currentPoints.x + offset + spacing > item) {\r\n            current.index = index;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n  return current;\r\n}\r\n\r\nfunction findBarChartCurrentIndex(currentPoints, calPoints, opts, config) {\r\n  var offset = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\r\n  var current={ index:-1, group:[] };\r\n  var spacing = opts.chartData.eachSpacing / 2;\r\n  let yAxisPoints = opts.chartData.yAxisPoints;\r\n  if (calPoints && calPoints.length > 0) {\r\n    if (isInExactChartArea(currentPoints, opts, config)) {\r\n      yAxisPoints.forEach(function(item, index) {\r\n        if (currentPoints.y + offset + spacing > item) {\r\n          current.index = index;\r\n        }\r\n      });\r\n    }\r\n  }\r\n  return current;\r\n}\r\n\r\nfunction findLegendIndex(currentPoints, legendData, opts) {\r\n  let currentIndex = -1;\r\n  let gap = 0;\r\n  if (isInExactLegendArea(currentPoints, legendData.area)) {\r\n    let points = legendData.points;\r\n    let index = -1;\r\n    for (let i = 0, len = points.length; i < len; i++) {\r\n      let item = points[i];\r\n      for (let j = 0; j < item.length; j++) {\r\n        index += 1;\r\n        let area = item[j]['area'];\r\n        if (area && currentPoints.x > area[0] - gap && currentPoints.x < area[2] + gap && currentPoints.y > area[1] - gap && currentPoints.y < area[3] + gap) {\r\n          currentIndex = index;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    return currentIndex;\r\n  }\r\n  return currentIndex;\r\n}\r\n\r\nfunction isInExactLegendArea(currentPoints, area) {\r\n  return currentPoints.x > area.start.x && currentPoints.x < area.end.x && currentPoints.y > area.start.y && currentPoints.y < area.end.y;\r\n}\r\n\r\nfunction isInExactChartArea(currentPoints, opts, config) {\r\n  return currentPoints.x <= opts.width - opts.area[1] + 10 && currentPoints.x >= opts.area[3] - 10 && currentPoints.y >= opts.area[0] && currentPoints.y <= opts.height - opts.area[2];\r\n}\r\n\r\nfunction findRadarChartCurrentIndex(currentPoints, radarData, count) {\r\n  var eachAngleArea = 2 * Math.PI / count;\r\n  var currentIndex = -1;\r\n  if (isInExactPieChartArea(currentPoints, radarData.center, radarData.radius)) {\r\n    var fixAngle = function fixAngle(angle) {\r\n      if (angle < 0) {\r\n        angle += 2 * Math.PI;\r\n      }\r\n      if (angle > 2 * Math.PI) {\r\n        angle -= 2 * Math.PI;\r\n      }\r\n      return angle;\r\n    };\r\n    var angle = Math.atan2(radarData.center.y - currentPoints.y, currentPoints.x - radarData.center.x);\r\n    angle = -1 * angle;\r\n    if (angle < 0) {\r\n      angle += 2 * Math.PI;\r\n    }\r\n    var angleList = radarData.angleList.map(function(item) {\r\n      item = fixAngle(-1 * item);\r\n      return item;\r\n    });\r\n    angleList.forEach(function(item, index) {\r\n      var rangeStart = fixAngle(item - eachAngleArea / 2);\r\n      var rangeEnd = fixAngle(item + eachAngleArea / 2);\r\n      if (rangeEnd < rangeStart) {\r\n        rangeEnd += 2 * Math.PI;\r\n      }\r\n      if (angle >= rangeStart && angle <= rangeEnd || angle + 2 * Math.PI >= rangeStart && angle + 2 * Math.PI <= rangeEnd) {\r\n        currentIndex = index;\r\n      }\r\n    });\r\n  }\r\n  return currentIndex;\r\n}\r\n\r\nfunction findFunnelChartCurrentIndex(currentPoints, funnelData) {\r\n  var currentIndex = -1;\r\n  for (var i = 0, len = funnelData.series.length; i < len; i++) {\r\n    var item = funnelData.series[i];\r\n    if (currentPoints.x > item.funnelArea[0] && currentPoints.x < item.funnelArea[2] && currentPoints.y > item.funnelArea[1] && currentPoints.y < item.funnelArea[3]) {\r\n      currentIndex = i;\r\n      break;\r\n    }\r\n  }\r\n  return currentIndex;\r\n}\r\n\r\nfunction findWordChartCurrentIndex(currentPoints, wordData) {\r\n  var currentIndex = -1;\r\n  for (var i = 0, len = wordData.length; i < len; i++) {\r\n    var item = wordData[i];\r\n    if (currentPoints.x > item.area[0] && currentPoints.x < item.area[2] && currentPoints.y > item.area[1] && currentPoints.y < item.area[3]) {\r\n      currentIndex = i;\r\n      break;\r\n    }\r\n  }\r\n  return currentIndex;\r\n}\r\n\r\nfunction findMapChartCurrentIndex(currentPoints, opts) {\r\n  var currentIndex = -1;\r\n  var cData = opts.chartData.mapData;\r\n  var data = opts.series;\r\n  var tmp = pointToCoordinate(currentPoints.y, currentPoints.x, cData.bounds, cData.scale, cData.xoffset, cData.yoffset);\r\n  var poi = [tmp.x, tmp.y];\r\n  for (var i = 0, len = data.length; i < len; i++) {\r\n    var item = data[i].geometry.coordinates;\r\n    if (isPoiWithinPoly(poi, item, opts.chartData.mapData.mercator)) {\r\n      currentIndex = i;\r\n      break;\r\n    }\r\n  }\r\n  return currentIndex;\r\n}\r\n\r\nfunction findRoseChartCurrentIndex(currentPoints, pieData, opts) {\r\n  var currentIndex = -1;\r\n  var series = getRoseDataPoints(opts._series_, opts.extra.rose.type, pieData.radius, pieData.radius);\r\n  if (pieData && pieData.center && isInExactPieChartArea(currentPoints, pieData.center, pieData.radius)) {\r\n    var angle = Math.atan2(pieData.center.y - currentPoints.y, currentPoints.x - pieData.center.x);\r\n    angle = -angle;\r\n    if(opts.extra.rose && opts.extra.rose.offsetAngle){\r\n      angle = angle - opts.extra.rose.offsetAngle * Math.PI / 180;\r\n    }\r\n    for (var i = 0, len = series.length; i < len; i++) {\r\n      if (isInAngleRange(angle, series[i]._start_, series[i]._start_ + series[i]._rose_proportion_ * 2 * Math.PI)) {\r\n        currentIndex = i;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  return currentIndex;\r\n}\r\n\r\nfunction findPieChartCurrentIndex(currentPoints, pieData, opts) {\r\n  var currentIndex = -1;\r\n  var series = getPieDataPoints(pieData.series);\r\n  if (pieData && pieData.center && isInExactPieChartArea(currentPoints, pieData.center, pieData.radius)) {\r\n    var angle = Math.atan2(pieData.center.y - currentPoints.y, currentPoints.x - pieData.center.x);\r\n    angle = -angle;\r\n    if(opts.extra.pie && opts.extra.pie.offsetAngle){\r\n      angle = angle - opts.extra.pie.offsetAngle * Math.PI / 180;\r\n    }\r\n    if(opts.extra.ring && opts.extra.ring.offsetAngle){\r\n      angle = angle - opts.extra.ring.offsetAngle * Math.PI / 180;\r\n    }\r\n    for (var i = 0, len = series.length; i < len; i++) {\r\n      if (isInAngleRange(angle, series[i]._start_, series[i]._start_ + series[i]._proportion_ * 2 * Math.PI)) {\r\n        currentIndex = i;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  return currentIndex;\r\n}\r\n\r\nfunction isInExactPieChartArea(currentPoints, center, radius) {\r\n  return Math.pow(currentPoints.x - center.x, 2) + Math.pow(currentPoints.y - center.y, 2) <= Math.pow(radius, 2);\r\n}\r\n\r\nfunction splitPoints(points,eachSeries) {\r\n  var newPoints = [];\r\n  var items = [];\r\n  points.forEach(function(item, index) {\r\n    if(eachSeries.connectNulls){\r\n      if (item !== null) {\r\n        items.push(item);\r\n      }\r\n    }else{\r\n      if (item !== null) {\r\n        items.push(item);\r\n      } else {\r\n        if (items.length) {\r\n          newPoints.push(items);\r\n        }\r\n        items = [];\r\n      }\r\n    }\r\n    \r\n  });\r\n  if (items.length) {\r\n    newPoints.push(items);\r\n  }\r\n  return newPoints;\r\n}\r\n\r\nfunction calLegendData(series, opts, config, chartData, context) {\r\n  let legendData = {\r\n    area: {\r\n      start: {\r\n        x: 0,\r\n        y: 0\r\n      },\r\n      end: {\r\n        x: 0,\r\n        y: 0\r\n      },\r\n      width: 0,\r\n      height: 0,\r\n      wholeWidth: 0,\r\n      wholeHeight: 0\r\n    },\r\n    points: [],\r\n    widthArr: [],\r\n    heightArr: []\r\n  };\r\n  if (opts.legend.show === false) {\r\n    chartData.legendData = legendData;\r\n    return legendData;\r\n  }\r\n  let padding = opts.legend.padding * opts.pix;\r\n  let margin = opts.legend.margin * opts.pix;\r\n  let fontSize = opts.legend.fontSize ? opts.legend.fontSize * opts.pix : config.fontSize;\r\n  let shapeWidth = 15 * opts.pix;\r\n  let shapeRight = 5 * opts.pix;\r\n  let lineHeight = Math.max(opts.legend.lineHeight * opts.pix, fontSize);\r\n  if (opts.legend.position == 'top' || opts.legend.position == 'bottom') {\r\n    let legendList = [];\r\n    let widthCount = 0;\r\n    let widthCountArr = [];\r\n    let currentRow = [];\r\n    for (let i = 0; i < series.length; i++) {\r\n      let item = series[i];\r\n      let itemWidth = shapeWidth + shapeRight + measureText(item.name || 'undefined', fontSize, context) + opts.legend.itemGap * opts.pix;\r\n      if (widthCount + itemWidth > opts.width - opts.area[1] - opts.area[3]) {\r\n        legendList.push(currentRow);\r\n        widthCountArr.push(widthCount - opts.legend.itemGap * opts.pix);\r\n        widthCount = itemWidth;\r\n        currentRow = [item];\r\n      } else {\r\n        widthCount += itemWidth;\r\n        currentRow.push(item);\r\n      }\r\n    }\r\n    if (currentRow.length) {\r\n      legendList.push(currentRow);\r\n      widthCountArr.push(widthCount - opts.legend.itemGap * opts.pix);\r\n      legendData.widthArr = widthCountArr;\r\n      let legendWidth = Math.max.apply(null, widthCountArr);\r\n      switch (opts.legend.float) {\r\n        case 'left':\r\n          legendData.area.start.x = opts.area[3];\r\n          legendData.area.end.x = opts.area[3] + legendWidth + 2 * padding;\r\n          break;\r\n        case 'right':\r\n          legendData.area.start.x = opts.width - opts.area[1] - legendWidth - 2 * padding;\r\n          legendData.area.end.x = opts.width - opts.area[1];\r\n          break;\r\n        default:\r\n          legendData.area.start.x = (opts.width - legendWidth) / 2 - padding;\r\n          legendData.area.end.x = (opts.width + legendWidth) / 2 + padding;\r\n      }\r\n      legendData.area.width = legendWidth + 2 * padding;\r\n      legendData.area.wholeWidth = legendWidth + 2 * padding;\r\n      legendData.area.height = legendList.length * lineHeight + 2 * padding;\r\n      legendData.area.wholeHeight = legendList.length * lineHeight + 2 * padding + 2 * margin;\r\n      legendData.points = legendList;\r\n    }\r\n  } else {\r\n    let len = series.length;\r\n    let maxHeight = opts.height - opts.area[0] - opts.area[2] - 2 * margin - 2 * padding;\r\n    let maxLength = Math.min(Math.floor(maxHeight / lineHeight), len);\r\n    legendData.area.height = maxLength * lineHeight + padding * 2;\r\n    legendData.area.wholeHeight = maxLength * lineHeight + padding * 2;\r\n    switch (opts.legend.float) {\r\n      case 'top':\r\n        legendData.area.start.y = opts.area[0] + margin;\r\n        legendData.area.end.y = opts.area[0] + margin + legendData.area.height;\r\n        break;\r\n      case 'bottom':\r\n        legendData.area.start.y = opts.height - opts.area[2] - margin - legendData.area.height;\r\n        legendData.area.end.y = opts.height - opts.area[2] - margin;\r\n        break;\r\n      default:\r\n        legendData.area.start.y = (opts.height - legendData.area.height) / 2;\r\n        legendData.area.end.y = (opts.height + legendData.area.height) / 2;\r\n    }\r\n    let lineNum = len % maxLength === 0 ? len / maxLength : Math.floor((len / maxLength) + 1);\r\n    let currentRow = [];\r\n    for (let i = 0; i < lineNum; i++) {\r\n      let temp = series.slice(i * maxLength, i * maxLength + maxLength);\r\n      currentRow.push(temp);\r\n    }\r\n    legendData.points = currentRow;\r\n    if (currentRow.length) {\r\n      for (let i = 0; i < currentRow.length; i++) {\r\n        let item = currentRow[i];\r\n        let maxWidth = 0;\r\n        for (let j = 0; j < item.length; j++) {\r\n          let itemWidth = shapeWidth + shapeRight + measureText(item[j].name || 'undefined', fontSize, context) + opts.legend.itemGap * opts.pix;\r\n          if (itemWidth > maxWidth) {\r\n            maxWidth = itemWidth;\r\n          }\r\n        }\r\n        legendData.widthArr.push(maxWidth);\r\n        legendData.heightArr.push(item.length * lineHeight + padding * 2);\r\n      }\r\n      let legendWidth = 0\r\n      for (let i = 0; i < legendData.widthArr.length; i++) {\r\n        legendWidth += legendData.widthArr[i];\r\n      }\r\n      legendData.area.width = legendWidth - opts.legend.itemGap * opts.pix + 2 * padding;\r\n      legendData.area.wholeWidth = legendData.area.width + padding;\r\n    }\r\n  }\r\n  switch (opts.legend.position) {\r\n    case 'top':\r\n      legendData.area.start.y = opts.area[0] + margin;\r\n      legendData.area.end.y = opts.area[0] + margin + legendData.area.height;\r\n      break;\r\n    case 'bottom':\r\n      legendData.area.start.y = opts.height - opts.area[2] - legendData.area.height - margin;\r\n      legendData.area.end.y = opts.height - opts.area[2] - margin;\r\n      break;\r\n    case 'left':\r\n      legendData.area.start.x = opts.area[3];\r\n      legendData.area.end.x = opts.area[3] + legendData.area.width;\r\n      break;\r\n    case 'right':\r\n      legendData.area.start.x = opts.width - opts.area[1] - legendData.area.width;\r\n      legendData.area.end.x = opts.width - opts.area[1];\r\n      break;\r\n  }\r\n  chartData.legendData = legendData;\r\n  return legendData;\r\n}\r\n\r\nfunction calCategoriesData(categories, opts, config, eachSpacing, context) {\r\n  var result = {\r\n    angle: 0,\r\n    xAxisHeight: config.xAxisHeight\r\n  };\r\n  var categoriesTextLenth = categories.map(function(item) {\r\n    return measureText(item, opts.xAxis.fontSize * opts.pix || config.fontSize, context);\r\n  });\r\n  var maxTextLength = Math.max.apply(this, categoriesTextLenth);\r\n\r\n  if (opts.xAxis.rotateLabel == true && maxTextLength + 2 * config.xAxisTextPadding > eachSpacing) {\r\n    result.angle = 45 * Math.PI / 180;\r\n    result.xAxisHeight = 2 * config.xAxisTextPadding + maxTextLength * Math.sin(result.angle);\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction getXAxisTextList(series, opts, config, stack) {\r\n  var index = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : -1;\r\n  var data;\r\n  if (stack == 'stack') {\r\n    data = dataCombineStack(series, opts.categories.length);\r\n  } else {\r\n    data = dataCombine(series);\r\n  }\r\n  var sorted = [];\r\n  // remove null from data\r\n  data = data.filter(function(item) {\r\n    //return item !== null;\r\n    if (typeof item === 'object' && item !== null) {\r\n      if (item.constructor.toString().indexOf('Array') > -1) {\r\n        return item !== null;\r\n      } else {\r\n        return item.value !== null;\r\n      }\r\n    } else {\r\n      return item !== null;\r\n    }\r\n  });\r\n  data.map(function(item) {\r\n    if (typeof item === 'object') {\r\n      if (item.constructor.toString().indexOf('Array') > -1) {\r\n        if (opts.type == 'candle') {\r\n          item.map(function(subitem) {\r\n            sorted.push(subitem);\r\n          })\r\n        } else {\r\n          sorted.push(item[0]);\r\n        }\r\n      } else {\r\n        sorted.push(item.value);\r\n      }\r\n    } else {\r\n      sorted.push(item);\r\n    }\r\n  })\r\n\r\n  var minData = 0;\r\n  var maxData = 0;\r\n  if (sorted.length > 0) {\r\n    minData = Math.min.apply(this, sorted);\r\n    maxData = Math.max.apply(this, sorted);\r\n  }\r\n  //为了兼容v1.9.0之前的项目\r\n  if (index > -1) {\r\n    if (typeof opts.xAxis.data[index].min === 'number') {\r\n      minData = Math.min(opts.xAxis.data[index].min, minData);\r\n    }\r\n    if (typeof opts.xAxis.data[index].max === 'number') {\r\n      maxData = Math.max(opts.xAxis.data[index].max, maxData);\r\n    }\r\n  } else {\r\n    if (typeof opts.xAxis.min === 'number') {\r\n      minData = Math.min(opts.xAxis.min, minData);\r\n    }\r\n    if (typeof opts.xAxis.max === 'number') {\r\n      maxData = Math.max(opts.xAxis.max, maxData);\r\n    }\r\n  }\r\n  if (minData === maxData) {\r\n    var rangeSpan = maxData || 10;\r\n    maxData += rangeSpan;\r\n  }\r\n  //var dataRange = getDataRange(minData, maxData);\r\n  var minRange = minData;\r\n  var maxRange = maxData;\r\n  var range = [];\r\n  var eachRange = (maxRange - minRange) / opts.xAxis.splitNumber;\r\n  for (var i = 0; i <= opts.xAxis.splitNumber; i++) {\r\n    range.push(minRange + eachRange * i);\r\n  }\r\n  return range;\r\n}\r\n\r\nfunction calXAxisData(series, opts, config, context) {\r\n  //堆叠图重算Y轴\r\n  var columnstyle = assign({}, {\r\n    type: \"\"\r\n  }, opts.extra.bar);\r\n  var result = {\r\n    angle: 0,\r\n    xAxisHeight: config.xAxisHeight\r\n  };\r\n  result.ranges = getXAxisTextList(series, opts, config, columnstyle.type);\r\n  result.rangesFormat = result.ranges.map(function(item) {\r\n    //item = opts.xAxis.formatter ? opts.xAxis.formatter(item) : util.toFixed(item, 2);\r\n    item = util.toFixed(item, 2);\r\n    return item;\r\n  });\r\n  var xAxisScaleValues = result.ranges.map(function(item) {\r\n    // 如果刻度值是浮点数,则保留两位小数\r\n    item = util.toFixed(item, 2);\r\n    // 若有自定义格式则调用自定义的格式化函数\r\n    //item = opts.xAxis.formatter ? opts.xAxis.formatter(Number(item)) : item;\r\n    return item;\r\n  });\r\n  result = Object.assign(result, getXAxisPoints(xAxisScaleValues, opts, config));\r\n  // 计算X轴刻度的属性譬如每个刻度的间隔,刻度的起始点\\结束点以及总长\r\n  var eachSpacing = result.eachSpacing;\r\n  var textLength = xAxisScaleValues.map(function(item) {\r\n    return measureText(item, opts.xAxis.fontSize * opts.pix || config.fontSize, context);\r\n  });\r\n  // get max length of categories text\r\n  var maxTextLength = Math.max.apply(this, textLength);\r\n  // 如果刻度值文本内容过长,则将其逆时针旋转45°\r\n  if (maxTextLength + 2 * config.xAxisTextPadding > eachSpacing) {\r\n    result.angle = 45 * Math.PI / 180;\r\n    result.xAxisHeight = 2 * config.xAxisTextPadding + maxTextLength * Math.sin(result.angle);\r\n  }\r\n  if (opts.xAxis.disabled === true) {\r\n    result.xAxisHeight = 0;\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction getRadarDataPoints(angleList, center, radius, series, opts) {\r\n  var process = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1;\r\n  var radarOption = opts.extra.radar || {};\r\n  radarOption.max = radarOption.max || 0;\r\n  var maxData = Math.max(radarOption.max, Math.max.apply(null, dataCombine(series)));\r\n  var data = [];\r\n  for (let i = 0; i < series.length; i++) {\r\n    let each = series[i];\r\n    let listItem = {};\r\n    listItem.color = each.color;\r\n    listItem.legendShape = each.legendShape;\r\n    listItem.pointShape = each.pointShape;\r\n    listItem.data = [];\r\n    each.data.forEach(function(item, index) {\r\n      let tmp = {};\r\n      tmp.angle = angleList[index];\r\n      tmp.proportion = item / maxData;\r\n      tmp.value = item;\r\n      tmp.position = convertCoordinateOrigin(radius * tmp.proportion * process * Math.cos(tmp.angle), radius * tmp.proportion * process * Math.sin(tmp.angle), center);\r\n      listItem.data.push(tmp);\r\n    });\r\n    data.push(listItem);\r\n  }\r\n  return data;\r\n}\r\n\r\nfunction getPieDataPoints(series, radius) {\r\n  var process = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\r\n  var count = 0;\r\n  var _start_ = 0;\r\n  for (let i = 0; i < series.length; i++) {\r\n    let item = series[i];\r\n    item.data = item.data === null ? 0 : item.data;\r\n    count += item.data;\r\n  }\r\n  for (let i = 0; i < series.length; i++) {\r\n    let item = series[i];\r\n    item.data = item.data === null ? 0 : item.data;\r\n    if (count === 0) {\r\n      item._proportion_ = 1 / series.length * process;\r\n    } else {\r\n      item._proportion_ = item.data / count * process;\r\n    }\r\n    item._radius_ = radius;\r\n  }\r\n  for (let i = 0; i < series.length; i++) {\r\n    let item = series[i];\r\n    item._start_ = _start_;\r\n    _start_ += 2 * item._proportion_ * Math.PI;\r\n  }\r\n  return series;\r\n}\r\n\r\nfunction getFunnelDataPoints(series, radius, type, eachSpacing) {\r\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  series = series.sort(function(a, b) {\r\n    return parseInt(b.data) - parseInt(a.data);\r\n  });\r\n  for (let i = 0; i < series.length; i++) {\r\n    if(type == 'funnel'){\r\n      series[i].radius = series[i].data / series[0].data * radius * process;\r\n    }else{\r\n      series[i].radius =  (eachSpacing * (series.length - i)) / (eachSpacing * series.length) * radius * process;\r\n    }\r\n    series[i]._proportion_ = series[i].data / series[0].data;\r\n  }\r\n  if(type !== 'pyramid'){\r\n    series.reverse();\r\n  }\r\n  return series;\r\n}\r\n\r\nfunction getRoseDataPoints(series, type, minRadius, radius) {\r\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  var count = 0;\r\n  var _start_ = 0;\r\n  var dataArr = [];\r\n  for (let i = 0; i < series.length; i++) {\r\n    let item = series[i];\r\n    item.data = item.data === null ? 0 : item.data;\r\n    count += item.data;\r\n    dataArr.push(item.data);\r\n  }\r\n  var minData = Math.min.apply(null, dataArr);\r\n  var maxData = Math.max.apply(null, dataArr);\r\n  var radiusLength = radius - minRadius;\r\n  for (let i = 0; i < series.length; i++) {\r\n    let item = series[i];\r\n    item.data = item.data === null ? 0 : item.data;\r\n    if (count === 0) {\r\n      item._proportion_ = 1 / series.length * process;\r\n      item._rose_proportion_ = 1 / series.length * process;\r\n    } else {\r\n      item._proportion_ = item.data / count * process;\r\n      if(type == 'area'){\r\n        item._rose_proportion_ = 1 / series.length * process;\r\n      }else{\r\n        item._rose_proportion_ = item.data / count * process;\r\n      }\r\n    }\r\n    item._radius_ = minRadius + radiusLength * ((item.data - minData) / (maxData - minData)) || radius;\r\n  }\r\n  for (let i = 0; i < series.length; i++) {\r\n    let item = series[i];\r\n    item._start_ = _start_;\r\n    _start_ += 2 * item._rose_proportion_ * Math.PI;\r\n  }\r\n  return series;\r\n}\r\n\r\nfunction getArcbarDataPoints(series, arcbarOption) {\r\n  var process = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\r\n  if (process == 1) {\r\n    process = 0.999999;\r\n  }\r\n  for (let i = 0; i < series.length; i++) {\r\n    let item = series[i];\r\n    item.data = item.data === null ? 0 : item.data;\r\n    let totalAngle;\r\n    if (arcbarOption.type == 'circle') {\r\n      totalAngle = 2;\r\n    } else {\r\n      if (arcbarOption.endAngle < arcbarOption.startAngle) {\r\n        totalAngle = 2 + arcbarOption.endAngle - arcbarOption.startAngle;\r\n      } else {\r\n        totalAngle = arcbarOption.startAngle - arcbarOption.endAngle;\r\n      }\r\n    }\r\n    item._proportion_ = totalAngle * item.data * process + arcbarOption.startAngle;\r\n    if (item._proportion_ >= 2) {\r\n      item._proportion_ = item._proportion_ % 2;\r\n    }\r\n  }\r\n  return series;\r\n}\r\n\r\nfunction getGaugeAxisPoints(categories, startAngle, endAngle) {\r\n  let totalAngle = startAngle - endAngle + 1;\r\n  let tempStartAngle = startAngle;\r\n  for (let i = 0; i < categories.length; i++) {\r\n    categories[i].value = categories[i].value === null ? 0 : categories[i].value;\r\n    categories[i]._startAngle_ = tempStartAngle;\r\n    categories[i]._endAngle_ = totalAngle * categories[i].value + startAngle;\r\n    if (categories[i]._endAngle_ >= 2) {\r\n      categories[i]._endAngle_ = categories[i]._endAngle_ % 2;\r\n    }\r\n    tempStartAngle = categories[i]._endAngle_;\r\n  }\r\n  return categories;\r\n}\r\n\r\nfunction getGaugeDataPoints(series, categories, gaugeOption) {\r\n  let process = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\r\n  for (let i = 0; i < series.length; i++) {\r\n    let item = series[i];\r\n    item.data = item.data === null ? 0 : item.data;\r\n    if (gaugeOption.pointer.color == 'auto') {\r\n      for (let i = 0; i < categories.length; i++) {\r\n        if (item.data <= categories[i].value) {\r\n          item.color = categories[i].color;\r\n          break;\r\n        }\r\n      }\r\n    } else {\r\n      item.color = gaugeOption.pointer.color;\r\n    }\r\n    let totalAngle = gaugeOption.startAngle - gaugeOption.endAngle + 1;\r\n    item._endAngle_ = totalAngle * item.data + gaugeOption.startAngle;\r\n    item._oldAngle_ = gaugeOption.oldAngle;\r\n    if (gaugeOption.oldAngle < gaugeOption.endAngle) {\r\n      item._oldAngle_ += 2;\r\n    }\r\n    if (item.data >= gaugeOption.oldData) {\r\n      item._proportion_ = (item._endAngle_ - item._oldAngle_) * process + gaugeOption.oldAngle;\r\n    } else {\r\n      item._proportion_ = item._oldAngle_ - (item._oldAngle_ - item._endAngle_) * process;\r\n    }\r\n    if (item._proportion_ >= 2) {\r\n      item._proportion_ = item._proportion_ % 2;\r\n    }\r\n  }\r\n  return series;\r\n}\r\n\r\nfunction getPieTextMaxLength(series, config, context, opts) {\r\n  series = getPieDataPoints(series);\r\n  let maxLength = 0;\r\n  for (let i = 0; i < series.length; i++) {\r\n    let item = series[i];\r\n    let text = item.formatter ? item.formatter(+item._proportion_.toFixed(2)) : util.toFixed(item._proportion_ * 100) + '%';\r\n    maxLength = Math.max(maxLength, measureText(text, item.textSize * opts.pix || config.fontSize, context));\r\n  }\r\n  return maxLength;\r\n}\r\n\r\nfunction fixColumeData(points, eachSpacing, columnLen, index, config, opts) {\r\n  return points.map(function(item) {\r\n    if (item === null) {\r\n      return null;\r\n    }\r\n    var seriesGap = 0;\r\n    var categoryGap = 0;\r\n    if (opts.type == 'mix') {\r\n      seriesGap = opts.extra.mix.column.seriesGap * opts.pix || 0;\r\n      categoryGap = opts.extra.mix.column.categoryGap * opts.pix || 0;\r\n    } else {\r\n      seriesGap = opts.extra.column.seriesGap * opts.pix || 0;\r\n      categoryGap = opts.extra.column.categoryGap * opts.pix || 0;\r\n    }\r\n    seriesGap =  Math.min(seriesGap, eachSpacing / columnLen)\r\n    categoryGap =  Math.min(categoryGap, eachSpacing / columnLen)\r\n    item.width = Math.ceil((eachSpacing - 2 * categoryGap - seriesGap * (columnLen - 1)) / columnLen);\r\n    if (opts.extra.mix && opts.extra.mix.column.width && +opts.extra.mix.column.width > 0) {\r\n      item.width = Math.min(item.width, +opts.extra.mix.column.width * opts.pix);\r\n    }\r\n    if (opts.extra.column && opts.extra.column.width && +opts.extra.column.width > 0) {\r\n      item.width = Math.min(item.width, +opts.extra.column.width * opts.pix);\r\n    }\r\n    if (item.width <= 0) {\r\n      item.width = 1;\r\n    }\r\n    item.x += (index + 0.5 - columnLen / 2) * (item.width + seriesGap);\r\n    return item;\r\n  });\r\n}\r\n\r\nfunction fixBarData(points, eachSpacing, columnLen, index, config, opts) {\r\n  return points.map(function(item) {\r\n    if (item === null) {\r\n      return null;\r\n    }\r\n    var seriesGap = 0;\r\n    var categoryGap = 0;\r\n    seriesGap = opts.extra.bar.seriesGap * opts.pix || 0;\r\n    categoryGap = opts.extra.bar.categoryGap * opts.pix || 0;\r\n    seriesGap =  Math.min(seriesGap, eachSpacing / columnLen)\r\n    categoryGap =  Math.min(categoryGap, eachSpacing / columnLen)\r\n    item.width = Math.ceil((eachSpacing - 2 * categoryGap - seriesGap * (columnLen - 1)) / columnLen);\r\n    if (opts.extra.bar && opts.extra.bar.width && +opts.extra.bar.width > 0) {\r\n      item.width = Math.min(item.width, +opts.extra.bar.width * opts.pix);\r\n    }\r\n    if (item.width <= 0) {\r\n      item.width = 1;\r\n    }\r\n    item.y += (index + 0.5 - columnLen / 2) * (item.width + seriesGap);\r\n    return item;\r\n  });\r\n}\r\n\r\nfunction fixColumeMeterData(points, eachSpacing, columnLen, index, config, opts, border) {\r\n  var categoryGap = opts.extra.column.categoryGap * opts.pix || 0;\r\n  return points.map(function(item) {\r\n    if (item === null) {\r\n      return null;\r\n    }\r\n    item.width = Math.ceil(eachSpacing - 2 * categoryGap);\r\n    if (opts.extra.column && opts.extra.column.width && +opts.extra.column.width > 0) {\r\n      item.width = Math.min(item.width, +opts.extra.column.width * opts.pix);\r\n    }\r\n    if (index > 0) {\r\n      item.width -= 2 * border;\r\n    }\r\n    return item;\r\n  });\r\n}\r\n\r\nfunction fixColumeStackData(points, eachSpacing, columnLen, index, config, opts, series) {\r\n  var categoryGap = opts.extra.column.categoryGap * opts.pix || 0;\r\n  return points.map(function(item, indexn) {\r\n    if (item === null) {\r\n      return null;\r\n    }\r\n    item.width = Math.ceil(eachSpacing - 2 * categoryGap);\r\n    if (opts.extra.column && opts.extra.column.width && +opts.extra.column.width > 0) {\r\n      item.width = Math.min(item.width, +opts.extra.column.width * opts.pix);\r\n    }\r\n    if (item.width <= 0) {\r\n      item.width = 1;\r\n    }\r\n    return item;\r\n  });\r\n}\r\n\r\nfunction fixBarStackData(points, eachSpacing, columnLen, index, config, opts, series) {\r\n  var categoryGap = opts.extra.bar.categoryGap * opts.pix || 0;\r\n  return points.map(function(item, indexn) {\r\n    if (item === null) {\r\n      return null;\r\n    }\r\n    item.width = Math.ceil(eachSpacing - 2 * categoryGap);\r\n    if (opts.extra.bar && opts.extra.bar.width && +opts.extra.bar.width > 0) {\r\n      item.width = Math.min(item.width, +opts.extra.bar.width * opts.pix);\r\n    }\r\n    if (item.width <= 0) {\r\n      item.width = 1;\r\n    }\r\n    return item;\r\n  });\r\n}\r\n\r\nfunction getXAxisPoints(categories, opts, config) {\r\n  var spacingValid = opts.width - opts.area[1] - opts.area[3];\r\n  var dataCount = opts.enableScroll ? Math.min(opts.xAxis.itemCount, categories.length) : categories.length;\r\n  if ((opts.type == 'line' || opts.type == 'area' || opts.type == 'scatter' || opts.type == 'bubble' || opts.type == 'bar') && dataCount > 1 && opts.xAxis.boundaryGap == 'justify') {\r\n    dataCount -= 1;\r\n  }\r\n  var eachSpacing = spacingValid / dataCount;\r\n  var xAxisPoints = [];\r\n  var startX = opts.area[3];\r\n  var endX = opts.width - opts.area[1];\r\n  categories.forEach(function(item, index) {\r\n    xAxisPoints.push(startX + index * eachSpacing);\r\n  });\r\n  if (opts.xAxis.boundaryGap !== 'justify') {\r\n    if (opts.enableScroll === true) {\r\n      xAxisPoints.push(startX + categories.length * eachSpacing);\r\n    } else {\r\n      xAxisPoints.push(endX);\r\n    }\r\n  }\r\n  return {\r\n    xAxisPoints: xAxisPoints,\r\n    startX: startX,\r\n    endX: endX,\r\n    eachSpacing: eachSpacing\r\n  };\r\n}\r\n\r\nfunction getCandleDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config) {\r\n  var process = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 1;\r\n  var points = [];\r\n  var validHeight = opts.height - opts.area[0] - opts.area[2];\r\n  data.forEach(function(item, index) {\r\n    if (item === null) {\r\n      points.push(null);\r\n    } else {\r\n      var cPoints = [];\r\n      item.forEach(function(items, indexs) {\r\n        var point = {};\r\n        point.x = xAxisPoints[index] + Math.round(eachSpacing / 2);\r\n        var value = items.value || items;\r\n        var height = validHeight * (value - minRange) / (maxRange - minRange);\r\n        height *= process;\r\n        point.y = opts.height - Math.round(height) - opts.area[2];\r\n        cPoints.push(point);\r\n      });\r\n      points.push(cPoints);\r\n    }\r\n  });\r\n  return points;\r\n}\r\n\r\nfunction getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config) {\r\n  var process = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 1;\r\n  var boundaryGap = 'center';\r\n  if (opts.type == 'line' || opts.type == 'area' || opts.type == 'scatter' || opts.type == 'bubble' ) {\r\n    boundaryGap = opts.xAxis.boundaryGap;\r\n  }\r\n  var points = [];\r\n  var validHeight = opts.height - opts.area[0] - opts.area[2];\r\n  var validWidth = opts.width - opts.area[1] - opts.area[3];\r\n  data.forEach(function(item, index) {\r\n    if (item === null) {\r\n      points.push(null);\r\n    } else {\r\n      var point = {};\r\n      point.color = item.color;\r\n      point.x = xAxisPoints[index];\r\n      var value = item;\r\n      if (typeof item === 'object' && item !== null) {\r\n        if (item.constructor.toString().indexOf('Array') > -1) {\r\n          let xranges, xminRange, xmaxRange;\r\n          xranges = [].concat(opts.chartData.xAxisData.ranges);\r\n          xminRange = xranges.shift();\r\n          xmaxRange = xranges.pop();\r\n          value = item[1];\r\n          point.x = opts.area[3] + validWidth * (item[0] - xminRange) / (xmaxRange - xminRange);\r\n          if(opts.type == 'bubble'){\r\n            point.r = item[2];\r\n            point.t = item[3];\r\n          }\r\n        } else {\r\n          value = item.value;\r\n        }\r\n      }\r\n      if (boundaryGap == 'center') {\r\n        point.x += eachSpacing / 2;\r\n      }\r\n      var height = validHeight * (value - minRange) / (maxRange - minRange);\r\n      height *= process;\r\n      point.y = opts.height - height - opts.area[2];\r\n      points.push(point);\r\n    }\r\n  });\r\n  return points;\r\n}\r\n\r\nfunction getBarDataPoints(data, minRange, maxRange, yAxisPoints, eachSpacing, opts, config) {\r\n  var process = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 1;\r\n  var points = [];\r\n  var validHeight = opts.height - opts.area[0] - opts.area[2];\r\n  var validWidth = opts.width - opts.area[1] - opts.area[3];\r\n  data.forEach(function(item, index) {\r\n    if (item === null) {\r\n      points.push(null);\r\n    } else {\r\n      var point = {};\r\n      point.color = item.color;\r\n      point.y = yAxisPoints[index];\r\n      var value = item;\r\n      if (typeof item === 'object' && item !== null) {\r\n        value = item.value;\r\n      }\r\n      var height = validWidth * (value - minRange) / (maxRange - minRange);\r\n      height *= process;\r\n      point.height = height;\r\n      point.value = value;\r\n      point.x = height + opts.area[3];\r\n      points.push(point);\r\n    }\r\n  });\r\n  return points;\r\n}\r\n\r\nfunction getStackDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, seriesIndex, stackSeries) {\r\n  var process = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : 1;\r\n  var points = [];\r\n  var validHeight = opts.height - opts.area[0] - opts.area[2];\r\n  data.forEach(function(item, index) {\r\n    if (item === null) {\r\n      points.push(null);\r\n    } else {\r\n      var point = {};\r\n      point.color = item.color;\r\n      point.x = xAxisPoints[index] + Math.round(eachSpacing / 2);\r\n\r\n      if (seriesIndex > 0) {\r\n        var value = 0;\r\n        for (let i = 0; i <= seriesIndex; i++) {\r\n          value += stackSeries[i].data[index];\r\n        }\r\n        var value0 = value - item;\r\n        var height = validHeight * (value - minRange) / (maxRange - minRange);\r\n        var height0 = validHeight * (value0 - minRange) / (maxRange - minRange);\r\n      } else {\r\n        var value = item;\r\n        var height = validHeight * (value - minRange) / (maxRange - minRange);\r\n        var height0 = 0;\r\n      }\r\n      var heightc = height0;\r\n      height *= process;\r\n      heightc *= process;\r\n      point.y = opts.height - Math.round(height) - opts.area[2];\r\n      point.y0 = opts.height - Math.round(heightc) - opts.area[2];\r\n      points.push(point);\r\n    }\r\n  });\r\n  return points;\r\n}\r\n\r\nfunction getBarStackDataPoints(data, minRange, maxRange, yAxisPoints, eachSpacing, opts, config, seriesIndex, stackSeries) {\r\n  var process = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : 1;\r\n  var points = [];\r\n  var validHeight = opts.width - opts.area[1] - opts.area[3];\r\n  data.forEach(function(item, index) {\r\n    if (item === null) {\r\n      points.push(null);\r\n    } else {\r\n      var point = {};\r\n      point.color = item.color;\r\n      point.y = yAxisPoints[index];\r\n      if (seriesIndex > 0) {\r\n        var value = 0;\r\n        for (let i = 0; i <= seriesIndex; i++) {\r\n          value += stackSeries[i].data[index];\r\n        }\r\n        var value0 = value - item;\r\n        var height = validHeight * (value - minRange) / (maxRange - minRange);\r\n        var height0 = validHeight * (value0 - minRange) / (maxRange - minRange);\r\n      } else {\r\n        var value = item;\r\n        var height = validHeight * (value - minRange) / (maxRange - minRange);\r\n        var height0 = 0;\r\n      }\r\n      var heightc = height0;\r\n      height *= process;\r\n      heightc *= process;\r\n      point.height = height - heightc;\r\n      point.x = opts.area[3] + height;\r\n      point.x0 = opts.area[3] + heightc;\r\n      points.push(point);\r\n    }\r\n  });\r\n  return points;\r\n}\r\n\r\nfunction getYAxisTextList(series, opts, config, stack, yData) {\r\n  var index = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : -1;\r\n  var data;\r\n  if (stack == 'stack') {\r\n    data = dataCombineStack(series, opts.categories.length);\r\n  } else {\r\n    data = dataCombine(series);\r\n  }\r\n  var sorted = [];\r\n  // remove null from data\r\n  data = data.filter(function(item) {\r\n    //return item !== null;\r\n    if (typeof item === 'object' && item !== null) {\r\n      if (item.constructor.toString().indexOf('Array') > -1) {\r\n        return item !== null;\r\n      } else {\r\n        return item.value !== null;\r\n      }\r\n    } else {\r\n      return item !== null;\r\n    }\r\n  });\r\n  data.map(function(item) {\r\n    if (typeof item === 'object') {\r\n      if (item.constructor.toString().indexOf('Array') > -1) {\r\n        if (opts.type == 'candle') {\r\n          item.map(function(subitem) {\r\n            sorted.push(subitem);\r\n          })\r\n        } else {\r\n          sorted.push(item[1]);\r\n        }\r\n      } else {\r\n        sorted.push(item.value);\r\n      }\r\n    } else {\r\n      sorted.push(item);\r\n    }\r\n  })\r\n  var minData = yData.min || 0;\r\n  var maxData = yData.max || 0;\r\n  if (sorted.length > 0) {\r\n    minData = Math.min.apply(this, sorted);\r\n    maxData = Math.max.apply(this, sorted);\r\n  }\r\n  //为了兼容v1.9.0之前的项目\r\n  // if (index > -1) {\r\n  //   if (typeof opts.yAxis.data[index].min === 'number') {\r\n  //     minData = Math.min(opts.yAxis.data[index].min, minData);\r\n  //   }\r\n  //   if (typeof opts.yAxis.data[index].max === 'number') {\r\n  //     maxData = Math.max(opts.yAxis.data[index].max, maxData);\r\n  //   }\r\n  // } else {\r\n  //   if (typeof opts.yAxis.min === 'number') {\r\n  //     minData = Math.min(opts.yAxis.min, minData);\r\n  //   }\r\n  //   if (typeof opts.yAxis.max === 'number') {\r\n  //     maxData = Math.max(opts.yAxis.max, maxData);\r\n  //   }\r\n  // }\r\n  if (minData === maxData) {\r\n    var rangeSpan = maxData || 10;\r\n    maxData += rangeSpan;\r\n  }\r\n  var dataRange = getDataRange(minData, maxData);\r\n  var minRange = yData.min === undefined || yData.min === null ? dataRange.minRange : yData.min;\r\n  var maxRange = yData.max === undefined || yData.min === null ? dataRange.maxRange : yData.max;\r\n  var range = [];\r\n  var eachRange = (maxRange - minRange) / opts.yAxis.splitNumber;\r\n  for (var i = 0; i <= opts.yAxis.splitNumber; i++) {\r\n    range.push(minRange + eachRange * i);\r\n  }\r\n  return range.reverse();\r\n}\r\n\r\nfunction calYAxisData(series, opts, config, context) {\r\n  //堆叠图重算Y轴\r\n  var columnstyle = assign({}, {\r\n    type: \"\"\r\n  }, opts.extra.column);\r\n  //如果是多Y轴，重新计算\r\n  var YLength = opts.yAxis.data.length;\r\n  var newSeries = new Array(YLength);\r\n  if (YLength > 0) {\r\n    for (let i = 0; i < YLength; i++) {\r\n      newSeries[i] = [];\r\n      for (let j = 0; j < series.length; j++) {\r\n        if (series[j].index == i) {\r\n          newSeries[i].push(series[j]);\r\n        }\r\n      }\r\n    }\r\n    var rangesArr = new Array(YLength);\r\n    var rangesFormatArr = new Array(YLength);\r\n    var yAxisWidthArr = new Array(YLength);\r\n\r\n    for (let i = 0; i < YLength; i++) {\r\n      let yData = opts.yAxis.data[i];\r\n      //如果总开关不显示，强制每个Y轴为不显示\r\n      if (opts.yAxis.disabled == true) {\r\n        yData.disabled = true;\r\n      }\r\n      if(yData.type === 'categories'){\r\n        if(!yData.formatter){\r\n          yData.formatter = (val) => {return val + (yData.unit || '')};\r\n        }\r\n        yData.categories = yData.categories || opts.categories;\r\n        rangesArr[i] = yData.categories;\r\n      }else{\r\n        if(!yData.formatter){\r\n          yData.formatter = (val) => {return val.toFixed(yData.tofix) + (yData.unit || '')};\r\n        }\r\n        rangesArr[i] = getYAxisTextList(newSeries[i], opts, config, columnstyle.type, yData, i);\r\n      }\r\n      let yAxisFontSizes = yData.fontSize * opts.pix || config.fontSize;\r\n      yAxisWidthArr[i] = {\r\n        position: yData.position ? yData.position : 'left',\r\n        width: 0\r\n      };\r\n      rangesFormatArr[i] = rangesArr[i].map(function(items) {\r\n        items = yData.formatter(items);\r\n        yAxisWidthArr[i].width = Math.max(yAxisWidthArr[i].width, measureText(items, yAxisFontSizes, context) + 5);\r\n        return items;\r\n      });\r\n      let calibration = yData.calibration ? 4 * opts.pix : 0;\r\n      yAxisWidthArr[i].width += calibration + 3 * opts.pix;\r\n      if (yData.disabled === true) {\r\n        yAxisWidthArr[i].width = 0;\r\n      }\r\n    }\r\n  } else {\r\n    var rangesArr = new Array(1);\r\n    var rangesFormatArr = new Array(1);\r\n    var yAxisWidthArr = new Array(1);\r\n    if(opts.type === 'bar'){\r\n      rangesArr[0] = opts.categories;\r\n      if(!opts.yAxis.formatter){\r\n        opts.yAxis.formatter = (val) => {return val + (opts.yAxis.unit || '')}\r\n      }\r\n    }else{\r\n      if(!opts.yAxis.formatter){\r\n        opts.yAxis.formatter = (val) => {return val.toFixed(opts.yAxis.tofix ) + (opts.yAxis.unit || '')}\r\n      }\r\n      rangesArr[0] = getYAxisTextList(series, opts, config, columnstyle.type, {});\r\n    }\r\n    yAxisWidthArr[0] = {\r\n      position: 'left',\r\n      width: 0\r\n    };\r\n    var yAxisFontSize = opts.yAxis.fontSize * opts.pix || config.fontSize;\r\n    rangesFormatArr[0] = rangesArr[0].map(function(item) {\r\n      item = opts.yAxis.formatter(item);\r\n      yAxisWidthArr[0].width = Math.max(yAxisWidthArr[0].width, measureText(item, yAxisFontSize, context) + 5);\r\n      return item;\r\n    });\r\n    yAxisWidthArr[0].width += 3 * opts.pix;\r\n    if (opts.yAxis.disabled === true) {\r\n      yAxisWidthArr[0] = {\r\n        position: 'left',\r\n        width: 0\r\n      };\r\n      opts.yAxis.data[0] = {\r\n        disabled: true\r\n      };\r\n    } else {\r\n      opts.yAxis.data[0] = {\r\n        disabled: false,\r\n        position: 'left',\r\n        max: opts.yAxis.max,\r\n        min: opts.yAxis.min,\r\n        formatter: opts.yAxis.formatter\r\n      };\r\n      if(opts.type === 'bar'){\r\n        opts.yAxis.data[0].categories = opts.categories;\r\n        opts.yAxis.data[0].type = 'categories';\r\n      }\r\n    }\r\n  }\r\n  return {\r\n    rangesFormat: rangesFormatArr,\r\n    ranges: rangesArr,\r\n    yAxisWidth: yAxisWidthArr\r\n  };\r\n}\r\n\r\nfunction calTooltipYAxisData(point, series, opts, config, eachSpacing) {\r\n  let ranges = [].concat(opts.chartData.yAxisData.ranges);\r\n  let spacingValid = opts.height - opts.area[0] - opts.area[2];\r\n  let minAxis = opts.area[0];\r\n  let items = [];\r\n  for (let i = 0; i < ranges.length; i++) {\r\n    let maxVal = ranges[i].shift();\r\n    let minVal = ranges[i].pop();\r\n    let item = maxVal - (maxVal - minVal) * (point - minAxis) / spacingValid;\r\n    item = opts.yAxis.data[i].formatter ? opts.yAxis.data[i].formatter(item) : item.toFixed(0);\r\n    items.push(String(item))\r\n  }\r\n  return items;\r\n}\r\n\r\nfunction calMarkLineData(points, opts) {\r\n  let minRange, maxRange;\r\n  let spacingValid = opts.height - opts.area[0] - opts.area[2];\r\n  for (let i = 0; i < points.length; i++) {\r\n    points[i].yAxisIndex = points[i].yAxisIndex ? points[i].yAxisIndex : 0;\r\n    let range = [].concat(opts.chartData.yAxisData.ranges[points[i].yAxisIndex]);\r\n    minRange = range.pop();\r\n    maxRange = range.shift();\r\n    let height = spacingValid * (points[i].value - minRange) / (maxRange - minRange);\r\n    points[i].y = opts.height - Math.round(height) - opts.area[2];\r\n  }\r\n  return points;\r\n}\r\n\r\nfunction contextRotate(context, opts) {\r\n  if (opts.rotateLock !== true) {\r\n    context.translate(opts.height, 0);\r\n    context.rotate(90 * Math.PI / 180);\r\n  } else if (opts._rotate_ !== true) {\r\n    context.translate(opts.height, 0);\r\n    context.rotate(90 * Math.PI / 180);\r\n    opts._rotate_ = true;\r\n  }\r\n}\r\n\r\nfunction drawPointShape(points, color, shape, context, opts) {\r\n  context.beginPath();\r\n  if (opts.dataPointShapeType == 'hollow') {\r\n    context.setStrokeStyle(color);\r\n    context.setFillStyle(opts.background);\r\n    context.setLineWidth(2 * opts.pix);\r\n  } else {\r\n    context.setStrokeStyle(\"#ffffff\");\r\n    context.setFillStyle(color);\r\n    context.setLineWidth(1 * opts.pix);\r\n  }\r\n  if (shape === 'diamond') {\r\n    points.forEach(function(item, index) {\r\n      if (item !== null) {\r\n        context.moveTo(item.x, item.y - 4.5);\r\n        context.lineTo(item.x - 4.5, item.y);\r\n        context.lineTo(item.x, item.y + 4.5);\r\n        context.lineTo(item.x + 4.5, item.y);\r\n        context.lineTo(item.x, item.y - 4.5);\r\n      }\r\n    });\r\n  } else if (shape === 'circle') {\r\n    points.forEach(function(item, index) {\r\n      if (item !== null) {\r\n        context.moveTo(item.x + 2.5 * opts.pix, item.y);\r\n        context.arc(item.x, item.y, 3 * opts.pix, 0, 2 * Math.PI, false);\r\n      }\r\n    });\r\n  } else if (shape === 'square') {\r\n    points.forEach(function(item, index) {\r\n      if (item !== null) {\r\n        context.moveTo(item.x - 3.5, item.y - 3.5);\r\n        context.rect(item.x - 3.5, item.y - 3.5, 7, 7);\r\n      }\r\n    });\r\n  } else if (shape === 'triangle') {\r\n    points.forEach(function(item, index) {\r\n      if (item !== null) {\r\n        context.moveTo(item.x, item.y - 4.5);\r\n        context.lineTo(item.x - 4.5, item.y + 4.5);\r\n        context.lineTo(item.x + 4.5, item.y + 4.5);\r\n        context.lineTo(item.x, item.y - 4.5);\r\n      }\r\n    });\r\n  } else if (shape === 'triangle') {\r\n    return;\r\n  }\r\n  context.closePath();\r\n  context.fill();\r\n  context.stroke();\r\n}\r\n\r\nfunction drawRingTitle(opts, config, context, center) {\r\n  var titlefontSize = opts.title.fontSize || config.titleFontSize;\r\n  var subtitlefontSize = opts.subtitle.fontSize || config.subtitleFontSize;\r\n  var title = opts.title.name || '';\r\n  var subtitle = opts.subtitle.name || '';\r\n  var titleFontColor = opts.title.color || opts.fontColor;\r\n  var subtitleFontColor = opts.subtitle.color || opts.fontColor;\r\n  var titleHeight = title ? titlefontSize : 0;\r\n  var subtitleHeight = subtitle ? subtitlefontSize : 0;\r\n  var margin = 5;\r\n  if (subtitle) {\r\n    var textWidth = measureText(subtitle, subtitlefontSize * opts.pix, context);\r\n    var startX = center.x - textWidth / 2 + (opts.subtitle.offsetX|| 0) * opts.pix ;\r\n    var startY = center.y + subtitlefontSize * opts.pix / 2 + (opts.subtitle.offsetY || 0) * opts.pix;\r\n    if (title) {\r\n      startY += (titleHeight * opts.pix + margin) / 2;\r\n    }\r\n    context.beginPath();\r\n    context.setFontSize(subtitlefontSize * opts.pix);\r\n    context.setFillStyle(subtitleFontColor);\r\n    context.fillText(subtitle, startX, startY);\r\n    context.closePath();\r\n    context.stroke();\r\n  }\r\n  if (title) {\r\n    var _textWidth = measureText(title, titlefontSize * opts.pix, context);\r\n    var _startX = center.x - _textWidth / 2 + (opts.title.offsetX || 0);\r\n    var _startY = center.y + titlefontSize * opts.pix / 2 + (opts.title.offsetY || 0) * opts.pix;\r\n    if (subtitle) {\r\n      _startY -= (subtitleHeight * opts.pix + margin) / 2;\r\n    }\r\n    context.beginPath();\r\n    context.setFontSize(titlefontSize * opts.pix);\r\n    context.setFillStyle(titleFontColor);\r\n    context.fillText(title, _startX, _startY);\r\n    context.closePath();\r\n    context.stroke();\r\n  }\r\n}\r\n\r\nfunction drawPointText(points, series, config, context, opts) {\r\n  // 绘制数据文案\r\n  var data = series.data;\r\n  var textOffset = series.textOffset ? series.textOffset : 0;\r\n  points.forEach(function(item, index) {\r\n    if (item !== null) {\r\n      context.beginPath();\r\n      var fontSize = series.textSize ? series.textSize * opts.pix : config.fontSize;\r\n      context.setFontSize(fontSize);\r\n      context.setFillStyle(series.textColor || opts.fontColor);\r\n      var value = data[index]\r\n      if (typeof data[index] === 'object' && data[index] !== null) {\r\n        if (data[index].constructor.toString().indexOf('Array')>-1) {\r\n          value = data[index][1];\r\n        } else {\r\n          value = data[index].value\r\n        }\r\n      }\r\n      var formatVal = series.formatter ? series.formatter(value,index) : value;\r\n      context.setTextAlign('center');\r\n      context.fillText(String(formatVal), item.x, item.y - 4 + textOffset * opts.pix);\r\n      context.closePath();\r\n      context.stroke();\r\n      context.setTextAlign('left');\r\n    }\r\n  });\r\n}\r\n\r\nfunction drawBarPointText(points, series, config, context, opts) {\r\n  // 绘制数据文案\r\n  var data = series.data;\r\n  var textOffset = series.textOffset ? series.textOffset : 0;\r\n  points.forEach(function(item, index) {\r\n    if (item !== null) {\r\n      context.beginPath();\r\n      var fontSize = series.textSize ? series.textSize * opts.pix : config.fontSize;\r\n      context.setFontSize(fontSize);\r\n      context.setFillStyle(series.textColor || opts.fontColor);\r\n      var value = data[index]\r\n      if (typeof data[index] === 'object' && data[index] !== null) {\r\n        value = data[index].value ;\r\n      }\r\n      var formatVal = series.formatter ? series.formatter(value,index) : value;\r\n      context.setTextAlign('left');\r\n      context.fillText(String(formatVal), item.x + 4 * opts.pix , item.y + fontSize / 2 - 3 );\r\n      context.closePath();\r\n      context.stroke();\r\n    }\r\n  });\r\n}\r\n\r\nfunction drawGaugeLabel(gaugeOption, radius, centerPosition, opts, config, context) {\r\n  radius -= gaugeOption.width / 2 + gaugeOption.labelOffset * opts.pix;\r\n  let totalAngle = gaugeOption.startAngle - gaugeOption.endAngle + 1;\r\n  let splitAngle = totalAngle / gaugeOption.splitLine.splitNumber;\r\n  let totalNumber = gaugeOption.endNumber - gaugeOption.startNumber;\r\n  let splitNumber = totalNumber / gaugeOption.splitLine.splitNumber;\r\n  let nowAngle = gaugeOption.startAngle;\r\n  let nowNumber = gaugeOption.startNumber;\r\n  for (let i = 0; i < gaugeOption.splitLine.splitNumber + 1; i++) {\r\n    var pos = {\r\n      x: radius * Math.cos(nowAngle * Math.PI),\r\n      y: radius * Math.sin(nowAngle * Math.PI)\r\n    };\r\n    var labelText = gaugeOption.formatter ? gaugeOption.formatter(nowNumber) : nowNumber;\r\n    pos.x += centerPosition.x - measureText(labelText, config.fontSize, context) / 2;\r\n    pos.y += centerPosition.y;\r\n    var startX = pos.x;\r\n    var startY = pos.y;\r\n    context.beginPath();\r\n    context.setFontSize(config.fontSize);\r\n    context.setFillStyle(gaugeOption.labelColor || opts.fontColor);\r\n    context.fillText(labelText, startX, startY + config.fontSize / 2);\r\n    context.closePath();\r\n    context.stroke();\r\n    nowAngle += splitAngle;\r\n    if (nowAngle >= 2) {\r\n      nowAngle = nowAngle % 2;\r\n    }\r\n    nowNumber += splitNumber;\r\n  }\r\n\r\n}\r\n\r\nfunction drawRadarLabel(angleList, radius, centerPosition, opts, config, context) {\r\n  var radarOption = opts.extra.radar || {};\r\n  radius += config.radarLabelTextMargin * opts.pix;\r\n  angleList.forEach(function(angle, index) {\r\n    var pos = {\r\n      x: radius * Math.cos(angle),\r\n      y: radius * Math.sin(angle)\r\n    };\r\n    var posRelativeCanvas = convertCoordinateOrigin(pos.x, pos.y, centerPosition);\r\n    var startX = posRelativeCanvas.x;\r\n    var startY = posRelativeCanvas.y;\r\n    if (util.approximatelyEqual(pos.x, 0)) {\r\n      startX -= measureText(opts.categories[index] || '', config.fontSize, context) / 2;\r\n    } else if (pos.x < 0) {\r\n      startX -= measureText(opts.categories[index] || '', config.fontSize, context);\r\n    }\r\n    context.beginPath();\r\n    context.setFontSize(config.fontSize);\r\n    context.setFillStyle(radarOption.labelColor || opts.fontColor);\r\n    context.fillText(opts.categories[index] || '', startX, startY + config.fontSize / 2);\r\n    context.closePath();\r\n    context.stroke();\r\n  });\r\n\r\n}\r\n\r\nfunction drawPieText(series, opts, config, context, radius, center) {\r\n  var lineRadius = config.pieChartLinePadding;\r\n  var textObjectCollection = [];\r\n  var lastTextObject = null;\r\n  var seriesConvert = series.map(function(item,index,series) {\r\n    var text = item.formatter ? item.formatter(item,index,series) : util.toFixed(item._proportion_.toFixed(4) * 100) + '%';\r\n    var arc = 2 * Math.PI - (item._start_ + 2 * Math.PI * item._proportion_ / 2);\r\n    if (item._rose_proportion_) {\r\n      arc = 2 * Math.PI - (item._start_ + 2 * Math.PI * item._rose_proportion_ / 2);\r\n    }\r\n    var color = item.color;\r\n    var radius = item._radius_;\r\n    return {\r\n      arc: arc,\r\n      text: text,\r\n      color: color,\r\n      radius: radius,\r\n      textColor: item.textColor,\r\n      textSize: item.textSize,\r\n    };\r\n  });\r\n  for (let i = 0; i < seriesConvert.length; i++) {\r\n    let item = seriesConvert[i];\r\n    // line end\r\n    let orginX1 = Math.cos(item.arc) * (item.radius + lineRadius);\r\n    let orginY1 = Math.sin(item.arc) * (item.radius + lineRadius);\r\n    // line start\r\n    let orginX2 = Math.cos(item.arc) * item.radius;\r\n    let orginY2 = Math.sin(item.arc) * item.radius;\r\n    // text start\r\n    let orginX3 = orginX1 >= 0 ? orginX1 + config.pieChartTextPadding : orginX1 - config.pieChartTextPadding;\r\n    let orginY3 = orginY1;\r\n    let textWidth = measureText(item.text, item.textSize * opts.pix || config.fontSize, context);\r\n    let startY = orginY3;\r\n    if (lastTextObject && util.isSameXCoordinateArea(lastTextObject.start, {\r\n        x: orginX3\r\n      })) {\r\n      if (orginX3 > 0) {\r\n        startY = Math.min(orginY3, lastTextObject.start.y);\r\n      } else if (orginX1 < 0) {\r\n        startY = Math.max(orginY3, lastTextObject.start.y);\r\n      } else {\r\n        if (orginY3 > 0) {\r\n          startY = Math.max(orginY3, lastTextObject.start.y);\r\n        } else {\r\n          startY = Math.min(orginY3, lastTextObject.start.y);\r\n        }\r\n      }\r\n    }\r\n    if (orginX3 < 0) {\r\n      orginX3 -= textWidth;\r\n    }\r\n    let textObject = {\r\n      lineStart: {\r\n        x: orginX2,\r\n        y: orginY2\r\n      },\r\n      lineEnd: {\r\n        x: orginX1,\r\n        y: orginY1\r\n      },\r\n      start: {\r\n        x: orginX3,\r\n        y: startY\r\n      },\r\n      width: textWidth,\r\n      height: config.fontSize,\r\n      text: item.text,\r\n      color: item.color,\r\n      textColor: item.textColor,\r\n      textSize: item.textSize\r\n    };\r\n    lastTextObject = avoidCollision(textObject, lastTextObject);\r\n    textObjectCollection.push(lastTextObject);\r\n  }\r\n  for (let i = 0; i < textObjectCollection.length; i++) {\r\n    let item = textObjectCollection[i];\r\n    let lineStartPoistion = convertCoordinateOrigin(item.lineStart.x, item.lineStart.y, center);\r\n    let lineEndPoistion = convertCoordinateOrigin(item.lineEnd.x, item.lineEnd.y, center);\r\n    let textPosition = convertCoordinateOrigin(item.start.x, item.start.y, center);\r\n    context.setLineWidth(1 * opts.pix);\r\n    context.setFontSize(item.textSize * opts.pix || config.fontSize);\r\n    context.beginPath();\r\n    context.setStrokeStyle(item.color);\r\n    context.setFillStyle(item.color);\r\n    context.moveTo(lineStartPoistion.x, lineStartPoistion.y);\r\n    let curveStartX = item.start.x < 0 ? textPosition.x + item.width : textPosition.x;\r\n    let textStartX = item.start.x < 0 ? textPosition.x - 5 : textPosition.x + 5;\r\n    context.quadraticCurveTo(lineEndPoistion.x, lineEndPoistion.y, curveStartX, textPosition.y);\r\n    context.moveTo(lineStartPoistion.x, lineStartPoistion.y);\r\n    context.stroke();\r\n    context.closePath();\r\n    context.beginPath();\r\n    context.moveTo(textPosition.x + item.width, textPosition.y);\r\n    context.arc(curveStartX, textPosition.y, 2, 0, 2 * Math.PI);\r\n    context.closePath();\r\n    context.fill();\r\n    context.beginPath();\r\n    context.setFontSize(item.textSize * opts.pix || config.fontSize);\r\n    context.setFillStyle(item.textColor || opts.fontColor);\r\n    context.fillText(item.text, textStartX, textPosition.y + 3);\r\n    context.closePath();\r\n    context.stroke();\r\n    context.closePath();\r\n  }\r\n}\r\n\r\nfunction drawToolTipSplitLine(offsetX, opts, config, context) {\r\n  var toolTipOption = opts.extra.tooltip || {};\r\n  toolTipOption.gridType = toolTipOption.gridType == undefined ? 'solid' : toolTipOption.gridType;\r\n  toolTipOption.dashLength = toolTipOption.dashLength == undefined ? 4 : toolTipOption.dashLength;\r\n  var startY = opts.area[0];\r\n  var endY = opts.height - opts.area[2];\r\n  if (toolTipOption.gridType == 'dash') {\r\n    context.setLineDash([toolTipOption.dashLength, toolTipOption.dashLength]);\r\n  }\r\n  context.setStrokeStyle(toolTipOption.gridColor || '#cccccc');\r\n  context.setLineWidth(1 * opts.pix);\r\n  context.beginPath();\r\n  context.moveTo(offsetX, startY);\r\n  context.lineTo(offsetX, endY);\r\n  context.stroke();\r\n  context.setLineDash([]);\r\n  if (toolTipOption.xAxisLabel) {\r\n    let labelText = opts.categories[opts.tooltip.index];\r\n    context.setFontSize(config.fontSize);\r\n    let textWidth = measureText(labelText, config.fontSize, context);\r\n    let textX = offsetX - 0.5 * textWidth;\r\n    let textY = endY;\r\n    context.beginPath();\r\n    context.setFillStyle(hexToRgb(toolTipOption.labelBgColor || config.toolTipBackground, toolTipOption.labelBgOpacity || config.toolTipOpacity));\r\n    context.setStrokeStyle(toolTipOption.labelBgColor || config.toolTipBackground);\r\n    context.setLineWidth(1 * opts.pix);\r\n    context.rect(textX - config.toolTipPadding, textY, textWidth + 2 * config.toolTipPadding, config.fontSize + 2 * config.toolTipPadding);\r\n    context.closePath();\r\n    context.stroke();\r\n    context.fill();\r\n    context.beginPath();\r\n    context.setFontSize(config.fontSize);\r\n    context.setFillStyle(toolTipOption.labelFontColor || opts.fontColor);\r\n    context.fillText(String(labelText), textX, textY + config.toolTipPadding + config.fontSize);\r\n    context.closePath();\r\n    context.stroke();\r\n  }\r\n}\r\n\r\nfunction drawMarkLine(opts, config, context) {\r\n  let markLineOption = assign({}, {\r\n    type: 'solid',\r\n    dashLength: 4,\r\n    data: []\r\n  }, opts.extra.markLine);\r\n  let startX = opts.area[3];\r\n  let endX = opts.width - opts.area[1];\r\n  let points = calMarkLineData(markLineOption.data, opts);\r\n  for (let i = 0; i < points.length; i++) {\r\n    let item = assign({}, {\r\n      lineColor: '#DE4A42',\r\n      showLabel: false,\r\n      labelFontColor: '#666666',\r\n      labelBgColor: '#DFE8FF',\r\n      labelBgOpacity: 0.8,\r\n      yAxisIndex: 0\r\n    }, points[i]);\r\n    if (markLineOption.type == 'dash') {\r\n      context.setLineDash([markLineOption.dashLength, markLineOption.dashLength]);\r\n    }\r\n    context.setStrokeStyle(item.lineColor);\r\n    context.setLineWidth(1 * opts.pix);\r\n    context.beginPath();\r\n    context.moveTo(startX, item.y);\r\n    context.lineTo(endX, item.y);\r\n    context.stroke();\r\n    context.setLineDash([]);\r\n    if (item.showLabel) {\r\n      let labelText = opts.yAxis.formatter ? opts.yAxis.formatter(item.value) : item.value;\r\n      context.setFontSize(config.fontSize);\r\n      let textWidth = measureText(labelText, config.fontSize, context);\r\n      let yAxisWidth = opts.chartData.yAxisData.yAxisWidth[0].width;\r\n      let bgStartX = opts.area[3] - textWidth - config.toolTipPadding * 2;\r\n      let bgEndX = opts.area[3];\r\n      let bgWidth = bgEndX - bgStartX;\r\n      let textX = bgEndX - config.toolTipPadding;\r\n      let textY = item.y;\r\n      context.setFillStyle(hexToRgb(item.labelBgColor, item.labelBgOpacity));\r\n      context.setStrokeStyle(item.labelBgColor);\r\n      context.setLineWidth(1 * opts.pix);\r\n      context.beginPath();\r\n      context.rect(bgStartX, textY - 0.5 * config.fontSize - config.toolTipPadding, bgWidth, config.fontSize + 2 * config.toolTipPadding);\r\n      context.closePath();\r\n      context.stroke();\r\n      context.fill();\r\n      context.setFontSize(config.fontSize);\r\n      context.setTextAlign('right');\r\n      context.setFillStyle(item.labelFontColor);\r\n      context.fillText(String(labelText), textX, textY + 0.5 * config.fontSize);\r\n      context.stroke();\r\n      context.setTextAlign('left');\r\n    }\r\n  }\r\n}\r\n\r\nfunction drawToolTipHorizentalLine(opts, config, context, eachSpacing, xAxisPoints) {\r\n  var toolTipOption = assign({}, {\r\n    gridType: 'solid',\r\n    dashLength: 4\r\n  }, opts.extra.tooltip);\r\n  var startX = opts.area[3];\r\n  var endX = opts.width - opts.area[1];\r\n  if (toolTipOption.gridType == 'dash') {\r\n    context.setLineDash([toolTipOption.dashLength, toolTipOption.dashLength]);\r\n  }\r\n  context.setStrokeStyle(toolTipOption.gridColor || '#cccccc');\r\n  context.setLineWidth(1 * opts.pix);\r\n  context.beginPath();\r\n  context.moveTo(startX, opts.tooltip.offset.y);\r\n  context.lineTo(endX, opts.tooltip.offset.y);\r\n  context.stroke();\r\n  context.setLineDash([]);\r\n  if (toolTipOption.yAxisLabel) {\r\n    let labelText = calTooltipYAxisData(opts.tooltip.offset.y, opts.series, opts, config, eachSpacing);\r\n    let widthArr = opts.chartData.yAxisData.yAxisWidth;\r\n    let tStartLeft = opts.area[3];\r\n    let tStartRight = opts.width - opts.area[1];\r\n    for (let i = 0; i < labelText.length; i++) {\r\n      context.setFontSize(config.fontSize);\r\n      let textWidth = measureText(labelText[i], config.fontSize, context);\r\n      let bgStartX, bgEndX, bgWidth;\r\n      if (widthArr[i].position == 'left') {\r\n        bgStartX = tStartLeft - widthArr[i].width;\r\n        bgEndX = Math.max(bgStartX, bgStartX + textWidth + config.toolTipPadding * 2);\r\n      } else {\r\n        bgStartX = tStartRight;\r\n        bgEndX = Math.max(bgStartX + widthArr[i].width, bgStartX + textWidth + config.toolTipPadding * 2);\r\n      }\r\n      bgWidth = bgEndX - bgStartX;\r\n      let textX = bgStartX + (bgWidth - textWidth) / 2;\r\n      let textY = opts.tooltip.offset.y;\r\n      context.beginPath();\r\n      context.setFillStyle(hexToRgb(toolTipOption.labelBgColor || config.toolTipBackground, toolTipOption.labelBgOpacity || config.toolTipOpacity));\r\n      context.setStrokeStyle(toolTipOption.labelBgColor || config.toolTipBackground);\r\n      context.setLineWidth(1 * opts.pix);\r\n      context.rect(bgStartX, textY - 0.5 * config.fontSize - config.toolTipPadding, bgWidth, config.fontSize + 2 *\r\n        config.toolTipPadding);\r\n      context.closePath();\r\n      context.stroke();\r\n      context.fill();\r\n      context.beginPath();\r\n      context.setFontSize(config.fontSize);\r\n      context.setFillStyle(toolTipOption.labelFontColor || opts.fontColor);\r\n      context.fillText(labelText[i], textX, textY + 0.5 * config.fontSize);\r\n      context.closePath();\r\n      context.stroke();\r\n      if (widthArr[i].position == 'left') {\r\n        tStartLeft -= (widthArr[i].width + opts.yAxis.padding * opts.pix);\r\n      } else {\r\n        tStartRight += widthArr[i].width + opts.yAxis.padding * opts.pix;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction drawToolTipSplitArea(offsetX, opts, config, context, eachSpacing) {\r\n  var toolTipOption = assign({}, {\r\n    activeBgColor: '#000000',\r\n    activeBgOpacity: 0.08\r\n  }, opts.extra.column);\r\n  var startY = opts.area[0];\r\n  var endY = opts.height - opts.area[2];\r\n  context.beginPath();\r\n  context.setFillStyle(hexToRgb(toolTipOption.activeBgColor, toolTipOption.activeBgOpacity));\r\n  context.rect(offsetX - eachSpacing / 2, startY, eachSpacing, endY - startY);\r\n  context.closePath();\r\n  context.fill();\r\n  context.setFillStyle(\"#FFFFFF\");\r\n}\r\n\r\nfunction drawBarToolTipSplitArea(offsetX, opts, config, context, eachSpacing) {\r\n  var toolTipOption = assign({}, {\r\n    activeBgColor: '#000000',\r\n    activeBgOpacity: 0.08\r\n  }, opts.extra.bar);\r\n  var startX = opts.area[3];\r\n  var endX = opts.width - opts.area[1];\r\n  context.beginPath();\r\n  context.setFillStyle(hexToRgb(toolTipOption.activeBgColor, toolTipOption.activeBgOpacity));\r\n  context.rect( startX ,offsetX - eachSpacing / 2 ,  endX - startX,eachSpacing);\r\n  context.closePath();\r\n  context.fill();\r\n  context.setFillStyle(\"#FFFFFF\");\r\n}\r\n\r\nfunction drawToolTip(textList, offset, opts, config, context, eachSpacing, xAxisPoints) {\r\n  var toolTipOption = assign({}, {\r\n    showBox: true,\r\n    showArrow: true,\r\n    showCategory: false,\r\n    bgColor: '#000000',\r\n    bgOpacity: 0.7,\r\n    borderColor: '#000000',\r\n    borderWidth: 0,\r\n    borderRadius: 0,\r\n    borderOpacity: 0.7,\r\n    fontColor: '#FFFFFF',\r\n    splitLine: true,\r\n  }, opts.extra.tooltip);\r\n  if(toolTipOption.showCategory==true && opts.categories){\r\n    textList.unshift({text:opts.categories[opts.tooltip.index],color:null})\r\n  }\r\n  var legendWidth = 4 * opts.pix;\r\n  var legendMarginRight = 5 * opts.pix;\r\n  var arrowWidth = toolTipOption.showArrow ? 8 * opts.pix : 0;\r\n  var isOverRightBorder = false;\r\n  if (opts.type == 'line' || opts.type == 'area' || opts.type == 'candle' || opts.type == 'mix') {\r\n    if (toolTipOption.splitLine == true) {\r\n      drawToolTipSplitLine(opts.tooltip.offset.x, opts, config, context);\r\n    }\r\n  }\r\n  offset = assign({\r\n    x: 0,\r\n    y: 0\r\n  }, offset);\r\n  offset.y -= 8 * opts.pix;\r\n  var textWidth = textList.map(function(item) {\r\n    return measureText(item.text, config.fontSize, context);\r\n  });\r\n  var toolTipWidth = legendWidth + legendMarginRight + 4 * config.toolTipPadding + Math.max.apply(null, textWidth);\r\n  var toolTipHeight = 2 * config.toolTipPadding + textList.length * config.toolTipLineHeight;\r\n  if (toolTipOption.showBox == false) {\r\n    return\r\n  }\r\n  // if beyond the right border\r\n  if (offset.x - Math.abs(opts._scrollDistance_ || 0) + arrowWidth + toolTipWidth > opts.width) {\r\n    isOverRightBorder = true;\r\n  }\r\n  if (toolTipHeight + offset.y > opts.height) {\r\n    offset.y = opts.height - toolTipHeight;\r\n  }\r\n  // draw background rect\r\n  context.beginPath();\r\n  context.setFillStyle(hexToRgb(toolTipOption.bgColor || config.toolTipBackground, toolTipOption.bgOpacity || config.toolTipOpacity));\r\n  context.setLineWidth(toolTipOption.borderWidth * opts.pix);\r\n  context.setStrokeStyle(hexToRgb(toolTipOption.borderColor, toolTipOption.borderOpacity));\r\n  var radius = toolTipOption.borderRadius;\r\n  if (isOverRightBorder) {\r\n    if (toolTipOption.showArrow) {\r\n      context.moveTo(offset.x, offset.y + 10 * opts.pix);\r\n      context.lineTo(offset.x - arrowWidth, offset.y + 10 * opts.pix + 5 * opts.pix);\r\n    }\r\n    context.arc(offset.x - arrowWidth - radius, offset.y + toolTipHeight - radius, radius, 0, Math.PI / 2, false);\r\n    context.arc(offset.x - arrowWidth - Math.round(toolTipWidth) + radius, offset.y + toolTipHeight - radius, radius,\r\n      Math.PI / 2, Math.PI, false);\r\n    context.arc(offset.x - arrowWidth - Math.round(toolTipWidth) + radius, offset.y + radius, radius, -Math.PI, -Math.PI / 2, false);\r\n    context.arc(offset.x - arrowWidth - radius, offset.y + radius, radius, -Math.PI / 2, 0, false);\r\n    if (toolTipOption.showArrow) {\r\n      context.lineTo(offset.x - arrowWidth, offset.y + 10 * opts.pix - 5 * opts.pix);\r\n      context.lineTo(offset.x, offset.y + 10 * opts.pix);\r\n    }\r\n  } else {\r\n    if (toolTipOption.showArrow) {\r\n      context.moveTo(offset.x, offset.y + 10 * opts.pix);\r\n      context.lineTo(offset.x + arrowWidth, offset.y + 10 * opts.pix - 5 * opts.pix);\r\n    }\r\n    context.arc(offset.x + arrowWidth + radius, offset.y + radius, radius, -Math.PI, -Math.PI / 2, false);\r\n    context.arc(offset.x + arrowWidth + Math.round(toolTipWidth) - radius, offset.y + radius, radius, -Math.PI / 2, 0,\r\n      false);\r\n    context.arc(offset.x + arrowWidth + Math.round(toolTipWidth) - radius, offset.y + toolTipHeight - radius, radius, 0,\r\n      Math.PI / 2, false);\r\n    context.arc(offset.x + arrowWidth + radius, offset.y + toolTipHeight - radius, radius, Math.PI / 2, Math.PI, false);\r\n    if (toolTipOption.showArrow) {\r\n      context.lineTo(offset.x + arrowWidth, offset.y + 10 * opts.pix + 5 * opts.pix);\r\n      context.lineTo(offset.x, offset.y + 10 * opts.pix);\r\n    }\r\n  }\r\n  context.closePath();\r\n  context.fill();\r\n  if (toolTipOption.borderWidth > 0) {\r\n    context.stroke();\r\n  }\r\n  // draw legend\r\n  textList.forEach(function(item, index) {\r\n    if (item.color !== null) {\r\n      context.beginPath();\r\n      context.setFillStyle(item.color);\r\n      var startX = offset.x + arrowWidth + 2 * config.toolTipPadding;\r\n      var startY = offset.y + (config.toolTipLineHeight - config.fontSize) / 2 + config.toolTipLineHeight * index + config.toolTipPadding + 1;\r\n      if (isOverRightBorder) {\r\n        startX = offset.x - toolTipWidth - arrowWidth + 2 * config.toolTipPadding;\r\n      }\r\n      context.fillRect(startX, startY, legendWidth, config.fontSize);\r\n      context.closePath();\r\n    }\r\n  });\r\n  // draw text list\r\n  textList.forEach(function(item, index) {\r\n    var startX = offset.x + arrowWidth + 2 * config.toolTipPadding + legendWidth + legendMarginRight;\r\n    if (isOverRightBorder) {\r\n      startX = offset.x - toolTipWidth - arrowWidth + 2 * config.toolTipPadding + +legendWidth + legendMarginRight;\r\n    }\r\n    var startY = offset.y + (config.toolTipLineHeight - config.fontSize) / 2 + config.toolTipLineHeight * index + config.toolTipPadding;\r\n    context.beginPath();\r\n    context.setFontSize(config.fontSize);\r\n    context.setFillStyle(toolTipOption.fontColor);\r\n    context.fillText(item.text, startX, startY + config.fontSize);\r\n    context.closePath();\r\n    context.stroke();\r\n  });\r\n}\r\n\r\nfunction drawColumnDataPoints(series, opts, config, context) {\r\n  let process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  let xAxisData = opts.chartData.xAxisData,\r\n    xAxisPoints = xAxisData.xAxisPoints,\r\n    eachSpacing = xAxisData.eachSpacing;\r\n  let columnOption = assign({}, {\r\n    type: 'group',\r\n    width: eachSpacing / 2,\r\n    meterBorder: 4,\r\n    meterFillColor: '#FFFFFF',\r\n    barBorderCircle: false,\r\n    barBorderRadius: [],\r\n    seriesGap: 2,\r\n    linearType: 'none',\r\n    linearOpacity: 1,\r\n    customColor: [],\r\n    colorStop: 0,\r\n  }, opts.extra.column);\r\n  let calPoints = [];\r\n  context.save();\r\n  let leftNum = -2;\r\n  let rightNum = xAxisPoints.length + 2;\r\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\r\n    context.translate(opts._scrollDistance_, 0);\r\n    leftNum = Math.floor(-opts._scrollDistance_ / eachSpacing) - 2;\r\n    rightNum = leftNum + opts.xAxis.itemCount + 4;\r\n  }\r\n  if (opts.tooltip && opts.tooltip.textList && opts.tooltip.textList.length && process === 1) {\r\n    drawToolTipSplitArea(opts.tooltip.offset.x, opts, config, context, eachSpacing);\r\n  }\r\n  columnOption.customColor = fillCustomColor(columnOption.linearType, columnOption.customColor, series, config);\r\n  series.forEach(function(eachSeries, seriesIndex) {\r\n    let ranges, minRange, maxRange;\r\n    ranges = [].concat(opts.chartData.yAxisData.ranges[eachSeries.index]);\r\n    minRange = ranges.pop();\r\n    maxRange = ranges.shift();\r\n    var data = eachSeries.data;\r\n    switch (columnOption.type) {\r\n      case 'group':\r\n        var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n        var tooltipPoints = getStackDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, seriesIndex, series, process);\r\n        calPoints.push(tooltipPoints);\r\n        points = fixColumeData(points, eachSpacing, series.length, seriesIndex, config, opts);\r\n        for (let i = 0; i < points.length; i++) {\r\n          let item = points[i];\r\n          //fix issues/I27B1N yyoinge & Joeshu\r\n          if (item !== null && i > leftNum && i < rightNum) {\r\n            var startX = item.x - item.width / 2;\r\n            var height = opts.height - item.y - opts.area[2];\r\n            context.beginPath();\r\n            var fillColor = item.color || eachSeries.color\r\n            var strokeColor = item.color || eachSeries.color\r\n            if (columnOption.linearType !== 'none') {\r\n              var grd = context.createLinearGradient(startX, item.y, startX, opts.height - opts.area[2]);\r\n              //透明渐变\r\n              if (columnOption.linearType == 'opacity') {\r\n                grd.addColorStop(0, hexToRgb(fillColor, columnOption.linearOpacity));\r\n                grd.addColorStop(1, hexToRgb(fillColor, 1));\r\n              } else {\r\n                grd.addColorStop(0, hexToRgb(columnOption.customColor[eachSeries.linearIndex], columnOption.linearOpacity));\r\n                grd.addColorStop(columnOption.colorStop, hexToRgb(columnOption.customColor[eachSeries.linearIndex],columnOption.linearOpacity));\r\n                grd.addColorStop(1, hexToRgb(fillColor, 1));\r\n              }\r\n              fillColor = grd\r\n            }\r\n            // 圆角边框\r\n            if ((columnOption.barBorderRadius && columnOption.barBorderRadius.length === 4) || columnOption.barBorderCircle === true) {\r\n              const left = startX;\r\n              const top = item.y;\r\n              const width = item.width;\r\n              const height = opts.height - opts.area[2] - item.y;\r\n              if (columnOption.barBorderCircle) {\r\n                columnOption.barBorderRadius = [width / 2, width / 2, 0, 0];\r\n              }\r\n              let [r0, r1, r2, r3] = columnOption.barBorderRadius;\r\n              let minRadius = Math.min(width/2,height/2);\r\n              r0 = r0 > minRadius ? minRadius : r0;\r\n              r1 = r1 > minRadius ? minRadius : r1;\r\n              r2 = r2 > minRadius ? minRadius : r2;\r\n              r3 = r3 > minRadius ? minRadius : r3;\r\n              r0 = r0 < 0 ? 0 : r0;\r\n              r1 = r1 < 0 ? 0 : r1;\r\n              r2 = r2 < 0 ? 0 : r2;\r\n              r3 = r3 < 0 ? 0 : r3;\r\n              context.arc(left + r0, top + r0, r0, -Math.PI, -Math.PI / 2);\r\n              context.arc(left + width - r1, top + r1, r1, -Math.PI / 2, 0);\r\n              context.arc(left + width - r2, top + height - r2, r2, 0, Math.PI / 2);\r\n              context.arc(left + r3, top + height - r3, r3, Math.PI / 2, Math.PI);\r\n            } else {\r\n              context.moveTo(startX, item.y);\r\n              context.lineTo(startX + item.width - 2, item.y);\r\n              context.lineTo(startX + item.width - 2, opts.height - opts.area[2]);\r\n              context.lineTo(startX, opts.height - opts.area[2]);\r\n              context.lineTo(startX, item.y);\r\n              context.setLineWidth(1)\r\n              context.setStrokeStyle(strokeColor);\r\n            }\r\n            context.setFillStyle(fillColor);\r\n            context.closePath();\r\n            //context.stroke();\r\n            context.fill();\r\n          }\r\n        };\r\n        break;\r\n      case 'stack':\r\n        // 绘制堆叠数据图\r\n        var points = getStackDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, seriesIndex, series, process);\r\n        calPoints.push(points);\r\n        points = fixColumeStackData(points, eachSpacing, series.length, seriesIndex, config, opts, series);\r\n        for (let i = 0; i < points.length; i++) {\r\n          let item = points[i];\r\n          if (item !== null && i > leftNum && i < rightNum) {\r\n            context.beginPath();\r\n            var fillColor = item.color || eachSeries.color;\r\n            var startX = item.x - item.width / 2 + 1;\r\n            var height = opts.height - item.y - opts.area[2];\r\n            var height0 = opts.height - item.y0 - opts.area[2];\r\n            if (seriesIndex > 0) {\r\n              height -= height0;\r\n            }\r\n            context.setFillStyle(fillColor);\r\n            context.moveTo(startX, item.y);\r\n            context.fillRect(startX, item.y, item.width - 2, height);\r\n            context.closePath();\r\n            context.fill();\r\n          }\r\n        };\r\n        break;\r\n      case 'meter':\r\n        // 绘制温度计数据图\r\n        var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n        calPoints.push(points);\r\n        points = fixColumeMeterData(points, eachSpacing, series.length, seriesIndex, config, opts, columnOption.meterBorder);\r\n        if (seriesIndex == 0) {\r\n          for (let i = 0; i < points.length; i++) {\r\n            let item = points[i];\r\n            if (item !== null && i > leftNum && i < rightNum) {\r\n              //画背景颜色\r\n              context.beginPath();\r\n              context.setFillStyle(columnOption.meterFillColor);\r\n              var startX = item.x - item.width / 2;\r\n              var height = opts.height - item.y - opts.area[2];\r\n              if (columnOption.barBorderCircle) {\r\n                var barBorderRadius = (item.width - columnOption.meterBorder*2) / 2;\r\n                if(barBorderRadius>height){\r\n                  barBorderRadius = height;\r\n                }\r\n                context.moveTo(startX + columnOption.meterBorder, opts.height - opts.area[2]);\r\n                context.lineTo(startX + columnOption.meterBorder, item.y + barBorderRadius);\r\n                context.arc(startX + item.width/2, item.y + barBorderRadius, barBorderRadius, -Math.PI, 0);\r\n                context.lineTo(startX + item.width - columnOption.meterBorder , opts.height - opts.area[2]);\r\n                context.lineTo(startX, opts.height - opts.area[2]);\r\n                context.fill();\r\n              }else{\r\n                context.moveTo(startX, item.y);\r\n                context.fillRect(startX, item.y, item.width, height);\r\n                context.closePath();\r\n                context.fill();\r\n              }\r\n              //画边框线\r\n              if (columnOption.meterBorder > 0) {\r\n                context.beginPath();\r\n                context.setStrokeStyle(eachSeries.color);\r\n                context.setLineWidth(columnOption.meterBorder * opts.pix);\r\n                if (columnOption.barBorderCircle) {\r\n                  var barBorderRadius = (item.width - columnOption.meterBorder)/ 2;\r\n                  if(barBorderRadius>height){\r\n                    barBorderRadius = height;\r\n                  }\r\n                  context.moveTo(startX  + columnOption.meterBorder * 0.5, opts.height - opts.area[2]);\r\n                  context.lineTo(startX + columnOption.meterBorder * 0.5, item.y + barBorderRadius);\r\n                  context.arc(startX + item.width/2, item.y + barBorderRadius - columnOption.meterBorder * 0.5, barBorderRadius, -Math.PI, 0);\r\n                  context.lineTo(startX + item.width - columnOption.meterBorder * 0.5, opts.height - opts.area[2]);\r\n                }else{\r\n                  context.moveTo(startX + columnOption.meterBorder * 0.5, item.y + height);\r\n                  context.lineTo(startX + columnOption.meterBorder * 0.5, item.y + columnOption.meterBorder * 0.5);\r\n                  context.lineTo(startX + item.width - columnOption.meterBorder * 0.5, item.y + columnOption.meterBorder * 0.5);\r\n                  context.lineTo(startX + item.width - columnOption.meterBorder * 0.5, item.y + height);\r\n                }\r\n                context.stroke();\r\n              }\r\n            }\r\n          };\r\n        } else {\r\n          for (let i = 0; i < points.length; i++) {\r\n            let item = points[i];\r\n            if (item !== null && i > leftNum && i < rightNum) {\r\n              context.beginPath();\r\n              context.setFillStyle(item.color || eachSeries.color);\r\n              var startX = item.x - item.width / 2;\r\n              var height = opts.height - item.y - opts.area[2];\r\n              if (columnOption.barBorderCircle) {\r\n                var barBorderRadius = item.width / 2;\r\n                if(barBorderRadius>height){\r\n                  barBorderRadius = height;\r\n                }\r\n                context.moveTo(startX, opts.height - opts.area[2]);\r\n                context.arc(startX + barBorderRadius, item.y + barBorderRadius, barBorderRadius, -Math.PI, -Math.PI / 2);\r\n                context.arc(startX + item.width - barBorderRadius, item.y + barBorderRadius, barBorderRadius, -Math.PI / 2, 0);\r\n                context.lineTo(startX + item.width, opts.height - opts.area[2]);\r\n                context.lineTo(startX, opts.height - opts.area[2]);\r\n                context.fill();\r\n              }else{\r\n                context.moveTo(startX, item.y);\r\n                context.fillRect(startX, item.y, item.width, height);\r\n                context.closePath();\r\n                context.fill();\r\n              }\r\n            }\r\n          };\r\n        }\r\n        break;\r\n    }\r\n  });\r\n\r\n  if (opts.dataLabel !== false && process === 1) {\r\n    series.forEach(function(eachSeries, seriesIndex) {\r\n      let ranges, minRange, maxRange;\r\n      ranges = [].concat(opts.chartData.yAxisData.ranges[eachSeries.index]);\r\n      minRange = ranges.pop();\r\n      maxRange = ranges.shift();\r\n      var data = eachSeries.data;\r\n      switch (columnOption.type) {\r\n        case 'group':\r\n          var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n          points = fixColumeData(points, eachSpacing, series.length, seriesIndex, config, opts);\r\n          drawPointText(points, eachSeries, config, context, opts);\r\n          break;\r\n        case 'stack':\r\n          var points = getStackDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, seriesIndex, series, process);\r\n          drawPointText(points, eachSeries, config, context, opts);\r\n          break;\r\n        case 'meter':\r\n          var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n          drawPointText(points, eachSeries, config, context, opts);\r\n          break;\r\n      }\r\n    });\r\n  }\r\n  context.restore();\r\n  return {\r\n    xAxisPoints: xAxisPoints,\r\n    calPoints: calPoints,\r\n    eachSpacing: eachSpacing\r\n  };\r\n}\r\n\r\nfunction drawBarDataPoints(series, opts, config, context) {\r\n  let process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  let yAxisPoints = [];\r\n  let eachSpacing = (opts.height - opts.area[0] - opts.area[2])/opts.categories.length;\r\n  for (let i = 0; i < opts.categories.length; i++) {\r\n    yAxisPoints.push(opts.area[0] + eachSpacing / 2 + eachSpacing * i);\r\n  }\r\n  let columnOption = assign({}, {\r\n    type: 'group',\r\n    width: eachSpacing / 2,\r\n    meterBorder: 4,\r\n    meterFillColor: '#FFFFFF',\r\n    barBorderCircle: false,\r\n    barBorderRadius: [],\r\n    seriesGap: 2,\r\n    linearType: 'none',\r\n    linearOpacity: 1,\r\n    customColor: [],\r\n    colorStop: 0,\r\n  }, opts.extra.bar);\r\n  let calPoints = [];\r\n  context.save();\r\n  let leftNum = -2;\r\n  let rightNum = yAxisPoints.length + 2;\r\n  if (opts.tooltip && opts.tooltip.textList && opts.tooltip.textList.length && process === 1) {\r\n    drawBarToolTipSplitArea(opts.tooltip.offset.y, opts, config, context, eachSpacing);\r\n  }\r\n  columnOption.customColor = fillCustomColor(columnOption.linearType, columnOption.customColor, series, config);\r\n  series.forEach(function(eachSeries, seriesIndex) {\r\n    let ranges, minRange, maxRange;\r\n    ranges = [].concat(opts.chartData.xAxisData.ranges);\r\n    maxRange = ranges.pop();\r\n    minRange = ranges.shift();\r\n    var data = eachSeries.data;\r\n    switch (columnOption.type) {\r\n      case 'group':\r\n        var points = getBarDataPoints(data, minRange, maxRange, yAxisPoints, eachSpacing, opts, config, process);\r\n        var tooltipPoints = getBarStackDataPoints(data, minRange, maxRange, yAxisPoints, eachSpacing, opts, config, seriesIndex, series, process);\r\n        calPoints.push(tooltipPoints);\r\n        points = fixBarData(points, eachSpacing, series.length, seriesIndex, config, opts);\r\n        for (let i = 0; i < points.length; i++) {\r\n          let item = points[i];\r\n          //fix issues/I27B1N yyoinge & Joeshu\r\n          if (item !== null && i > leftNum && i < rightNum) {\r\n            //var startX = item.x - item.width / 2;\r\n            var startX = opts.area[3];\r\n            var startY = item.y - item.width / 2;\r\n            var height = item.height;\r\n            context.beginPath();\r\n            var fillColor = item.color || eachSeries.color\r\n            var strokeColor = item.color || eachSeries.color\r\n            if (columnOption.linearType !== 'none') {\r\n              var grd = context.createLinearGradient(startX, item.y, item.x, item.y);\r\n              //透明渐变\r\n              if (columnOption.linearType == 'opacity') {\r\n                grd.addColorStop(0, hexToRgb(fillColor, columnOption.linearOpacity));\r\n                grd.addColorStop(1, hexToRgb(fillColor, 1));\r\n              } else {\r\n                grd.addColorStop(0, hexToRgb(columnOption.customColor[eachSeries.linearIndex], columnOption.linearOpacity));\r\n                grd.addColorStop(columnOption.colorStop, hexToRgb(columnOption.customColor[eachSeries.linearIndex],columnOption.linearOpacity));\r\n                grd.addColorStop(1, hexToRgb(fillColor, 1));\r\n              }\r\n              fillColor = grd\r\n            }\r\n            // 圆角边框\r\n            if ((columnOption.barBorderRadius && columnOption.barBorderRadius.length === 4) || columnOption.barBorderCircle === true) {\r\n              const left = startX;\r\n              const width = item.width;\r\n              const top = item.y - item.width / 2;\r\n              const height = item.heigh;\r\n              if (columnOption.barBorderCircle) {\r\n                columnOption.barBorderRadius = [width / 2, width / 2, 0, 0];\r\n              }\r\n              let [r0, r1, r2, r3] = columnOption.barBorderRadius;\r\n              let minRadius = Math.min(width/2,height/2);\r\n              r0 = r0 > minRadius ? minRadius : r0;\r\n              r1 = r1 > minRadius ? minRadius : r1;\r\n              r2 = r2 > minRadius ? minRadius : r2;\r\n              r3 = r3 > minRadius ? minRadius : r3;\r\n              r0 = r0 < 0 ? 0 : r0;\r\n              r1 = r1 < 0 ? 0 : r1;\r\n              r2 = r2 < 0 ? 0 : r2;\r\n              r3 = r3 < 0 ? 0 : r3;\r\n              \r\n              context.arc(left + r3, top + r3, r3, -Math.PI, -Math.PI / 2);\r\n              context.arc(item.x - r0, top + r0, r0, -Math.PI / 2, 0);\r\n              context.arc(item.x - r1, top + width - r1, r1, 0, Math.PI / 2);\r\n              context.arc(left + r2, top + width - r2, r2, Math.PI / 2, Math.PI);\r\n            } else {\r\n              context.moveTo(startX, startY);\r\n              context.lineTo(item.x, startY);\r\n              context.lineTo(item.x, startY + item.width - 2);\r\n              context.lineTo(startX, startY + item.width - 2);\r\n              context.lineTo(startX, startY);\r\n              context.setLineWidth(1)\r\n              context.setStrokeStyle(strokeColor);\r\n            }\r\n            context.setFillStyle(fillColor);\r\n            context.closePath();\r\n            //context.stroke();\r\n            context.fill();\r\n          }\r\n        };\r\n        break;\r\n      case 'stack':\r\n        // 绘制堆叠数据图\r\n        var points = getBarStackDataPoints(data, minRange, maxRange, yAxisPoints, eachSpacing, opts, config, seriesIndex, series, process);\r\n        calPoints.push(points);\r\n        points = fixBarStackData(points, eachSpacing, series.length, seriesIndex, config, opts, series);\r\n        for (let i = 0; i < points.length; i++) {\r\n          let item = points[i];\r\n          if (item !== null && i > leftNum && i < rightNum) {\r\n            context.beginPath();\r\n            var fillColor = item.color || eachSeries.color;\r\n            var startX = item.x0;\r\n            context.setFillStyle(fillColor);\r\n            context.moveTo(startX, item.y - item.width/2);\r\n            context.fillRect(startX, item.y - item.width/2, item.height , item.width - 2);\r\n            context.closePath();\r\n            context.fill();\r\n          }\r\n        };\r\n        break;\r\n    }\r\n  });\r\n\r\n  if (opts.dataLabel !== false && process === 1) {\r\n    series.forEach(function(eachSeries, seriesIndex) {\r\n      let ranges, minRange, maxRange;\r\n      ranges = [].concat(opts.chartData.xAxisData.ranges);\r\n      maxRange = ranges.pop();\r\n      minRange = ranges.shift();\r\n      var data = eachSeries.data;\r\n      switch (columnOption.type) {\r\n        case 'group':\r\n          var points = getBarDataPoints(data, minRange, maxRange, yAxisPoints, eachSpacing, opts, config, process);\r\n          points = fixBarData(points, eachSpacing, series.length, seriesIndex, config, opts);\r\n          drawBarPointText(points, eachSeries, config, context, opts);\r\n          break;\r\n        case 'stack':\r\n          var points = getBarStackDataPoints(data, minRange, maxRange, yAxisPoints, eachSpacing, opts, config, seriesIndex, series, process);\r\n          drawBarPointText(points, eachSeries, config, context, opts);\r\n          break;\r\n      }\r\n    });\r\n  }\r\n  return {\r\n    yAxisPoints: yAxisPoints,\r\n    calPoints: calPoints,\r\n    eachSpacing: eachSpacing\r\n  };\r\n}\r\n\r\nfunction drawCandleDataPoints(series, seriesMA, opts, config, context) {\r\n  var process = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1;\r\n  var candleOption = assign({}, {\r\n    color: {},\r\n    average: {}\r\n  }, opts.extra.candle);\r\n  candleOption.color = assign({}, {\r\n    upLine: '#f04864',\r\n    upFill: '#f04864',\r\n    downLine: '#2fc25b',\r\n    downFill: '#2fc25b'\r\n  }, candleOption.color);\r\n  candleOption.average = assign({}, {\r\n    show: false,\r\n    name: [],\r\n    day: [],\r\n    color: config.color\r\n  }, candleOption.average);\r\n  opts.extra.candle = candleOption;\r\n  let xAxisData = opts.chartData.xAxisData,\r\n    xAxisPoints = xAxisData.xAxisPoints,\r\n    eachSpacing = xAxisData.eachSpacing;\r\n  let calPoints = [];\r\n  context.save();\r\n  let leftNum = -2;\r\n  let rightNum = xAxisPoints.length + 2;\r\n  let leftSpace = 0;\r\n  let rightSpace = opts.width + eachSpacing;\r\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\r\n    context.translate(opts._scrollDistance_, 0);\r\n    leftNum = Math.floor(-opts._scrollDistance_ / eachSpacing) - 2;\r\n    rightNum = leftNum + opts.xAxis.itemCount + 4;\r\n    leftSpace = -opts._scrollDistance_ - eachSpacing * 2 + opts.area[3];\r\n    rightSpace = leftSpace + (opts.xAxis.itemCount + 4) * eachSpacing;\r\n  }\r\n  //画均线\r\n  if (candleOption.average.show || seriesMA) { //Merge pull request !12 from 邱贵翔\r\n    seriesMA.forEach(function(eachSeries, seriesIndex) {\r\n      let ranges, minRange, maxRange;\r\n      ranges = [].concat(opts.chartData.yAxisData.ranges[eachSeries.index]);\r\n      minRange = ranges.pop();\r\n      maxRange = ranges.shift();\r\n      var data = eachSeries.data;\r\n      var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n      var splitPointList = splitPoints(points,eachSeries);\r\n      for (let i = 0; i < splitPointList.length; i++) {\r\n        let points = splitPointList[i];\r\n        context.beginPath();\r\n        context.setStrokeStyle(eachSeries.color);\r\n        context.setLineWidth(1);\r\n        if (points.length === 1) {\r\n          context.moveTo(points[0].x, points[0].y);\r\n          context.arc(points[0].x, points[0].y, 1, 0, 2 * Math.PI);\r\n        } else {\r\n          context.moveTo(points[0].x, points[0].y);\r\n          let startPoint = 0;\r\n          for (let j = 0; j < points.length; j++) {\r\n            let item = points[j];\r\n            if (startPoint == 0 && item.x > leftSpace) {\r\n              context.moveTo(item.x, item.y);\r\n              startPoint = 1;\r\n            }\r\n            if (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n              var ctrlPoint = createCurveControlPoints(points, j - 1);\r\n              context.bezierCurveTo(ctrlPoint.ctrA.x, ctrlPoint.ctrA.y, ctrlPoint.ctrB.x, ctrlPoint.ctrB.y, item.x,\r\n                item.y);\r\n            }\r\n          }\r\n          context.moveTo(points[0].x, points[0].y);\r\n        }\r\n        context.closePath();\r\n        context.stroke();\r\n      }\r\n    });\r\n  }\r\n  //画K线\r\n  series.forEach(function(eachSeries, seriesIndex) {\r\n    let ranges, minRange, maxRange;\r\n    ranges = [].concat(opts.chartData.yAxisData.ranges[eachSeries.index]);\r\n    minRange = ranges.pop();\r\n    maxRange = ranges.shift();\r\n    var data = eachSeries.data;\r\n    var points = getCandleDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n    calPoints.push(points);\r\n    var splitPointList = splitPoints(points,eachSeries);\r\n    for (let i = 0; i < splitPointList[0].length; i++) {\r\n      if (i > leftNum && i < rightNum) {\r\n        let item = splitPointList[0][i];\r\n        context.beginPath();\r\n        //如果上涨\r\n        if (data[i][1] - data[i][0] > 0) {\r\n          context.setStrokeStyle(candleOption.color.upLine);\r\n          context.setFillStyle(candleOption.color.upFill);\r\n          context.setLineWidth(1 * opts.pix);\r\n          context.moveTo(item[3].x, item[3].y); //顶点\r\n          context.lineTo(item[1].x, item[1].y); //收盘中间点\r\n          context.lineTo(item[1].x - eachSpacing / 4, item[1].y); //收盘左侧点\r\n          context.lineTo(item[0].x - eachSpacing / 4, item[0].y); //开盘左侧点\r\n          context.lineTo(item[0].x, item[0].y); //开盘中间点\r\n          context.lineTo(item[2].x, item[2].y); //底点\r\n          context.lineTo(item[0].x, item[0].y); //开盘中间点\r\n          context.lineTo(item[0].x + eachSpacing / 4, item[0].y); //开盘右侧点\r\n          context.lineTo(item[1].x + eachSpacing / 4, item[1].y); //收盘右侧点\r\n          context.lineTo(item[1].x, item[1].y); //收盘中间点\r\n          context.moveTo(item[3].x, item[3].y); //顶点\r\n        } else {\r\n          context.setStrokeStyle(candleOption.color.downLine);\r\n          context.setFillStyle(candleOption.color.downFill);\r\n          context.setLineWidth(1 * opts.pix);\r\n          context.moveTo(item[3].x, item[3].y); //顶点\r\n          context.lineTo(item[0].x, item[0].y); //开盘中间点\r\n          context.lineTo(item[0].x - eachSpacing / 4, item[0].y); //开盘左侧点\r\n          context.lineTo(item[1].x - eachSpacing / 4, item[1].y); //收盘左侧点\r\n          context.lineTo(item[1].x, item[1].y); //收盘中间点\r\n          context.lineTo(item[2].x, item[2].y); //底点\r\n          context.lineTo(item[1].x, item[1].y); //收盘中间点\r\n          context.lineTo(item[1].x + eachSpacing / 4, item[1].y); //收盘右侧点\r\n          context.lineTo(item[0].x + eachSpacing / 4, item[0].y); //开盘右侧点\r\n          context.lineTo(item[0].x, item[0].y); //开盘中间点\r\n          context.moveTo(item[3].x, item[3].y); //顶点\r\n        }\r\n        context.closePath();\r\n        context.fill();\r\n        context.stroke();\r\n      }\r\n    }\r\n  });\r\n  context.restore();\r\n  return {\r\n    xAxisPoints: xAxisPoints,\r\n    calPoints: calPoints,\r\n    eachSpacing: eachSpacing\r\n  };\r\n}\r\n\r\nfunction drawAreaDataPoints(series, opts, config, context) {\r\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  var areaOption = assign({}, {\r\n    type: 'straight',\r\n    opacity: 0.2,\r\n    addLine: false,\r\n    width: 2,\r\n    gradient: false\r\n  }, opts.extra.area);\r\n  let xAxisData = opts.chartData.xAxisData,\r\n    xAxisPoints = xAxisData.xAxisPoints,\r\n    eachSpacing = xAxisData.eachSpacing;\r\n  let endY = opts.height - opts.area[2];\r\n  let calPoints = [];\r\n  context.save();\r\n  let leftSpace = 0;\r\n  let rightSpace = opts.width + eachSpacing;\r\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\r\n    context.translate(opts._scrollDistance_, 0);\r\n    leftSpace = -opts._scrollDistance_ - eachSpacing * 2 + opts.area[3];\r\n    rightSpace = leftSpace + (opts.xAxis.itemCount + 4) * eachSpacing;\r\n  }\r\n  series.forEach(function(eachSeries, seriesIndex) {\r\n    let ranges, minRange, maxRange;\r\n    ranges = [].concat(opts.chartData.yAxisData.ranges[eachSeries.index]);\r\n    minRange = ranges.pop();\r\n    maxRange = ranges.shift();\r\n    let data = eachSeries.data;\r\n    let points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n    calPoints.push(points);\r\n    let splitPointList = splitPoints(points,eachSeries);\r\n    for (let i = 0; i < splitPointList.length; i++) {\r\n      let points = splitPointList[i];\r\n      // 绘制区域数\r\n      context.beginPath();\r\n      context.setStrokeStyle(hexToRgb(eachSeries.color, areaOption.opacity));\r\n      if (areaOption.gradient) {\r\n        let gradient = context.createLinearGradient(0, opts.area[0], 0, opts.height - opts.area[2]);\r\n        gradient.addColorStop('0', hexToRgb(eachSeries.color, areaOption.opacity));\r\n        gradient.addColorStop('1.0', hexToRgb(\"#FFFFFF\", 0.1));\r\n        context.setFillStyle(gradient);\r\n      } else {\r\n        context.setFillStyle(hexToRgb(eachSeries.color, areaOption.opacity));\r\n      }\r\n      context.setLineWidth(areaOption.width * opts.pix);\r\n      if (points.length > 1) {\r\n        let firstPoint = points[0];\r\n        let lastPoint = points[points.length - 1];\r\n        context.moveTo(firstPoint.x, firstPoint.y);\r\n        let startPoint = 0;\r\n        if (areaOption.type === 'curve') {\r\n          for (let j = 0; j < points.length; j++) {\r\n            let item = points[j];\r\n            if (startPoint == 0 && item.x > leftSpace) {\r\n              context.moveTo(item.x, item.y);\r\n              startPoint = 1;\r\n            }\r\n            if (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n              let ctrlPoint = createCurveControlPoints(points, j - 1);\r\n              context.bezierCurveTo(ctrlPoint.ctrA.x, ctrlPoint.ctrA.y, ctrlPoint.ctrB.x, ctrlPoint.ctrB.y, item.x, item.y);\r\n            }\r\n          };\r\n        } \r\n        if (areaOption.type === 'straight') {\r\n          for (let j = 0; j < points.length; j++) {\r\n            let item = points[j];\r\n            if (startPoint == 0 && item.x > leftSpace) {\r\n              context.moveTo(item.x, item.y);\r\n              startPoint = 1;\r\n            }\r\n            if (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n              context.lineTo(item.x, item.y);\r\n            }\r\n          };\r\n        }\r\n        if (areaOption.type === 'step') {\r\n          for (let j = 0; j < points.length; j++) {\r\n            let item = points[j];\r\n            if (startPoint == 0 && item.x > leftSpace) {\r\n              context.moveTo(item.x, item.y);\r\n              startPoint = 1;\r\n            }\r\n            if (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n              context.lineTo(item.x, points[j - 1].y);\r\n              context.lineTo(item.x, item.y);\r\n            }\r\n          };\r\n        }\r\n        context.lineTo(lastPoint.x, endY);\r\n        context.lineTo(firstPoint.x, endY);\r\n        context.lineTo(firstPoint.x, firstPoint.y);\r\n      } else {\r\n        let item = points[0];\r\n        context.moveTo(item.x - eachSpacing / 2, item.y);\r\n        context.lineTo(item.x + eachSpacing / 2, item.y);\r\n        context.lineTo(item.x + eachSpacing / 2, endY);\r\n        context.lineTo(item.x - eachSpacing / 2, endY);\r\n        context.moveTo(item.x - eachSpacing / 2, item.y);\r\n      }\r\n      context.closePath();\r\n      context.fill();\r\n      //画连线\r\n      if (areaOption.addLine) {\r\n        if (eachSeries.lineType == 'dash') {\r\n          let dashLength = eachSeries.dashLength ? eachSeries.dashLength : 8;\r\n          dashLength *= opts.pix;\r\n          context.setLineDash([dashLength, dashLength]);\r\n        }\r\n        context.beginPath();\r\n        context.setStrokeStyle(eachSeries.color);\r\n        context.setLineWidth(areaOption.width * opts.pix);\r\n        if (points.length === 1) {\r\n          context.moveTo(points[0].x, points[0].y);\r\n          context.arc(points[0].x, points[0].y, 1, 0, 2 * Math.PI);\r\n        } else {\r\n          context.moveTo(points[0].x, points[0].y);\r\n          let startPoint = 0;\r\n          if (areaOption.type === 'curve') {\r\n            for (let j = 0; j < points.length; j++) {\r\n              let item = points[j];\r\n              if (startPoint == 0 && item.x > leftSpace) {\r\n                context.moveTo(item.x, item.y);\r\n                startPoint = 1;\r\n              }\r\n              if (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n                let ctrlPoint = createCurveControlPoints(points, j - 1);\r\n                context.bezierCurveTo(ctrlPoint.ctrA.x, ctrlPoint.ctrA.y, ctrlPoint.ctrB.x, ctrlPoint.ctrB.y, item.x, item.y);\r\n              }\r\n            };\r\n          }\r\n          if (areaOption.type === 'straight') {\r\n            for (let j = 0; j < points.length; j++) {\r\n              let item = points[j];\r\n              if (startPoint == 0 && item.x > leftSpace) {\r\n                context.moveTo(item.x, item.y);\r\n                startPoint = 1;\r\n              }\r\n              if (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n                context.lineTo(item.x, item.y);\r\n              }\r\n            };\r\n          }\r\n          if (areaOption.type === 'step') {\r\n            for (let j = 0; j < points.length; j++) {\r\n              let item = points[j];\r\n              if (startPoint == 0 && item.x > leftSpace) {\r\n                context.moveTo(item.x, item.y);\r\n                startPoint = 1;\r\n              }\r\n              if (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n                context.lineTo(item.x, points[j - 1].y);\r\n                context.lineTo(item.x, item.y);\r\n              }\r\n            };\r\n          }\r\n          context.moveTo(points[0].x, points[0].y);\r\n        }\r\n        context.stroke();\r\n        context.setLineDash([]);\r\n      }\r\n    }\r\n    //画点\r\n    if (opts.dataPointShape !== false) {\r\n      drawPointShape(points, eachSeries.color, eachSeries.pointShape, context, opts);\r\n    }\r\n  });\r\n\r\n  if (opts.dataLabel !== false && process === 1) {\r\n    series.forEach(function(eachSeries, seriesIndex) {\r\n      let ranges, minRange, maxRange;\r\n      ranges = [].concat(opts.chartData.yAxisData.ranges[eachSeries.index]);\r\n      minRange = ranges.pop();\r\n      maxRange = ranges.shift();\r\n      var data = eachSeries.data;\r\n      var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n      drawPointText(points, eachSeries, config, context, opts);\r\n    });\r\n  }\r\n  context.restore();\r\n  return {\r\n    xAxisPoints: xAxisPoints,\r\n    calPoints: calPoints,\r\n    eachSpacing: eachSpacing\r\n  };\r\n}\r\n\r\nfunction drawScatterDataPoints(series, opts, config, context) {\r\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  var scatterOption = assign({}, {\r\n    type: 'circle'\r\n  }, opts.extra.scatter);\r\n  let xAxisData = opts.chartData.xAxisData,\r\n    xAxisPoints = xAxisData.xAxisPoints,\r\n    eachSpacing = xAxisData.eachSpacing;\r\n  var calPoints = [];\r\n  context.save();\r\n  let leftSpace = 0;\r\n  let rightSpace = opts.width + eachSpacing;\r\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\r\n    context.translate(opts._scrollDistance_, 0);\r\n    leftSpace = -opts._scrollDistance_ - eachSpacing * 2 + opts.area[3];\r\n    rightSpace = leftSpace + (opts.xAxis.itemCount + 4) * eachSpacing;\r\n  }\r\n  series.forEach(function(eachSeries, seriesIndex) {\r\n    let ranges, minRange, maxRange;\r\n    ranges = [].concat(opts.chartData.yAxisData.ranges[eachSeries.index]);\r\n    minRange = ranges.pop();\r\n    maxRange = ranges.shift();\r\n    var data = eachSeries.data;\r\n    var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n    context.beginPath();\r\n    context.setStrokeStyle(eachSeries.color);\r\n    context.setFillStyle(eachSeries.color);\r\n    context.setLineWidth(1 * opts.pix);\r\n    var shape = eachSeries.pointShape;\r\n    if (shape === 'diamond') {\r\n      points.forEach(function(item, index) {\r\n        if (item !== null) {\r\n          context.moveTo(item.x, item.y - 4.5);\r\n          context.lineTo(item.x - 4.5, item.y);\r\n          context.lineTo(item.x, item.y + 4.5);\r\n          context.lineTo(item.x + 4.5, item.y);\r\n          context.lineTo(item.x, item.y - 4.5);\r\n        }\r\n      });\r\n    } else if (shape === 'circle') {\r\n      points.forEach(function(item, index) {\r\n        if (item !== null) {\r\n          context.moveTo(item.x + 2.5 * opts.pix, item.y);\r\n          context.arc(item.x, item.y, 3 * opts.pix, 0, 2 * Math.PI, false);\r\n        }\r\n      });\r\n    } else if (shape === 'square') {\r\n      points.forEach(function(item, index) {\r\n        if (item !== null) {\r\n          context.moveTo(item.x - 3.5, item.y - 3.5);\r\n          context.rect(item.x - 3.5, item.y - 3.5, 7, 7);\r\n        }\r\n      });\r\n    } else if (shape === 'triangle') {\r\n      points.forEach(function(item, index) {\r\n        if (item !== null) {\r\n          context.moveTo(item.x, item.y - 4.5);\r\n          context.lineTo(item.x - 4.5, item.y + 4.5);\r\n          context.lineTo(item.x + 4.5, item.y + 4.5);\r\n          context.lineTo(item.x, item.y - 4.5);\r\n        }\r\n      });\r\n    } else if (shape === 'triangle') {\r\n      return;\r\n    }\r\n    context.closePath();\r\n    context.fill();\r\n    context.stroke();\r\n  });\r\n  if (opts.dataLabel !== false && process === 1) {\r\n    series.forEach(function(eachSeries, seriesIndex) {\r\n      let ranges, minRange, maxRange;\r\n      ranges = [].concat(opts.chartData.yAxisData.ranges[eachSeries.index]);\r\n      minRange = ranges.pop();\r\n      maxRange = ranges.shift();\r\n      var data = eachSeries.data;\r\n      var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n      drawPointText(points, eachSeries, config, context, opts);\r\n    });\r\n  }\r\n  context.restore();\r\n  return {\r\n    xAxisPoints: xAxisPoints,\r\n    calPoints: calPoints,\r\n    eachSpacing: eachSpacing\r\n  };\r\n}\r\n\r\nfunction drawBubbleDataPoints(series, opts, config, context) {\r\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  var bubbleOption = assign({}, {\r\n    opacity: 1,\r\n    border:2\r\n  }, opts.extra.bubble);\r\n  let xAxisData = opts.chartData.xAxisData,\r\n    xAxisPoints = xAxisData.xAxisPoints,\r\n    eachSpacing = xAxisData.eachSpacing;\r\n  var calPoints = [];\r\n  context.save();\r\n  let leftSpace = 0;\r\n  let rightSpace = opts.width + eachSpacing;\r\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\r\n    context.translate(opts._scrollDistance_, 0);\r\n    leftSpace = -opts._scrollDistance_ - eachSpacing * 2 + opts.area[3];\r\n    rightSpace = leftSpace + (opts.xAxis.itemCount + 4) * eachSpacing;\r\n  }\r\n  series.forEach(function(eachSeries, seriesIndex) {\r\n    let ranges, minRange, maxRange;\r\n    ranges = [].concat(opts.chartData.yAxisData.ranges[eachSeries.index]);\r\n    minRange = ranges.pop();\r\n    maxRange = ranges.shift();\r\n    var data = eachSeries.data;\r\n    var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n    context.beginPath();\r\n    context.setStrokeStyle(eachSeries.color);\r\n    context.setLineWidth(bubbleOption.border * opts.pix);\r\n    context.setFillStyle(hexToRgb(eachSeries.color, bubbleOption.opacity));\r\n    points.forEach(function(item, index) {\r\n      context.moveTo(item.x + item.r, item.y);\r\n      context.arc(item.x, item.y, item.r * opts.pix, 0, 2 * Math.PI, false);\r\n    });\r\n    context.closePath();\r\n    context.fill();\r\n    context.stroke();\r\n    \r\n    if (opts.dataLabel !== false && process === 1) {\r\n      points.forEach(function(item, index) {\r\n        context.beginPath();\r\n        var fontSize = series.textSize * opts.pix || config.fontSize;\r\n        context.setFontSize(fontSize);\r\n        context.setFillStyle(series.textColor || \"#FFFFFF\");\r\n        context.setTextAlign('center');\r\n        context.fillText(String(item.t), item.x, item.y + fontSize/2);\r\n        context.closePath();\r\n        context.stroke();\r\n        context.setTextAlign('left');\r\n      });\r\n    }\r\n  });\r\n  context.restore();\r\n  return {\r\n    xAxisPoints: xAxisPoints,\r\n    calPoints: calPoints,\r\n    eachSpacing: eachSpacing\r\n  };\r\n}\r\n\r\n\r\nfunction drawLineDataPoints(series, opts, config, context) {\r\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  var lineOption = assign({}, {\r\n    type: 'straight',\r\n    width: 2\r\n  }, opts.extra.line);\r\n  lineOption.width *= opts.pix;\r\n  let xAxisData = opts.chartData.xAxisData,\r\n    xAxisPoints = xAxisData.xAxisPoints,\r\n    eachSpacing = xAxisData.eachSpacing;\r\n  var calPoints = [];\r\n  context.save();\r\n  let leftSpace = 0;\r\n  let rightSpace = opts.width + eachSpacing;\r\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\r\n    context.translate(opts._scrollDistance_, 0);\r\n    leftSpace = -opts._scrollDistance_ - eachSpacing * 2 + opts.area[3];\r\n    rightSpace = leftSpace + (opts.xAxis.itemCount + 4) * eachSpacing;\r\n  }\r\n  series.forEach(function(eachSeries, seriesIndex) {\r\n    let ranges, minRange, maxRange;\r\n    ranges = [].concat(opts.chartData.yAxisData.ranges[eachSeries.index]);\r\n    minRange = ranges.pop();\r\n    maxRange = ranges.shift();\r\n    var data = eachSeries.data;\r\n    var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n    calPoints.push(points);\r\n    var splitPointList = splitPoints(points,eachSeries);\r\n    if (eachSeries.lineType == 'dash') {\r\n      let dashLength = eachSeries.dashLength ? eachSeries.dashLength : 8;\r\n      dashLength *= opts.pix;\r\n      context.setLineDash([dashLength, dashLength]);\r\n    }\r\n    context.beginPath();\r\n    context.setStrokeStyle(eachSeries.color);\r\n    context.setLineWidth(lineOption.width);\r\n    splitPointList.forEach(function(points, index) {\r\n      if (points.length === 1) {\r\n        context.moveTo(points[0].x, points[0].y);\r\n        context.arc(points[0].x, points[0].y, 1, 0, 2 * Math.PI);\r\n      } else {\r\n        context.moveTo(points[0].x, points[0].y);\r\n        let startPoint = 0;\r\n        if (lineOption.type === 'curve') {\r\n          for (let j = 0; j < points.length; j++) {\r\n            let item = points[j];\r\n            if (startPoint == 0 && item.x > leftSpace) {\r\n              context.moveTo(item.x, item.y);\r\n              startPoint = 1;\r\n            }\r\n            if (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n              var ctrlPoint = createCurveControlPoints(points, j - 1);\r\n              context.bezierCurveTo(ctrlPoint.ctrA.x, ctrlPoint.ctrA.y, ctrlPoint.ctrB.x, ctrlPoint.ctrB.y, item.x, item.y);\r\n            }\r\n          };\r\n        }\r\n        if (lineOption.type === 'straight') {\r\n          for (let j = 0; j < points.length; j++) {\r\n            let item = points[j];\r\n            if (startPoint == 0 && item.x > leftSpace) {\r\n              context.moveTo(item.x, item.y);\r\n              startPoint = 1;\r\n            }\r\n            if (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n              context.lineTo(item.x, item.y);\r\n            }\r\n          };\r\n        }\r\n        if (lineOption.type === 'step') {\r\n          for (let j = 0; j < points.length; j++) {\r\n            let item = points[j];\r\n            if (startPoint == 0 && item.x > leftSpace) {\r\n              context.moveTo(item.x, item.y);\r\n              startPoint = 1;\r\n            }\r\n            if (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n              context.lineTo(item.x, points[j - 1].y);\r\n              context.lineTo(item.x, item.y);\r\n            }\r\n          };\r\n        }\r\n        context.moveTo(points[0].x, points[0].y);\r\n      }\r\n    });\r\n    context.stroke();\r\n    context.setLineDash([]);\r\n    if (opts.dataPointShape !== false) {\r\n      drawPointShape(points, eachSeries.color, eachSeries.pointShape, context, opts);\r\n    }\r\n  });\r\n  if (opts.dataLabel !== false && process === 1) {\r\n    series.forEach(function(eachSeries, seriesIndex) {\r\n      let ranges, minRange, maxRange;\r\n      ranges = [].concat(opts.chartData.yAxisData.ranges[eachSeries.index]);\r\n      minRange = ranges.pop();\r\n      maxRange = ranges.shift();\r\n      var data = eachSeries.data;\r\n      var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n      drawPointText(points, eachSeries, config, context, opts);\r\n    });\r\n  }\r\n  context.restore();\r\n  return {\r\n    xAxisPoints: xAxisPoints,\r\n    calPoints: calPoints,\r\n    eachSpacing: eachSpacing\r\n  };\r\n}\r\n\r\nfunction drawMixDataPoints(series, opts, config, context) {\r\n  let process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  let columnOption = assign({}, {\r\n    width: eachSpacing / 2,\r\n    barBorderCircle: false,\r\n    barBorderRadius: [],\r\n    seriesGap: 2,\r\n    linearType: 'none',\r\n    linearOpacity: 1,\r\n    customColor: [],\r\n    colorStop: 0,\r\n  }, opts.extra.mix.column);\r\n  let xAxisData = opts.chartData.xAxisData,\r\n    xAxisPoints = xAxisData.xAxisPoints,\r\n    eachSpacing = xAxisData.eachSpacing;\r\n  let endY = opts.height - opts.area[2];\r\n  let calPoints = [];\r\n  var columnIndex = 0;\r\n  var columnLength = 0;\r\n  series.forEach(function(eachSeries, seriesIndex) {\r\n    if (eachSeries.type == 'column') {\r\n      columnLength += 1;\r\n    }\r\n  });\r\n  context.save();\r\n  let leftNum = -2;\r\n  let rightNum = xAxisPoints.length + 2;\r\n  let leftSpace = 0;\r\n  let rightSpace = opts.width + eachSpacing;\r\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\r\n    context.translate(opts._scrollDistance_, 0);\r\n    leftNum = Math.floor(-opts._scrollDistance_ / eachSpacing) - 2;\r\n    rightNum = leftNum + opts.xAxis.itemCount + 4;\r\n    leftSpace = -opts._scrollDistance_ - eachSpacing * 2 + opts.area[3];\r\n    rightSpace = leftSpace + (opts.xAxis.itemCount + 4) * eachSpacing;\r\n  }\r\n  columnOption.customColor = fillCustomColor(columnOption.linearType, columnOption.customColor, series, config);\r\n  series.forEach(function(eachSeries, seriesIndex) {\r\n    let ranges, minRange, maxRange;\r\n    ranges = [].concat(opts.chartData.yAxisData.ranges[eachSeries.index]);\r\n    minRange = ranges.pop();\r\n    maxRange = ranges.shift();\r\n    var data = eachSeries.data;\r\n    var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n    calPoints.push(points);\r\n    // 绘制柱状数据图\r\n    if (eachSeries.type == 'column') {\r\n      points = fixColumeData(points, eachSpacing, columnLength, columnIndex, config, opts);\r\n      for (let i = 0; i < points.length; i++) {\r\n        let item = points[i];\r\n        if (item !== null && i > leftNum && i < rightNum) {\r\n          var startX = item.x - item.width / 2;\r\n          var height = opts.height - item.y - opts.area[2];\r\n          context.beginPath();\r\n          var fillColor = item.color || eachSeries.color\r\n          var strokeColor = item.color || eachSeries.color\r\n          if (columnOption.linearType !== 'none') {\r\n            var grd = context.createLinearGradient(startX, item.y, startX, opts.height - opts.area[2]);\r\n            //透明渐变\r\n            if (columnOption.linearType == 'opacity') {\r\n              grd.addColorStop(0, hexToRgb(fillColor, columnOption.linearOpacity));\r\n              grd.addColorStop(1, hexToRgb(fillColor, 1));\r\n            } else {\r\n              grd.addColorStop(0, hexToRgb(columnOption.customColor[eachSeries.linearIndex], columnOption.linearOpacity));\r\n              grd.addColorStop(columnOption.colorStop, hexToRgb(columnOption.customColor[eachSeries.linearIndex], columnOption.linearOpacity));\r\n              grd.addColorStop(1, hexToRgb(fillColor, 1));\r\n            }\r\n            fillColor = grd\r\n          }\r\n          // 圆角边框\r\n          if ((columnOption.barBorderRadius && columnOption.barBorderRadius.length === 4) || columnOption.barBorderCircle) {\r\n            const left = startX;\r\n            const top = item.y;\r\n            const width = item.width;\r\n            const height = opts.height - opts.area[2] - item.y;\r\n            if (columnOption.barBorderCircle) {\r\n              columnOption.barBorderRadius = [width / 2, width / 2, 0, 0];\r\n            }\r\n            let [r0, r1, r2, r3] = columnOption.barBorderRadius;\r\n            let minRadius = Math.min(width/2,height/2);\r\n            r0 = r0 > minRadius ? minRadius : r0;\r\n            r1 = r1 > minRadius ? minRadius : r1;\r\n            r2 = r2 > minRadius ? minRadius : r2;\r\n            r3 = r3 > minRadius ? minRadius : r3;\r\n            r0 = r0 < 0 ? 0 : r0;\r\n            r1 = r1 < 0 ? 0 : r1;\r\n            r2 = r2 < 0 ? 0 : r2;\r\n            r3 = r3 < 0 ? 0 : r3;\r\n            context.arc(left + r0, top + r0, r0, -Math.PI, -Math.PI / 2);\r\n            context.arc(left + width - r1, top + r1, r1, -Math.PI / 2, 0);\r\n            context.arc(left + width - r2, top + height - r2, r2, 0, Math.PI / 2);\r\n            context.arc(left + r3, top + height - r3, r3, Math.PI / 2, Math.PI);\r\n          } else {\r\n            context.moveTo(startX, item.y);\r\n            context.lineTo(startX + item.width - 2, item.y);\r\n            context.lineTo(startX + item.width - 2, opts.height - opts.area[2]);\r\n            context.lineTo(startX, opts.height - opts.area[2]);\r\n            context.lineTo(startX, item.y);\r\n            context.setLineWidth(1)\r\n            context.setStrokeStyle(strokeColor);\r\n          }\r\n          context.setFillStyle(fillColor);\r\n          context.closePath();\r\n          context.fill();\r\n        }\r\n      }\r\n      columnIndex += 1;\r\n    }\r\n    //绘制区域图数据\r\n    if (eachSeries.type == 'area') {\r\n      let splitPointList = splitPoints(points,eachSeries);\r\n      for (let i = 0; i < splitPointList.length; i++) {\r\n        let points = splitPointList[i];\r\n        // 绘制区域数据\r\n        context.beginPath();\r\n        context.setStrokeStyle(eachSeries.color);\r\n        context.setFillStyle(hexToRgb(eachSeries.color, 0.2));\r\n        context.setLineWidth(2 * opts.pix);\r\n        if (points.length > 1) {\r\n          var firstPoint = points[0];\r\n          let lastPoint = points[points.length - 1];\r\n          context.moveTo(firstPoint.x, firstPoint.y);\r\n          let startPoint = 0;\r\n          if (eachSeries.style === 'curve') {\r\n            for (let j = 0; j < points.length; j++) {\r\n              let item = points[j];\r\n              if (startPoint == 0 && item.x > leftSpace) {\r\n                context.moveTo(item.x, item.y);\r\n                startPoint = 1;\r\n              }\r\n              if (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n                var ctrlPoint = createCurveControlPoints(points, j - 1);\r\n                context.bezierCurveTo(ctrlPoint.ctrA.x, ctrlPoint.ctrA.y, ctrlPoint.ctrB.x, ctrlPoint.ctrB.y, item.x, item.y);\r\n              }\r\n            };\r\n          } else {\r\n            for (let j = 0; j < points.length; j++) {\r\n              let item = points[j];\r\n              if (startPoint == 0 && item.x > leftSpace) {\r\n                context.moveTo(item.x, item.y);\r\n                startPoint = 1;\r\n              }\r\n              if (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n                context.lineTo(item.x, item.y);\r\n              }\r\n            };\r\n          }\r\n          context.lineTo(lastPoint.x, endY);\r\n          context.lineTo(firstPoint.x, endY);\r\n          context.lineTo(firstPoint.x, firstPoint.y);\r\n        } else {\r\n          let item = points[0];\r\n          context.moveTo(item.x - eachSpacing / 2, item.y);\r\n          context.lineTo(item.x + eachSpacing / 2, item.y);\r\n          context.lineTo(item.x + eachSpacing / 2, endY);\r\n          context.lineTo(item.x - eachSpacing / 2, endY);\r\n          context.moveTo(item.x - eachSpacing / 2, item.y);\r\n        }\r\n        context.closePath();\r\n        context.fill();\r\n      }\r\n    }\r\n    // 绘制折线数据图\r\n    if (eachSeries.type == 'line') {\r\n      var splitPointList = splitPoints(points,eachSeries);\r\n      splitPointList.forEach(function(points, index) {\r\n        if (eachSeries.lineType == 'dash') {\r\n          let dashLength = eachSeries.dashLength ? eachSeries.dashLength : 8;\r\n          dashLength *= opts.pix;\r\n          context.setLineDash([dashLength, dashLength]);\r\n        }\r\n        context.beginPath();\r\n        context.setStrokeStyle(eachSeries.color);\r\n        context.setLineWidth(2 * opts.pix);\r\n        if (points.length === 1) {\r\n          context.moveTo(points[0].x, points[0].y);\r\n          context.arc(points[0].x, points[0].y, 1, 0, 2 * Math.PI);\r\n        } else {\r\n          context.moveTo(points[0].x, points[0].y);\r\n          let startPoint = 0;\r\n          if (eachSeries.style == 'curve') {\r\n            for (let j = 0; j < points.length; j++) {\r\n              let item = points[j];\r\n              if (startPoint == 0 && item.x > leftSpace) {\r\n                context.moveTo(item.x, item.y);\r\n                startPoint = 1;\r\n              }\r\n              if (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n                var ctrlPoint = createCurveControlPoints(points, j - 1);\r\n                context.bezierCurveTo(ctrlPoint.ctrA.x, ctrlPoint.ctrA.y, ctrlPoint.ctrB.x, ctrlPoint.ctrB.y,\r\n                  item.x, item.y);\r\n              }\r\n            }\r\n          } else {\r\n            for (let j = 0; j < points.length; j++) {\r\n              let item = points[j];\r\n              if (startPoint == 0 && item.x > leftSpace) {\r\n                context.moveTo(item.x, item.y);\r\n                startPoint = 1;\r\n              }\r\n              if (j > 0 && item.x > leftSpace && item.x < rightSpace) {\r\n                context.lineTo(item.x, item.y);\r\n              }\r\n            }\r\n          }\r\n          context.moveTo(points[0].x, points[0].y);\r\n        }\r\n        context.stroke();\r\n        context.setLineDash([]);\r\n      });\r\n    }\r\n    // 绘制点数据图\r\n    if (eachSeries.type == 'point') {\r\n      eachSeries.addPoint = true;\r\n    }\r\n    if (eachSeries.addPoint == true && eachSeries.type !== 'column') {\r\n      drawPointShape(points, eachSeries.color, eachSeries.pointShape, context, opts);\r\n    }\r\n  });\r\n  if (opts.dataLabel !== false && process === 1) {\r\n    var columnIndex = 0;\r\n    series.forEach(function(eachSeries, seriesIndex) {\r\n      let ranges, minRange, maxRange;\r\n      ranges = [].concat(opts.chartData.yAxisData.ranges[eachSeries.index]);\r\n      minRange = ranges.pop();\r\n      maxRange = ranges.shift();\r\n      var data = eachSeries.data;\r\n      var points = getDataPoints(data, minRange, maxRange, xAxisPoints, eachSpacing, opts, config, process);\r\n      if (eachSeries.type !== 'column') {\r\n        drawPointText(points, eachSeries, config, context, opts);\r\n      } else {\r\n        points = fixColumeData(points, eachSpacing, columnLength, columnIndex, config, opts);\r\n        drawPointText(points, eachSeries, config, context, opts);\r\n        columnIndex += 1;\r\n      }\r\n    });\r\n  }\r\n  context.restore();\r\n  return {\r\n    xAxisPoints: xAxisPoints,\r\n    calPoints: calPoints,\r\n    eachSpacing: eachSpacing,\r\n  }\r\n}\r\n\r\nfunction drawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints) {\r\n  var toolTipOption = opts.extra.tooltip || {};\r\n  if (toolTipOption.horizentalLine && opts.tooltip && process === 1 && (opts.type == 'line' || opts.type == 'area' || opts.type == 'column' || opts.type == 'candle' || opts.type == 'mix')) {\r\n    drawToolTipHorizentalLine(opts, config, context, eachSpacing, xAxisPoints)\r\n  }\r\n  context.save();\r\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0 && opts.enableScroll === true) {\r\n    context.translate(opts._scrollDistance_, 0);\r\n  }\r\n  if (opts.tooltip && opts.tooltip.textList && opts.tooltip.textList.length && process === 1) {\r\n    drawToolTip(opts.tooltip.textList, opts.tooltip.offset, opts, config, context, eachSpacing, xAxisPoints);\r\n  }\r\n  context.restore();\r\n\r\n}\r\n\r\nfunction drawXAxis(categories, opts, config, context) {\r\n\r\n  let xAxisData = opts.chartData.xAxisData,\r\n    xAxisPoints = xAxisData.xAxisPoints,\r\n    startX = xAxisData.startX,\r\n    endX = xAxisData.endX,\r\n    eachSpacing = xAxisData.eachSpacing;\r\n  var boundaryGap = 'center';\r\n  if (opts.type == 'bar' || opts.type == 'line' || opts.type == 'area'|| opts.type == 'scatter' || opts.type == 'bubble') {\r\n    boundaryGap = opts.xAxis.boundaryGap;\r\n  }\r\n  var startY = opts.height - opts.area[2];\r\n  var endY = opts.area[0];\r\n\r\n  //绘制滚动条\r\n  if (opts.enableScroll && opts.xAxis.scrollShow) {\r\n    var scrollY = opts.height - opts.area[2] + config.xAxisHeight;\r\n    var scrollScreenWidth = endX - startX;\r\n    var scrollTotalWidth = eachSpacing * (xAxisPoints.length - 1);\r\n    var scrollWidth = scrollScreenWidth * scrollScreenWidth / scrollTotalWidth;\r\n    var scrollLeft = 0;\r\n    if (opts._scrollDistance_) {\r\n      scrollLeft = -opts._scrollDistance_ * (scrollScreenWidth) / scrollTotalWidth;\r\n    }\r\n    context.beginPath();\r\n    context.setLineCap('round');\r\n    context.setLineWidth(6 * opts.pix);\r\n    context.setStrokeStyle(opts.xAxis.scrollBackgroundColor || \"#EFEBEF\");\r\n    context.moveTo(startX, scrollY);\r\n    context.lineTo(endX, scrollY);\r\n    context.stroke();\r\n    context.closePath();\r\n    context.beginPath();\r\n    context.setLineCap('round');\r\n    context.setLineWidth(6 * opts.pix);\r\n    context.setStrokeStyle(opts.xAxis.scrollColor || \"#A6A6A6\");\r\n    context.moveTo(startX + scrollLeft, scrollY);\r\n    context.lineTo(startX + scrollLeft + scrollWidth, scrollY);\r\n    context.stroke();\r\n    context.closePath();\r\n    context.setLineCap('butt');\r\n  }\r\n  context.save();\r\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0) {\r\n    context.translate(opts._scrollDistance_, 0);\r\n  }\r\n  //绘制X轴刻度线\r\n  if (opts.xAxis.calibration === true) {\r\n    context.setStrokeStyle(opts.xAxis.gridColor || \"#cccccc\");\r\n    context.setLineCap('butt');\r\n    context.setLineWidth(1 * opts.pix);\r\n    xAxisPoints.forEach(function(item, index) {\r\n      if (index > 0) {\r\n        context.beginPath();\r\n        context.moveTo(item - eachSpacing / 2, startY);\r\n        context.lineTo(item - eachSpacing / 2, startY + 3 * opts.pix);\r\n        context.closePath();\r\n        context.stroke();\r\n      }\r\n    });\r\n  }\r\n  //绘制X轴网格\r\n  if (opts.xAxis.disableGrid !== true) {\r\n    context.setStrokeStyle(opts.xAxis.gridColor || \"#cccccc\");\r\n    context.setLineCap('butt');\r\n    context.setLineWidth(1 * opts.pix);\r\n    if (opts.xAxis.gridType == 'dash') {\r\n      context.setLineDash([opts.xAxis.dashLength * opts.pix, opts.xAxis.dashLength * opts.pix]);\r\n    }\r\n    opts.xAxis.gridEval = opts.xAxis.gridEval || 1;\r\n    xAxisPoints.forEach(function(item, index) {\r\n      if (index % opts.xAxis.gridEval == 0) {\r\n        context.beginPath();\r\n        context.moveTo(item, startY);\r\n        context.lineTo(item, endY);\r\n        context.stroke();\r\n      }\r\n    });\r\n    context.setLineDash([]);\r\n  }\r\n  //绘制X轴文案\r\n  if (opts.xAxis.disabled !== true) {\r\n    // 对X轴列表做抽稀处理\r\n    //默认全部显示X轴标签\r\n    let maxXAxisListLength = categories.length;\r\n    //如果设置了X轴单屏数量\r\n    if (opts.xAxis.labelCount) {\r\n      //如果设置X轴密度\r\n      if (opts.xAxis.itemCount) {\r\n        maxXAxisListLength = Math.ceil(categories.length / opts.xAxis.itemCount * opts.xAxis.labelCount);\r\n      } else {\r\n        maxXAxisListLength = opts.xAxis.labelCount;\r\n      }\r\n      maxXAxisListLength -= 1;\r\n    }\r\n\r\n    let ratio = Math.ceil(categories.length / maxXAxisListLength);\r\n\r\n    let newCategories = [];\r\n    let cgLength = categories.length;\r\n    for (let i = 0; i < cgLength; i++) {\r\n      if (i % ratio !== 0) {\r\n        newCategories.push(\"\");\r\n      } else {\r\n        newCategories.push(categories[i]);\r\n      }\r\n    }\r\n    newCategories[cgLength - 1] = categories[cgLength - 1];\r\n    var xAxisFontSize = opts.xAxis.fontSize * opts.pix || config.fontSize;\r\n    if (config._xAxisTextAngle_ === 0) {\r\n      newCategories.forEach(function(item, index) {\r\n        var xitem = opts.xAxis.formatter ? opts.xAxis.formatter(item) : item;\r\n        var offset = -measureText(String(xitem), xAxisFontSize, context) / 2;\r\n        if (boundaryGap == 'center') {\r\n          offset += eachSpacing / 2;\r\n        }\r\n        var scrollHeight = 0;\r\n        if (opts.xAxis.scrollShow) {\r\n          scrollHeight = 6 * opts.pix;\r\n        }\r\n        context.beginPath();\r\n        context.setFontSize(xAxisFontSize);\r\n        context.setFillStyle(opts.xAxis.fontColor || opts.fontColor);\r\n        context.fillText(String(xitem), xAxisPoints[index] + offset, startY + xAxisFontSize + (config.xAxisHeight - scrollHeight - xAxisFontSize) / 2);\r\n        context.closePath();\r\n        context.stroke();\r\n      });\r\n    } else {\r\n      newCategories.forEach(function(item, index) {\r\n        var xitem = opts.xAxis.formatter ? opts.xAxis.formatter(item) : item;\r\n        context.save();\r\n        context.beginPath();\r\n        context.setFontSize(xAxisFontSize);\r\n        context.setFillStyle(opts.xAxis.fontColor || opts.fontColor);\r\n        var textWidth = measureText(String(xitem), xAxisFontSize, context);\r\n        var offset = -textWidth;\r\n        if (boundaryGap == 'center') {\r\n          offset += eachSpacing / 2;\r\n        }\r\n        var _calRotateTranslate = calRotateTranslate(xAxisPoints[index] + eachSpacing / 2, startY + xAxisFontSize / 2 + 5, opts.height),\r\n          transX = _calRotateTranslate.transX,\r\n          transY = _calRotateTranslate.transY;\r\n\r\n        context.rotate(-1 * config._xAxisTextAngle_);\r\n        context.translate(transX, transY);\r\n        context.fillText(String(xitem), xAxisPoints[index] + offset, startY + xAxisFontSize + 5);\r\n        context.closePath();\r\n        context.stroke();\r\n        context.restore();\r\n      });\r\n    }\r\n  }\r\n  context.restore();\r\n  //绘制X轴轴线\r\n  if (opts.xAxis.axisLine) {\r\n    context.beginPath();\r\n    context.setStrokeStyle(opts.xAxis.axisLineColor);\r\n    context.setLineWidth(1 * opts.pix);\r\n    context.moveTo(startX, opts.height - opts.area[2]);\r\n    context.lineTo(endX, opts.height - opts.area[2]);\r\n    context.stroke();\r\n  }\r\n}\r\n\r\nfunction drawYAxisGrid(categories, opts, config, context) {\r\n  if (opts.yAxis.disableGrid === true) {\r\n    return;\r\n  }\r\n  let spacingValid = opts.height - opts.area[0] - opts.area[2];\r\n  let eachSpacing = spacingValid / opts.yAxis.splitNumber;\r\n  let startX = opts.area[3];\r\n  let xAxisPoints = opts.chartData.xAxisData.xAxisPoints,\r\n    xAxiseachSpacing = opts.chartData.xAxisData.eachSpacing;\r\n  let TotalWidth = xAxiseachSpacing * (xAxisPoints.length - 1);\r\n  let endX = startX + TotalWidth;\r\n  let points = [];\r\n  let startY = 1\r\n  if (opts.xAxis.axisLine === false) {\r\n    startY = 0\r\n  }\r\n  for (let i = startY; i < opts.yAxis.splitNumber + 1; i++) {\r\n    points.push(opts.height - opts.area[2] - eachSpacing * i);\r\n  }\r\n  context.save();\r\n  if (opts._scrollDistance_ && opts._scrollDistance_ !== 0) {\r\n    context.translate(opts._scrollDistance_, 0);\r\n  }\r\n  if (opts.yAxis.gridType == 'dash') {\r\n    context.setLineDash([opts.yAxis.dashLength * opts.pix, opts.yAxis.dashLength * opts.pix]);\r\n  }\r\n  context.setStrokeStyle(opts.yAxis.gridColor);\r\n  context.setLineWidth(1 * opts.pix);\r\n  points.forEach(function(item, index) {\r\n    context.beginPath();\r\n    context.moveTo(startX, item);\r\n    context.lineTo(endX, item);\r\n    context.stroke();\r\n  });\r\n  context.setLineDash([]);\r\n  context.restore();\r\n}\r\n\r\nfunction drawYAxis(series, opts, config, context) {\r\n  if (opts.yAxis.disabled === true) {\r\n    return;\r\n  }\r\n  var spacingValid = opts.height - opts.area[0] - opts.area[2];\r\n  var eachSpacing = spacingValid / opts.yAxis.splitNumber;\r\n  var startX = opts.area[3];\r\n  var endX = opts.width - opts.area[1];\r\n  var endY = opts.height - opts.area[2];\r\n  var fillEndY = endY + config.xAxisHeight;\r\n  if (opts.xAxis.scrollShow) {\r\n    fillEndY -= 3 * opts.pix;\r\n  }\r\n  if (opts.xAxis.rotateLabel) {\r\n    fillEndY = opts.height - opts.area[2] + opts.fontSize * opts.pix / 2;\r\n  }\r\n  // set YAxis background\r\n  context.beginPath();\r\n  context.setFillStyle(opts.background);\r\n  if (opts.enableScroll == true && opts.xAxis.scrollPosition && opts.xAxis.scrollPosition !== 'left') {\r\n    context.fillRect(0, 0, startX, fillEndY);\r\n  }\r\n  if (opts.enableScroll == true && opts.xAxis.scrollPosition && opts.xAxis.scrollPosition !== 'right') {\r\n    context.fillRect(endX, 0, opts.width, fillEndY);\r\n  }\r\n  context.closePath();\r\n  context.stroke();\r\n  \r\n  let tStartLeft = opts.area[3];\r\n  let tStartRight = opts.width - opts.area[1];\r\n  let tStartCenter = opts.area[3] + (opts.width - opts.area[1] - opts.area[3]) / 2;\r\n  if (opts.yAxis.data) {\r\n    for (let i = 0; i < opts.yAxis.data.length; i++) {\r\n      let yData = opts.yAxis.data[i];\r\n      var points = [];\r\n      if(yData.type === 'categories'){\r\n        for (let i = 0; i <= yData.categories.length; i++) {\r\n          points.push(opts.area[0] + spacingValid / yData.categories.length / 2 + spacingValid / yData.categories.length * i);\r\n        }\r\n      }else{\r\n        for (let i = 0; i <= opts.yAxis.splitNumber; i++) {\r\n          points.push(opts.area[0] + eachSpacing * i);\r\n        }\r\n      }\r\n      if (yData.disabled !== true) {\r\n        let rangesFormat = opts.chartData.yAxisData.rangesFormat[i];\r\n        let yAxisFontSize = yData.fontSize ? yData.fontSize * opts.pix : config.fontSize;\r\n        let yAxisWidth = opts.chartData.yAxisData.yAxisWidth[i];\r\n        let textAlign = yData.textAlign || \"right\";\r\n        //画Y轴刻度及文案\r\n        rangesFormat.forEach(function(item, index) {\r\n          var pos = points[index] ? points[index] : endY;\r\n          context.beginPath();\r\n          context.setFontSize(yAxisFontSize);\r\n          context.setLineWidth(1 * opts.pix);\r\n          context.setStrokeStyle(yData.axisLineColor || '#cccccc');\r\n          context.setFillStyle(yData.fontColor || opts.fontColor);\r\n          let tmpstrat = 0;\r\n          let gapwidth = 4 * opts.pix;\r\n          if (yAxisWidth.position == 'left') {\r\n            //画刻度线\r\n            if (yData.calibration == true) {\r\n              context.moveTo(tStartLeft, pos);\r\n              context.lineTo(tStartLeft - 3 * opts.pix, pos);\r\n              gapwidth += 3 * opts.pix;\r\n            }\r\n            //画文字\r\n            switch (textAlign) {\r\n              case \"left\":\r\n                context.setTextAlign('left');\r\n                tmpstrat = tStartLeft - yAxisWidth.width\r\n                break;\r\n              case \"right\":\r\n                context.setTextAlign('right');\r\n                tmpstrat = tStartLeft - gapwidth\r\n                break;\r\n              default:\r\n                context.setTextAlign('center');\r\n                tmpstrat = tStartLeft - yAxisWidth.width / 2\r\n            }\r\n            context.fillText(String(item), tmpstrat, pos + yAxisFontSize / 2 - 3 * opts.pix);\r\n\r\n          } else if (yAxisWidth.position == 'right') {\r\n            //画刻度线\r\n            if (yData.calibration == true) {\r\n              context.moveTo(tStartRight, pos);\r\n              context.lineTo(tStartRight + 3 * opts.pix, pos);\r\n              gapwidth += 3 * opts.pix;\r\n            }\r\n            switch (textAlign) {\r\n              case \"left\":\r\n                context.setTextAlign('left');\r\n                tmpstrat = tStartRight + gapwidth\r\n                break;\r\n              case \"right\":\r\n                context.setTextAlign('right');\r\n                tmpstrat = tStartRight + yAxisWidth.width\r\n                break;\r\n              default:\r\n                context.setTextAlign('center');\r\n                tmpstrat = tStartRight + yAxisWidth.width / 2\r\n            }\r\n            context.fillText(String(item), tmpstrat, pos + yAxisFontSize / 2 - 3 * opts.pix);\r\n          } else if (yAxisWidth.position == 'center') {\r\n            //画刻度线\r\n            if (yData.calibration == true) {\r\n              context.moveTo(tStartCenter, pos);\r\n              context.lineTo(tStartCenter - 3 * opts.pix, pos);\r\n              gapwidth += 3 * opts.pix;\r\n            }\r\n            //画文字\r\n            switch (textAlign) {\r\n              case \"left\":\r\n                context.setTextAlign('left');\r\n                tmpstrat = tStartCenter - yAxisWidth.width\r\n                break;\r\n              case \"right\":\r\n                context.setTextAlign('right');\r\n                tmpstrat = tStartCenter - gapwidth\r\n                break;\r\n              default:\r\n                context.setTextAlign('center');\r\n                tmpstrat = tStartCenter - yAxisWidth.width / 2\r\n            }\r\n            context.fillText(String(item), tmpstrat, pos + yAxisFontSize / 2 - 3 * opts.pix);\r\n          }\r\n          context.closePath();\r\n          context.stroke();\r\n          context.setTextAlign('left');\r\n        });\r\n        //画Y轴轴线\r\n        if (yData.axisLine !== false) {\r\n          context.beginPath();\r\n          context.setStrokeStyle(yData.axisLineColor || '#cccccc');\r\n          context.setLineWidth(1 * opts.pix);\r\n          if (yAxisWidth.position == 'left') {\r\n            context.moveTo(tStartLeft, opts.height - opts.area[2]);\r\n            context.lineTo(tStartLeft, opts.area[0]);\r\n          } else if (yAxisWidth.position == 'right') {\r\n            context.moveTo(tStartRight, opts.height - opts.area[2]);\r\n            context.lineTo(tStartRight, opts.area[0]);\r\n          } else if (yAxisWidth.position == 'center') {\r\n            context.moveTo(tStartCenter, opts.height - opts.area[2]);\r\n            context.lineTo(tStartCenter, opts.area[0]);\r\n          }\r\n          context.stroke();\r\n        }\r\n        //画Y轴标题\r\n        if (opts.yAxis.showTitle) {\r\n          let titleFontSize = yData.titleFontSize * opts.pix || config.fontSize;\r\n          let title = yData.title;\r\n          context.beginPath();\r\n          context.setFontSize(titleFontSize);\r\n          context.setFillStyle(yData.titleFontColor || opts.fontColor);\r\n          if (yAxisWidth.position == 'left') {\r\n            context.fillText(title, tStartLeft - measureText(title, titleFontSize, context) / 2 + (yData.titleOffsetX || 0), opts.area[0] - (10 - (yData.titleOffsetY || 0)) * opts.pix);\r\n          } else if (yAxisWidth.position == 'right') {\r\n            context.fillText(title, tStartRight - measureText(title, titleFontSize, context) / 2 + (yData.titleOffsetX || 0), opts.area[0] - (10 - (yData.titleOffsetY || 0)) * opts.pix);\r\n          } else if (yAxisWidth.position == 'center') {\r\n            context.fillText(title, tStartCenter - measureText(title, titleFontSize, context) / 2 + (yData.titleOffsetX || 0), opts.area[0] - (10 - (yData.titleOffsetY || 0)) * opts.pix);\r\n          }\r\n          context.closePath();\r\n          context.stroke();\r\n        }\r\n        if (yAxisWidth.position == 'left') {\r\n          tStartLeft -= (yAxisWidth.width + opts.yAxis.padding * opts.pix);\r\n        } else {\r\n          tStartRight += yAxisWidth.width + opts.yAxis.padding * opts.pix;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\nfunction drawLegend(series, opts, config, context, chartData) {\r\n  if (opts.legend.show === false) {\r\n    return;\r\n  }\r\n  let legendData = chartData.legendData;\r\n  let legendList = legendData.points;\r\n  let legendArea = legendData.area;\r\n  let padding = opts.legend.padding * opts.pix;\r\n  let fontSize = opts.legend.fontSize * opts.pix;\r\n  let shapeWidth = 15 * opts.pix;\r\n  let shapeRight = 5 * opts.pix;\r\n  let itemGap = opts.legend.itemGap * opts.pix;\r\n  let lineHeight = Math.max(opts.legend.lineHeight * opts.pix, fontSize);\r\n  //画背景及边框\r\n  context.beginPath();\r\n  context.setLineWidth(opts.legend.borderWidth * opts.pix);\r\n  context.setStrokeStyle(opts.legend.borderColor);\r\n  context.setFillStyle(opts.legend.backgroundColor);\r\n  context.moveTo(legendArea.start.x, legendArea.start.y);\r\n  context.rect(legendArea.start.x, legendArea.start.y, legendArea.width, legendArea.height);\r\n  context.closePath();\r\n  context.fill();\r\n  context.stroke();\r\n  legendList.forEach(function(itemList, listIndex) {\r\n    let width = 0;\r\n    let height = 0;\r\n    width = legendData.widthArr[listIndex];\r\n    height = legendData.heightArr[listIndex];\r\n    let startX = 0;\r\n    let startY = 0;\r\n    if (opts.legend.position == 'top' || opts.legend.position == 'bottom') {\r\n      switch (opts.legend.float) {\r\n        case 'left':\r\n          startX = legendArea.start.x + padding;\r\n        break;\r\n        case 'right':\r\n          startX = legendArea.start.x + legendArea.width - width;\r\n        break;\r\n        default:\r\n        startX = legendArea.start.x + (legendArea.width - width) / 2;\r\n      }\r\n      startY = legendArea.start.y + padding + listIndex * lineHeight;\r\n    } else {\r\n      if (listIndex == 0) {\r\n        width = 0;\r\n      } else {\r\n        width = legendData.widthArr[listIndex - 1];\r\n      }\r\n      startX = legendArea.start.x + padding + width;\r\n      startY = legendArea.start.y + padding + (legendArea.height - height) / 2;\r\n    }\r\n    context.setFontSize(config.fontSize);\r\n    for (let i = 0; i < itemList.length; i++) {\r\n      let item = itemList[i];\r\n      item.area = [0, 0, 0, 0];\r\n      item.area[0] = startX;\r\n      item.area[1] = startY;\r\n      item.area[3] = startY + lineHeight;\r\n      context.beginPath();\r\n      context.setLineWidth(1 * opts.pix);\r\n      context.setStrokeStyle(item.show ? item.color : opts.legend.hiddenColor);\r\n      context.setFillStyle(item.show ? item.color : opts.legend.hiddenColor);\r\n      switch (item.legendShape) {\r\n        case 'line':\r\n          context.moveTo(startX, startY + 0.5 * lineHeight - 2 * opts.pix);\r\n          context.fillRect(startX, startY + 0.5 * lineHeight - 2 * opts.pix, 15 * opts.pix, 4 * opts.pix);\r\n          break;\r\n        case 'triangle':\r\n          context.moveTo(startX + 7.5 * opts.pix, startY + 0.5 * lineHeight - 5 * opts.pix);\r\n          context.lineTo(startX + 2.5 * opts.pix, startY + 0.5 * lineHeight + 5 * opts.pix);\r\n          context.lineTo(startX + 12.5 * opts.pix, startY + 0.5 * lineHeight + 5 * opts.pix);\r\n          context.lineTo(startX + 7.5 * opts.pix, startY + 0.5 * lineHeight - 5 * opts.pix);\r\n          break;\r\n        case 'diamond':\r\n          context.moveTo(startX + 7.5 * opts.pix, startY + 0.5 * lineHeight - 5 * opts.pix);\r\n          context.lineTo(startX + 2.5 * opts.pix, startY + 0.5 * lineHeight);\r\n          context.lineTo(startX + 7.5 * opts.pix, startY + 0.5 * lineHeight + 5 * opts.pix);\r\n          context.lineTo(startX + 12.5 * opts.pix, startY + 0.5 * lineHeight);\r\n          context.lineTo(startX + 7.5 * opts.pix, startY + 0.5 * lineHeight - 5 * opts.pix);\r\n          break;\r\n        case 'circle':\r\n          context.moveTo(startX + 7.5 * opts.pix, startY + 0.5 * lineHeight);\r\n          context.arc(startX + 7.5 * opts.pix, startY + 0.5 * lineHeight, 5 * opts.pix, 0, 2 * Math.PI);\r\n          break;\r\n        case 'rect':\r\n          context.moveTo(startX, startY + 0.5 * lineHeight - 5 * opts.pix);\r\n          context.fillRect(startX, startY + 0.5 * lineHeight - 5 * opts.pix, 15 * opts.pix, 10 * opts.pix);\r\n          break;\r\n        case 'square':\r\n          context.moveTo(startX + 5 * opts.pix, startY + 0.5 * lineHeight - 5 * opts.pix);\r\n          context.fillRect(startX + 5 * opts.pix, startY + 0.5 * lineHeight - 5 * opts.pix, 10 * opts.pix, 10 * opts.pix);\r\n          break;\r\n        case 'none':\r\n          break;\r\n        default:\r\n          context.moveTo(startX, startY + 0.5 * lineHeight - 5 * opts.pix);\r\n          context.fillRect(startX, startY + 0.5 * lineHeight - 5 * opts.pix, 15 * opts.pix, 10 * opts.pix);\r\n      }\r\n      context.closePath();\r\n      context.fill();\r\n      context.stroke();\r\n      startX += shapeWidth + shapeRight;\r\n      let fontTrans = 0.5 * lineHeight + 0.5 * fontSize - 2;\r\n      context.beginPath();\r\n      context.setFontSize(fontSize);\r\n      context.setFillStyle(item.show ? opts.legend.fontColor : opts.legend.hiddenColor);\r\n      context.fillText(item.name, startX, startY + fontTrans);\r\n      context.closePath();\r\n      context.stroke();\r\n      if (opts.legend.position == 'top' || opts.legend.position == 'bottom') {\r\n        startX += measureText(item.name, fontSize, context) + itemGap;\r\n        item.area[2] = startX;\r\n      } else {\r\n        item.area[2] = startX + measureText(item.name, fontSize, context) + itemGap;;\r\n        startX -= shapeWidth + shapeRight;\r\n        startY += lineHeight;\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nfunction drawPieDataPoints(series, opts, config, context) {\r\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  var pieOption = assign({}, {\r\n    activeOpacity: 0.5,\r\n    activeRadius: 10,\r\n    offsetAngle: 0,\r\n    labelWidth: 15,\r\n    ringWidth: 30,\r\n    customRadius: 0,\r\n    border: false,\r\n    borderWidth: 2,\r\n    borderColor: '#FFFFFF',\r\n    centerColor: '#FFFFFF',\r\n    linearType: 'none',\r\n    customColor: [],\r\n  }, opts.type == \"pie\" ? opts.extra.pie : opts.extra.ring);\r\n  var centerPosition = {\r\n    x: opts.area[3] + (opts.width - opts.area[1] - opts.area[3]) / 2,\r\n    y: opts.area[0] + (opts.height - opts.area[0] - opts.area[2]) / 2\r\n  };\r\n  if (config.pieChartLinePadding == 0) {\r\n    config.pieChartLinePadding = pieOption.activeRadius * opts.pix;\r\n  }\r\n\r\n  var radius = Math.min((opts.width - opts.area[1] - opts.area[3]) / 2 - config.pieChartLinePadding - config.pieChartTextPadding - config._pieTextMaxLength_, (opts.height - opts.area[0] - opts.area[2]) / 2 - config.pieChartLinePadding - config.pieChartTextPadding);\r\n  if (pieOption.customRadius > 0) {\r\n    radius = pieOption.customRadius * opts.pix;\r\n  }\r\n  series = getPieDataPoints(series, radius, process);\r\n  var activeRadius = pieOption.activeRadius * opts.pix;\r\n  pieOption.customColor = fillCustomColor(pieOption.linearType, pieOption.customColor, series, config);\r\n  series = series.map(function(eachSeries) {\r\n    eachSeries._start_ += (pieOption.offsetAngle) * Math.PI / 180;\r\n    return eachSeries;\r\n  });\r\n  series.forEach(function(eachSeries, seriesIndex) {\r\n    if (opts.tooltip) {\r\n      if (opts.tooltip.index == seriesIndex) {\r\n        context.beginPath();\r\n        context.setFillStyle(hexToRgb(eachSeries.color, pieOption.activeOpacity || 0.5));\r\n        context.moveTo(centerPosition.x, centerPosition.y);\r\n        context.arc(centerPosition.x, centerPosition.y, eachSeries._radius_ + activeRadius, eachSeries._start_, eachSeries._start_ + 2 * eachSeries._proportion_ * Math.PI);\r\n        context.closePath();\r\n        context.fill();\r\n      }\r\n    }\r\n    context.beginPath();\r\n    context.setLineWidth(pieOption.borderWidth * opts.pix);\r\n    context.lineJoin = \"round\";\r\n    context.setStrokeStyle(pieOption.borderColor);\r\n    var fillcolor = eachSeries.color;\r\n    if (pieOption.linearType == 'custom') {\r\n      var grd;\r\n      if(context.createCircularGradient){\r\n        grd = context.createCircularGradient(centerPosition.x, centerPosition.y, eachSeries._radius_)\r\n      }else{\r\n        grd = context.createRadialGradient(centerPosition.x, centerPosition.y, 0,centerPosition.x, centerPosition.y, eachSeries._radius_)\r\n      }\r\n      grd.addColorStop(0, hexToRgb(pieOption.customColor[eachSeries.linearIndex], 1))\r\n      grd.addColorStop(1, hexToRgb(eachSeries.color, 1))\r\n      fillcolor = grd\r\n    }\r\n    context.setFillStyle(fillcolor);\r\n    context.moveTo(centerPosition.x, centerPosition.y);\r\n    context.arc(centerPosition.x, centerPosition.y, eachSeries._radius_, eachSeries._start_, eachSeries._start_ + 2 * eachSeries._proportion_ * Math.PI);\r\n    context.closePath();\r\n    context.fill();\r\n    if (pieOption.border == true) {\r\n      context.stroke();\r\n    }\r\n  });\r\n  if (opts.type === 'ring') {\r\n    var innerPieWidth = radius * 0.6;\r\n    if (typeof pieOption.ringWidth === 'number' && pieOption.ringWidth > 0) {\r\n      innerPieWidth = Math.max(0, radius - pieOption.ringWidth * opts.pix);\r\n    }\r\n    context.beginPath();\r\n    context.setFillStyle(pieOption.centerColor);\r\n    context.moveTo(centerPosition.x, centerPosition.y);\r\n    context.arc(centerPosition.x, centerPosition.y, innerPieWidth, 0, 2 * Math.PI);\r\n    context.closePath();\r\n    context.fill();\r\n  }\r\n  if (opts.dataLabel !== false && process === 1) {\r\n    var valid = false;\r\n    for (var i = 0, len = series.length; i < len; i++) {\r\n      if (series[i].data > 0) {\r\n        valid = true;\r\n        break;\r\n      }\r\n    }\r\n    if (valid) {\r\n      drawPieText(series, opts, config, context, radius, centerPosition);\r\n    }\r\n  }\r\n  if (process === 1 && opts.type === 'ring') {\r\n    drawRingTitle(opts, config, context, centerPosition);\r\n  }\r\n  return {\r\n    center: centerPosition,\r\n    radius: radius,\r\n    series: series\r\n  };\r\n}\r\n\r\nfunction drawRoseDataPoints(series, opts, config, context) {\r\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  var roseOption = assign({}, {\r\n    type: 'area',\r\n    activeOpacity: 0.5,\r\n    activeRadius: 10,\r\n    offsetAngle: 0,\r\n    labelWidth: 15,\r\n    border: false,\r\n    borderWidth: 2,\r\n    borderColor: '#FFFFFF',\r\n    linearType: 'none',\r\n    customColor: [],\r\n  }, opts.extra.rose);\r\n  if (config.pieChartLinePadding == 0) {\r\n    config.pieChartLinePadding = roseOption.activeRadius * opts.pix;\r\n  }\r\n  var centerPosition = {\r\n    x: opts.area[3] + (opts.width - opts.area[1] - opts.area[3]) / 2,\r\n    y: opts.area[0] + (opts.height - opts.area[0] - opts.area[2]) / 2\r\n  };\r\n  var radius = Math.min((opts.width - opts.area[1] - opts.area[3]) / 2 - config.pieChartLinePadding - config.pieChartTextPadding - config._pieTextMaxLength_, (opts.height - opts.area[0] - opts.area[2]) / 2 - config.pieChartLinePadding - config.pieChartTextPadding);\r\n  var minRadius = roseOption.minRadius || radius * 0.5;\r\n  series = getRoseDataPoints(series, roseOption.type, minRadius, radius, process);\r\n  var activeRadius = roseOption.activeRadius * opts.pix;\r\n  roseOption.customColor = fillCustomColor(roseOption.linearType, roseOption.customColor, series, config);\r\n  series = series.map(function(eachSeries) {\r\n    eachSeries._start_ += (roseOption.offsetAngle || 0) * Math.PI / 180;\r\n    return eachSeries;\r\n  });\r\n  series.forEach(function(eachSeries, seriesIndex) {\r\n    if (opts.tooltip) {\r\n      if (opts.tooltip.index == seriesIndex) {\r\n        context.beginPath();\r\n        context.setFillStyle(hexToRgb(eachSeries.color, roseOption.activeOpacity || 0.5));\r\n        context.moveTo(centerPosition.x, centerPosition.y);\r\n        context.arc(centerPosition.x, centerPosition.y, activeRadius + eachSeries._radius_, eachSeries._start_, eachSeries._start_ + 2 * eachSeries._rose_proportion_ * Math.PI);\r\n        context.closePath();\r\n        context.fill();\r\n      }\r\n    }\r\n    context.beginPath();\r\n    context.setLineWidth(roseOption.borderWidth * opts.pix);\r\n    context.lineJoin = \"round\";\r\n    context.setStrokeStyle(roseOption.borderColor);\r\n    var fillcolor = eachSeries.color;\r\n    if (roseOption.linearType == 'custom') {\r\n      var grd;\r\n      if(context.createCircularGradient){\r\n        grd = context.createCircularGradient(centerPosition.x, centerPosition.y, eachSeries._radius_)\r\n      }else{\r\n        grd = context.createRadialGradient(centerPosition.x, centerPosition.y, 0,centerPosition.x, centerPosition.y, eachSeries._radius_)\r\n      }\r\n      grd.addColorStop(0, hexToRgb(roseOption.customColor[eachSeries.linearIndex], 1))\r\n      grd.addColorStop(1, hexToRgb(eachSeries.color, 1))\r\n      fillcolor = grd\r\n    }\r\n    context.setFillStyle(fillcolor);\r\n    context.moveTo(centerPosition.x, centerPosition.y);\r\n    context.arc(centerPosition.x, centerPosition.y, eachSeries._radius_, eachSeries._start_, eachSeries._start_ + 2 * eachSeries._rose_proportion_ * Math.PI);\r\n    context.closePath();\r\n    context.fill();\r\n    if (roseOption.border == true) {\r\n      context.stroke();\r\n    }\r\n  });\r\n\r\n  if (opts.dataLabel !== false && process === 1) {\r\n    var valid = false;\r\n    for (var i = 0, len = series.length; i < len; i++) {\r\n      if (series[i].data > 0) {\r\n        valid = true;\r\n        break;\r\n      }\r\n    }\r\n    if (valid) {\r\n      drawPieText(series, opts, config, context, radius, centerPosition);\r\n    }\r\n  }\r\n  return {\r\n    center: centerPosition,\r\n    radius: radius,\r\n    series: series\r\n  };\r\n}\r\n\r\nfunction drawArcbarDataPoints(series, opts, config, context) {\r\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  var arcbarOption = assign({}, {\r\n    startAngle: 0.75,\r\n    endAngle: 0.25,\r\n    type: 'default',\r\n    width: 12 ,\r\n    gap: 2 ,\r\n    linearType: 'none',\r\n    customColor: [],\r\n  }, opts.extra.arcbar);\r\n  series = getArcbarDataPoints(series, arcbarOption, process);\r\n  var centerPosition;\r\n  if (arcbarOption.centerX || arcbarOption.centerY) {\r\n    centerPosition = {\r\n      x: arcbarOption.centerX ? arcbarOption.centerX : opts.width / 2,\r\n      y: arcbarOption.centerY ? arcbarOption.centerY : opts.height / 2\r\n    };\r\n  } else {\r\n    centerPosition = {\r\n      x: opts.width / 2,\r\n      y: opts.height / 2\r\n    };\r\n  }\r\n  var radius;\r\n  if (arcbarOption.radius) {\r\n    radius = arcbarOption.radius;\r\n  } else {\r\n    radius = Math.min(centerPosition.x, centerPosition.y);\r\n    radius -= 5 * opts.pix;\r\n    radius -= arcbarOption.width / 2;\r\n  }\r\n  arcbarOption.customColor = fillCustomColor(arcbarOption.linearType, arcbarOption.customColor, series, config);\r\n  \r\n  for (let i = 0; i < series.length; i++) {\r\n    let eachSeries = series[i];\r\n    //背景颜色\r\n    context.setLineWidth(arcbarOption.width * opts.pix);\r\n    context.setStrokeStyle(arcbarOption.backgroundColor || '#E9E9E9');\r\n    context.setLineCap('round');\r\n    context.beginPath();\r\n    if (arcbarOption.type == 'default') {\r\n      context.arc(centerPosition.x, centerPosition.y, radius - (arcbarOption.width * opts.pix + arcbarOption.gap * opts.pix) * i, arcbarOption.startAngle * Math.PI, arcbarOption.endAngle * Math.PI, false);\r\n    } else {\r\n      context.arc(centerPosition.x, centerPosition.y, radius - (arcbarOption.width * opts.pix + arcbarOption.gap * opts.pix) * i, 0, 2 * Math.PI, false);\r\n    }\r\n    context.stroke();\r\n    //进度条\r\n    var fillColor = eachSeries.color\r\n    if(arcbarOption.linearType == 'custom'){\r\n      var grd = context.createLinearGradient(centerPosition.x - radius, centerPosition.y, centerPosition.x + radius, centerPosition.y);\r\n      grd.addColorStop(1, hexToRgb(arcbarOption.customColor[eachSeries.linearIndex], 1))\r\n      grd.addColorStop(0, hexToRgb(eachSeries.color, 1))\r\n      fillColor = grd;\r\n    }\r\n    context.setLineWidth(arcbarOption.width * opts.pix);\r\n    context.setStrokeStyle(fillColor);\r\n    context.setLineCap('round');\r\n    context.beginPath();\r\n    context.arc(centerPosition.x, centerPosition.y, radius - (arcbarOption.width * opts.pix + arcbarOption.gap * opts.pix) * i, arcbarOption.startAngle * Math.PI, eachSeries._proportion_ * Math.PI, false);\r\n    context.stroke();\r\n  }\r\n  drawRingTitle(opts, config, context, centerPosition);\r\n  return {\r\n    center: centerPosition,\r\n    radius: radius,\r\n    series: series\r\n  };\r\n}\r\n\r\nfunction drawGaugeDataPoints(categories, series, opts, config, context) {\r\n  var process = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1;\r\n  var gaugeOption = assign({}, {\r\n    type: 'default',\r\n    startAngle: 0.75,\r\n    endAngle: 0.25,\r\n    width: 15,\r\n    labelOffset:13,\r\n    splitLine: {\r\n      fixRadius: 0,\r\n      splitNumber: 10,\r\n      width: 15,\r\n      color: '#FFFFFF',\r\n      childNumber: 5,\r\n      childWidth: 5\r\n    },\r\n    pointer: {\r\n      width: 15,\r\n      color: 'auto'\r\n    }\r\n  }, opts.extra.gauge);\r\n  if (gaugeOption.oldAngle == undefined) {\r\n    gaugeOption.oldAngle = gaugeOption.startAngle;\r\n  }\r\n  if (gaugeOption.oldData == undefined) {\r\n    gaugeOption.oldData = 0;\r\n  }\r\n  categories = getGaugeAxisPoints(categories, gaugeOption.startAngle, gaugeOption.endAngle);\r\n  var centerPosition = {\r\n    x: opts.width / 2,\r\n    y: opts.height / 2\r\n  };\r\n  var radius = Math.min(centerPosition.x, centerPosition.y);\r\n  radius -= 5 * opts.pix;\r\n  radius -= gaugeOption.width / 2;\r\n  var innerRadius = radius - gaugeOption.width;\r\n  var totalAngle = 0;\r\n  //判断仪表盘的样式：default百度样式，progress新样式\r\n  if (gaugeOption.type == 'progress') {\r\n    //## 第一步画中心圆形背景和进度条背景\r\n    //中心圆形背景\r\n    var pieRadius = radius - gaugeOption.width * 3;\r\n    context.beginPath();\r\n    let gradient = context.createLinearGradient(centerPosition.x, centerPosition.y - pieRadius, centerPosition.x, centerPosition.y + pieRadius);\r\n    //配置渐变填充（起点：中心点向上减半径；结束点中心点向下加半径）\r\n    gradient.addColorStop('0', hexToRgb(series[0].color, 0.3));\r\n    gradient.addColorStop('1.0', hexToRgb(\"#FFFFFF\", 0.1));\r\n    context.setFillStyle(gradient);\r\n    context.arc(centerPosition.x, centerPosition.y, pieRadius, 0, 2 * Math.PI, false);\r\n    context.fill();\r\n    //画进度条背景\r\n    context.setLineWidth(gaugeOption.width);\r\n    context.setStrokeStyle(hexToRgb(series[0].color, 0.3));\r\n    context.setLineCap('round');\r\n    context.beginPath();\r\n    context.arc(centerPosition.x, centerPosition.y, innerRadius, gaugeOption.startAngle * Math.PI, gaugeOption.endAngle * Math.PI, false);\r\n    context.stroke();\r\n    //## 第二步画刻度线\r\n    totalAngle = gaugeOption.startAngle - gaugeOption.endAngle + 1;\r\n    let splitAngle = totalAngle / gaugeOption.splitLine.splitNumber;\r\n    let childAngle = totalAngle / gaugeOption.splitLine.splitNumber / gaugeOption.splitLine.childNumber;\r\n    let startX = -radius - gaugeOption.width * 0.5 - gaugeOption.splitLine.fixRadius;\r\n    let endX = -radius - gaugeOption.width - gaugeOption.splitLine.fixRadius + gaugeOption.splitLine.width;\r\n    context.save();\r\n    context.translate(centerPosition.x, centerPosition.y);\r\n    context.rotate((gaugeOption.startAngle - 1) * Math.PI);\r\n    let len = gaugeOption.splitLine.splitNumber * gaugeOption.splitLine.childNumber + 1;\r\n    let proc = series[0].data * process;\r\n    for (let i = 0; i < len; i++) {\r\n      context.beginPath();\r\n      //刻度线随进度变色\r\n      if (proc > (i / len)) {\r\n        context.setStrokeStyle(hexToRgb(series[0].color, 1));\r\n      } else {\r\n        context.setStrokeStyle(hexToRgb(series[0].color, 0.3));\r\n      }\r\n      context.setLineWidth(3 * opts.pix);\r\n      context.moveTo(startX, 0);\r\n      context.lineTo(endX, 0);\r\n      context.stroke();\r\n      context.rotate(childAngle * Math.PI);\r\n    }\r\n    context.restore();\r\n    //## 第三步画进度条\r\n    series = getArcbarDataPoints(series, gaugeOption, process);\r\n    context.setLineWidth(gaugeOption.width);\r\n    context.setStrokeStyle(series[0].color);\r\n    context.setLineCap('round');\r\n    context.beginPath();\r\n    context.arc(centerPosition.x, centerPosition.y, innerRadius, gaugeOption.startAngle * Math.PI, series[0]._proportion_ * Math.PI, false);\r\n    context.stroke();\r\n    //## 第四步画指针\r\n    let pointerRadius = radius - gaugeOption.width * 2.5;\r\n    context.save();\r\n    context.translate(centerPosition.x, centerPosition.y);\r\n    context.rotate((series[0]._proportion_ - 1) * Math.PI);\r\n    context.beginPath();\r\n    context.setLineWidth(gaugeOption.width / 3);\r\n    let gradient3 = context.createLinearGradient(0, -pointerRadius * 0.6, 0, pointerRadius * 0.6);\r\n    gradient3.addColorStop('0', hexToRgb('#FFFFFF', 0));\r\n    gradient3.addColorStop('0.5', hexToRgb(series[0].color, 1));\r\n    gradient3.addColorStop('1.0', hexToRgb('#FFFFFF', 0));\r\n    context.setStrokeStyle(gradient3);\r\n    context.arc(0, 0, pointerRadius, 0.85 * Math.PI, 1.15 * Math.PI, false);\r\n    context.stroke();\r\n    context.beginPath();\r\n    context.setLineWidth(1);\r\n    context.setStrokeStyle(series[0].color);\r\n    context.setFillStyle(series[0].color);\r\n    context.moveTo(-pointerRadius - gaugeOption.width / 3 / 2, -4);\r\n    context.lineTo(-pointerRadius - gaugeOption.width / 3 / 2 - 4, 0);\r\n    context.lineTo(-pointerRadius - gaugeOption.width / 3 / 2, 4);\r\n    context.lineTo(-pointerRadius - gaugeOption.width / 3 / 2, -4);\r\n    context.stroke();\r\n    context.fill();\r\n    context.restore();\r\n    //default百度样式\r\n  } else {\r\n    //画背景\r\n    context.setLineWidth(gaugeOption.width);\r\n    context.setLineCap('butt');\r\n    for (let i = 0; i < categories.length; i++) {\r\n      let eachCategories = categories[i];\r\n      context.beginPath();\r\n      context.setStrokeStyle(eachCategories.color);\r\n      context.arc(centerPosition.x, centerPosition.y, radius, eachCategories._startAngle_ * Math.PI, eachCategories._endAngle_ * Math.PI, false);\r\n      context.stroke();\r\n    }\r\n    context.save();\r\n    //画刻度线\r\n    totalAngle = gaugeOption.startAngle - gaugeOption.endAngle + 1;\r\n    let splitAngle = totalAngle / gaugeOption.splitLine.splitNumber;\r\n    let childAngle = totalAngle / gaugeOption.splitLine.splitNumber / gaugeOption.splitLine.childNumber;\r\n    let startX = -radius - gaugeOption.width * 0.5 - gaugeOption.splitLine.fixRadius;\r\n    let endX = -radius - gaugeOption.width * 0.5 - gaugeOption.splitLine.fixRadius + gaugeOption.splitLine.width;\r\n    let childendX = -radius - gaugeOption.width * 0.5 - gaugeOption.splitLine.fixRadius + gaugeOption.splitLine.childWidth;\r\n    context.translate(centerPosition.x, centerPosition.y);\r\n    context.rotate((gaugeOption.startAngle - 1) * Math.PI);\r\n    for (let i = 0; i < gaugeOption.splitLine.splitNumber + 1; i++) {\r\n      context.beginPath();\r\n      context.setStrokeStyle(gaugeOption.splitLine.color);\r\n      context.setLineWidth(2 * opts.pix);\r\n      context.moveTo(startX, 0);\r\n      context.lineTo(endX, 0);\r\n      context.stroke();\r\n      context.rotate(splitAngle * Math.PI);\r\n    }\r\n    context.restore();\r\n    context.save();\r\n    context.translate(centerPosition.x, centerPosition.y);\r\n    context.rotate((gaugeOption.startAngle - 1) * Math.PI);\r\n    for (let i = 0; i < gaugeOption.splitLine.splitNumber * gaugeOption.splitLine.childNumber + 1; i++) {\r\n      context.beginPath();\r\n      context.setStrokeStyle(gaugeOption.splitLine.color);\r\n      context.setLineWidth(1 * opts.pix);\r\n      context.moveTo(startX, 0);\r\n      context.lineTo(childendX, 0);\r\n      context.stroke();\r\n      context.rotate(childAngle * Math.PI);\r\n    }\r\n    context.restore();\r\n    //画指针\r\n    series = getGaugeDataPoints(series, categories, gaugeOption, process);\r\n    for (let i = 0; i < series.length; i++) {\r\n      let eachSeries = series[i];\r\n      context.save();\r\n      context.translate(centerPosition.x, centerPosition.y);\r\n      context.rotate((eachSeries._proportion_ - 1) * Math.PI);\r\n      context.beginPath();\r\n      context.setFillStyle(eachSeries.color);\r\n      context.moveTo(gaugeOption.pointer.width, 0);\r\n      context.lineTo(0, -gaugeOption.pointer.width / 2);\r\n      context.lineTo(-innerRadius, 0);\r\n      context.lineTo(0, gaugeOption.pointer.width / 2);\r\n      context.lineTo(gaugeOption.pointer.width, 0);\r\n      context.closePath();\r\n      context.fill();\r\n      context.beginPath();\r\n      context.setFillStyle('#FFFFFF');\r\n      context.arc(0, 0, gaugeOption.pointer.width / 6, 0, 2 * Math.PI, false);\r\n      context.fill();\r\n      context.restore();\r\n    }\r\n    if (opts.dataLabel !== false) {\r\n      drawGaugeLabel(gaugeOption, radius, centerPosition, opts, config, context);\r\n    }\r\n  }\r\n  //画仪表盘标题，副标题\r\n  drawRingTitle(opts, config, context, centerPosition);\r\n  if (process === 1 && opts.type === 'gauge') {\r\n    opts.extra.gauge.oldAngle = series[0]._proportion_;\r\n    opts.extra.gauge.oldData = series[0].data;\r\n  }\r\n  return {\r\n    center: centerPosition,\r\n    radius: radius,\r\n    innerRadius: innerRadius,\r\n    categories: categories,\r\n    totalAngle: totalAngle\r\n  };\r\n}\r\n\r\nfunction drawRadarDataPoints(series, opts, config, context) {\r\n  var process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  var radarOption = assign({}, {\r\n    gridColor: '#cccccc',\r\n    gridType: 'radar',\r\n    opacity: 0.2,\r\n    gridCount: 3,\r\n    border:false,\r\n    borderWidth:2\r\n  }, opts.extra.radar);\r\n  var coordinateAngle = getRadarCoordinateSeries(opts.categories.length);\r\n  var centerPosition = {\r\n    x: opts.area[3] + (opts.width - opts.area[1] - opts.area[3]) / 2,\r\n    y: opts.area[0] + (opts.height - opts.area[0] - opts.area[2]) / 2\r\n  };\r\n  var xr = (opts.width - opts.area[1] - opts.area[3]) / 2\r\n  var yr = (opts.height - opts.area[0] - opts.area[2]) / 2\r\n  var radius = Math.min(xr - (getMaxTextListLength(opts.categories, config.fontSize, context) + config.radarLabelTextMargin), yr - config.radarLabelTextMargin);\r\n  radius -= config.radarLabelTextMargin * opts.pix;\r\n  // 画分割线\r\n  context.beginPath();\r\n  context.setLineWidth(1 * opts.pix);\r\n  context.setStrokeStyle(radarOption.gridColor);\r\n  coordinateAngle.forEach(function(angle) {\r\n    var pos = convertCoordinateOrigin(radius * Math.cos(angle), radius * Math.sin(angle), centerPosition);\r\n    context.moveTo(centerPosition.x, centerPosition.y);\r\n    context.lineTo(pos.x, pos.y);\r\n  });\r\n  context.stroke();\r\n  context.closePath();\r\n  \r\n  // 画背景网格\r\n  var _loop = function _loop(i) {\r\n    var startPos = {};\r\n    context.beginPath();\r\n    context.setLineWidth(1 * opts.pix);\r\n    context.setStrokeStyle(radarOption.gridColor);\r\n    if (radarOption.gridType == 'radar') {\r\n      coordinateAngle.forEach(function(angle, index) {\r\n        var pos = convertCoordinateOrigin(radius / radarOption.gridCount * i * Math.cos(angle), radius /\r\n          radarOption.gridCount * i * Math.sin(angle), centerPosition);\r\n        if (index === 0) {\r\n          startPos = pos;\r\n          context.moveTo(pos.x, pos.y);\r\n        } else {\r\n          context.lineTo(pos.x, pos.y);\r\n        }\r\n      });\r\n      context.lineTo(startPos.x, startPos.y);\r\n    } else {\r\n      var pos = convertCoordinateOrigin(radius / radarOption.gridCount * i * Math.cos(1.5), radius / radarOption.gridCount * i * Math.sin(1.5), centerPosition);\r\n      context.arc(centerPosition.x, centerPosition.y, centerPosition.y - pos.y, 0, 2 * Math.PI, false);\r\n    }\r\n    context.stroke();\r\n    context.closePath();\r\n  };\r\n  for (var i = 1; i <= radarOption.gridCount; i++) {\r\n    _loop(i);\r\n  }\r\n  var radarDataPoints = getRadarDataPoints(coordinateAngle, centerPosition, radius, series, opts, process);\r\n  radarDataPoints.forEach(function(eachSeries, seriesIndex) {\r\n    // 绘制区域数据\r\n    context.beginPath();\r\n    context.setLineWidth(radarOption.borderWidth * opts.pix);\r\n    context.setStrokeStyle(eachSeries.color);\r\n    context.setFillStyle(hexToRgb(eachSeries.color, radarOption.opacity));\r\n    eachSeries.data.forEach(function(item, index) {\r\n      if (index === 0) {\r\n        context.moveTo(item.position.x, item.position.y);\r\n      } else {\r\n        context.lineTo(item.position.x, item.position.y);\r\n      }\r\n    });\r\n    context.closePath();\r\n    context.fill();\r\n    if(radarOption.border === true){\r\n      context.stroke();\r\n    }\r\n    context.closePath();\r\n    if (opts.dataPointShape !== false) {\r\n      var points = eachSeries.data.map(function(item) {\r\n        return item.position;\r\n      });\r\n      drawPointShape(points, eachSeries.color, eachSeries.pointShape, context, opts);\r\n    }\r\n  });\r\n  // draw label text\r\n  drawRadarLabel(coordinateAngle, radius, centerPosition, opts, config, context);\r\n  \r\n  // draw dataLabel\r\n  if (opts.dataLabel !== false && process === 1) {\r\n    radarDataPoints.forEach(function(eachSeries, seriesIndex) {\r\n      context.beginPath();\r\n      var fontSize = eachSeries.textSize * opts.pix || config.fontSize;\r\n      context.setFontSize(fontSize);\r\n      context.setFillStyle(eachSeries.textColor || opts.fontColor);\r\n      eachSeries.data.forEach(function(item, index) {\r\n        //如果是中心点垂直的上下点位\r\n        if(Math.abs(item.position.x - centerPosition.x)<2){\r\n          //如果在上面\r\n          if(item.position.y < centerPosition.y){\r\n            context.setTextAlign('center');\r\n            context.fillText(item.value, item.position.x, item.position.y - 4);\r\n          }else{\r\n            context.setTextAlign('center');\r\n            context.fillText(item.value, item.position.x, item.position.y + fontSize + 2);\r\n          }\r\n        }else{\r\n          //如果在左侧\r\n          if(item.position.x < centerPosition.x){\r\n            context.setTextAlign('right');\r\n            context.fillText(item.value, item.position.x - 4, item.position.y + fontSize / 2 - 2);\r\n          }else{\r\n            context.setTextAlign('left');\r\n            context.fillText(item.value, item.position.x + 4, item.position.y + fontSize / 2 - 2);\r\n          }\r\n        }\r\n      });\r\n      context.closePath();\r\n      context.stroke();\r\n    });\r\n    context.setTextAlign('left');\r\n  }\r\n  \r\n  return {\r\n    center: centerPosition,\r\n    radius: radius,\r\n    angleList: coordinateAngle\r\n  };\r\n}\r\n\r\nfunction normalInt(min, max, iter) {\r\n  iter = iter == 0 ? 1 : iter;\r\n  var arr = [];\r\n  for (var i = 0; i < iter; i++) {\r\n    arr[i] = Math.random();\r\n  };\r\n  return Math.floor(arr.reduce(function(i, j) {\r\n    return i + j\r\n  }) / iter * (max - min)) + min;\r\n};\r\n\r\nfunction collisionNew(area, points, width, height) {\r\n  var isIn = false;\r\n  for (let i = 0; i < points.length; i++) {\r\n    if (points[i].area) {\r\n      if (area[3] < points[i].area[1] || area[0] > points[i].area[2] || area[1] > points[i].area[3] || area[2] < points[i].area[0]) {\r\n        if (area[0] < 0 || area[1] < 0 || area[2] > width || area[3] > height) {\r\n          isIn = true;\r\n          break;\r\n        } else {\r\n          isIn = false;\r\n        }\r\n      } else {\r\n        isIn = true;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  return isIn;\r\n};\r\n\r\nfunction getBoundingBox(data) {\r\n  var bounds = {},coords;\r\n  bounds.xMin = 180;\r\n  bounds.xMax = 0;\r\n  bounds.yMin = 90;\r\n  bounds.yMax = 0\r\n  for (var i = 0; i < data.length; i++) {\r\n    var coorda = data[i].geometry.coordinates\r\n    for (var k = 0; k < coorda.length; k++) {\r\n      coords = coorda[k];\r\n      if (coords.length == 1) {\r\n        coords = coords[0]\r\n      }\r\n      for (var j = 0; j < coords.length; j++) {\r\n        var longitude = coords[j][0];\r\n        var latitude = coords[j][1];\r\n        var point = {\r\n          x: longitude,\r\n          y: latitude\r\n        }\r\n        bounds.xMin = bounds.xMin < point.x ? bounds.xMin : point.x;\r\n        bounds.xMax = bounds.xMax > point.x ? bounds.xMax : point.x;\r\n        bounds.yMin = bounds.yMin < point.y ? bounds.yMin : point.y;\r\n        bounds.yMax = bounds.yMax > point.y ? bounds.yMax : point.y;\r\n      }\r\n    }\r\n  }\r\n  return bounds;\r\n}\r\n\r\nfunction coordinateToPoint(latitude, longitude, bounds, scale, xoffset, yoffset) {\r\n  return {\r\n    x: (longitude - bounds.xMin) * scale + xoffset,\r\n    y: (bounds.yMax - latitude) * scale + yoffset\r\n  };\r\n}\r\n\r\nfunction pointToCoordinate(pointY, pointX, bounds, scale, xoffset, yoffset) {\r\n  return {\r\n    x: (pointX - xoffset) / scale + bounds.xMin,\r\n    y: bounds.yMax - (pointY - yoffset) / scale\r\n  };\r\n}\r\n\r\nfunction isRayIntersectsSegment(poi, s_poi, e_poi) {\r\n  if (s_poi[1] == e_poi[1]) {\r\n    return false;\r\n  }\r\n  if (s_poi[1] > poi[1] && e_poi[1] > poi[1]) {\r\n    return false;\r\n  }\r\n  if (s_poi[1] < poi[1] && e_poi[1] < poi[1]) {\r\n    return false;\r\n  }\r\n  if (s_poi[1] == poi[1] && e_poi[1] > poi[1]) {\r\n    return false;\r\n  }\r\n  if (e_poi[1] == poi[1] && s_poi[1] > poi[1]) {\r\n    return false;\r\n  }\r\n  if (s_poi[0] < poi[0] && e_poi[1] < poi[1]) {\r\n    return false;\r\n  }\r\n  let xseg = e_poi[0] - (e_poi[0] - s_poi[0]) * (e_poi[1] - poi[1]) / (e_poi[1] - s_poi[1]);\r\n  if (xseg < poi[0]) {\r\n    return false;\r\n  } else {\r\n    return true;\r\n  }\r\n}\r\n\r\nfunction isPoiWithinPoly(poi, poly, mercator) {\r\n  let sinsc = 0;\r\n  for (let i = 0; i < poly.length; i++) {\r\n    let epoly = poly[i][0];\r\n    if (poly.length == 1) {\r\n      epoly = poly[i][0]\r\n    }\r\n    for (let j = 0; j < epoly.length - 1; j++) {\r\n      let s_poi = epoly[j];\r\n      let e_poi = epoly[j + 1];\r\n      if (mercator) {\r\n        s_poi = lonlat2mercator(epoly[j][0], epoly[j][1]);\r\n        e_poi = lonlat2mercator(epoly[j + 1][0], epoly[j + 1][1]);\r\n      }\r\n      if (isRayIntersectsSegment(poi, s_poi, e_poi)) {\r\n        sinsc += 1;\r\n      }\r\n    }\r\n  }\r\n  if (sinsc % 2 == 1) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\n\r\nfunction drawMapDataPoints(series, opts, config, context) {\r\n  var mapOption = assign({}, {\r\n    border: true,\r\n    mercator: false,\r\n    borderWidth: 1,\r\n    borderColor: '#666666',\r\n    fillOpacity: 0.6,\r\n    activeBorderColor: '#f04864',\r\n    activeFillColor: '#facc14',\r\n    activeFillOpacity: 1\r\n  }, opts.extra.map);\r\n  var coords, point;\r\n  var data = series;\r\n  var bounds = getBoundingBox(data);\r\n  if (mapOption.mercator) {\r\n    var max = lonlat2mercator(bounds.xMax, bounds.yMax)\r\n    var min = lonlat2mercator(bounds.xMin, bounds.yMin)\r\n    bounds.xMax = max[0]\r\n    bounds.yMax = max[1]\r\n    bounds.xMin = min[0]\r\n    bounds.yMin = min[1]\r\n  }\r\n  var xScale = opts.width / Math.abs(bounds.xMax - bounds.xMin);\r\n  var yScale = opts.height / Math.abs(bounds.yMax - bounds.yMin);\r\n  var scale = xScale < yScale ? xScale : yScale;\r\n  var xoffset = opts.width / 2 - Math.abs(bounds.xMax - bounds.xMin) / 2 * scale;\r\n  var yoffset = opts.height / 2 - Math.abs(bounds.yMax - bounds.yMin) / 2 * scale;\r\n  for (var i = 0; i < data.length; i++) {\r\n    context.beginPath();\r\n    context.setLineWidth(mapOption.borderWidth * opts.pix);\r\n    context.setStrokeStyle(mapOption.borderColor);\r\n    context.setFillStyle(hexToRgb(series[i].color, mapOption.fillOpacity));\r\n    if (opts.tooltip) {\r\n      if (opts.tooltip.index == i) {\r\n        context.setStrokeStyle(mapOption.activeBorderColor);\r\n        context.setFillStyle(hexToRgb(mapOption.activeFillColor, mapOption.activeFillOpacity));\r\n      }\r\n    }\r\n    var coorda = data[i].geometry.coordinates\r\n    for (var k = 0; k < coorda.length; k++) {\r\n      coords = coorda[k];\r\n      if (coords.length == 1) {\r\n        coords = coords[0]\r\n      }\r\n      for (var j = 0; j < coords.length; j++) {\r\n        var gaosi = Array(2);\r\n        if (mapOption.mercator) {\r\n          gaosi = lonlat2mercator(coords[j][0], coords[j][1])\r\n        } else {\r\n          gaosi = coords[j]\r\n        }\r\n        point = coordinateToPoint(gaosi[1], gaosi[0], bounds, scale, xoffset, yoffset)\r\n        if (j === 0) {\r\n          context.beginPath();\r\n          context.moveTo(point.x, point.y);\r\n        } else {\r\n          context.lineTo(point.x, point.y);\r\n        }\r\n      }\r\n      context.fill();\r\n      if (mapOption.border == true) {\r\n        context.stroke();\r\n      }\r\n    }\r\n    if (opts.dataLabel == true) {\r\n      var centerPoint = data[i].properties.centroid;\r\n      if (centerPoint) {\r\n        if (mapOption.mercator) {\r\n          centerPoint = lonlat2mercator(data[i].properties.centroid[0], data[i].properties.centroid[1])\r\n        }\r\n        point = coordinateToPoint(centerPoint[1], centerPoint[0], bounds, scale, xoffset, yoffset);\r\n        let fontSize = data[i].textSize * opts.pix || config.fontSize;\r\n        let text = data[i].properties.name;\r\n        context.beginPath();\r\n        context.setFontSize(fontSize)\r\n        context.setFillStyle(data[i].textColor || opts.fontColor)\r\n        context.fillText(text, point.x - measureText(text, fontSize, context) / 2, point.y + fontSize / 2);\r\n        context.closePath();\r\n        context.stroke();\r\n      }\r\n    }\r\n  }\r\n  opts.chartData.mapData = {\r\n    bounds: bounds,\r\n    scale: scale,\r\n    xoffset: xoffset,\r\n    yoffset: yoffset,\r\n    mercator: mapOption.mercator\r\n  }\r\n  drawToolTipBridge(opts, config, context, 1);\r\n  context.draw();\r\n}\r\n\r\nfunction getWordCloudPoint(opts, type, context) {\r\n  let points = opts.series;\r\n  switch (type) {\r\n    case 'normal':\r\n      for (let i = 0; i < points.length; i++) {\r\n        let text = points[i].name;\r\n        let tHeight = points[i].textSize * opts.pix;\r\n        let tWidth = measureText(text, tHeight, context);\r\n        let x, y;\r\n        let area;\r\n        let breaknum = 0;\r\n        while (true) {\r\n          breaknum++;\r\n          x = normalInt(-opts.width / 2, opts.width / 2, 5) - tWidth / 2;\r\n          y = normalInt(-opts.height / 2, opts.height / 2, 5) + tHeight / 2;\r\n          area = [x - 5 + opts.width / 2, y - 5 - tHeight + opts.height / 2, x + tWidth + 5 + opts.width / 2, y + 5 +\r\n            opts.height / 2\r\n          ];\r\n          let isCollision = collisionNew(area, points, opts.width, opts.height);\r\n          if (!isCollision) break;\r\n          if (breaknum == 1000) {\r\n            area = [-100, -100, -100, -100];\r\n            break;\r\n          }\r\n        };\r\n        points[i].area = area;\r\n      }\r\n      break;\r\n    case 'vertical':\r\n      function Spin() {\r\n        //获取均匀随机值，是否旋转，旋转的概率为（1-0.5）\r\n        if (Math.random() > 0.7) {\r\n          return true;\r\n        } else {\r\n          return false\r\n        };\r\n      };\r\n      for (let i = 0; i < points.length; i++) {\r\n        let text = points[i].name;\r\n        let tHeight = points[i].textSize * opts.pix;\r\n        let tWidth = measureText(text, tHeight, context);\r\n        let isSpin = Spin();\r\n        let x, y, area, areav;\r\n        let breaknum = 0;\r\n        while (true) {\r\n          breaknum++;\r\n          let isCollision;\r\n          if (isSpin) {\r\n            x = normalInt(-opts.width / 2, opts.width / 2, 5) - tWidth / 2;\r\n            y = normalInt(-opts.height / 2, opts.height / 2, 5) + tHeight / 2;\r\n            area = [y - 5 - tWidth + opts.width / 2, (-x - 5 + opts.height / 2), y + 5 + opts.width / 2, (-x + tHeight + 5 + opts.height / 2)];\r\n            areav = [opts.width - (opts.width / 2 - opts.height / 2) - (-x + tHeight + 5 + opts.height / 2) - 5, (opts.height / 2 - opts.width / 2) + (y - 5 - tWidth + opts.width / 2) - 5, opts.width - (opts.width / 2 - opts.height / 2) - (-x + tHeight + 5 + opts.height / 2) + tHeight, (opts.height / 2 - opts.width / 2) + (y - 5 - tWidth + opts.width / 2) + tWidth + 5];\r\n            isCollision = collisionNew(areav, points, opts.height, opts.width);\r\n          } else {\r\n            x = normalInt(-opts.width / 2, opts.width / 2, 5) - tWidth / 2;\r\n            y = normalInt(-opts.height / 2, opts.height / 2, 5) + tHeight / 2;\r\n            area = [x - 5 + opts.width / 2, y - 5 - tHeight + opts.height / 2, x + tWidth + 5 + opts.width / 2, y + 5 + opts.height / 2];\r\n            isCollision = collisionNew(area, points, opts.width, opts.height);\r\n          }\r\n          if (!isCollision) break;\r\n          if (breaknum == 1000) {\r\n            area = [-1000, -1000, -1000, -1000];\r\n            break;\r\n          }\r\n        };\r\n        if (isSpin) {\r\n          points[i].area = areav;\r\n          points[i].areav = area;\r\n        } else {\r\n          points[i].area = area;\r\n        }\r\n        points[i].rotate = isSpin;\r\n      };\r\n      break;\r\n  }\r\n  return points;\r\n}\r\n\r\n\r\nfunction drawWordCloudDataPoints(series, opts, config, context) {\r\n  let process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  let wordOption = assign({}, {\r\n    type: 'normal',\r\n    autoColors: true\r\n  }, opts.extra.word);\r\n  if (!opts.chartData.wordCloudData) {\r\n    opts.chartData.wordCloudData = getWordCloudPoint(opts, wordOption.type, context);\r\n  }\r\n  context.beginPath();\r\n  context.setFillStyle(opts.background);\r\n  context.rect(0, 0, opts.width, opts.height);\r\n  context.fill();\r\n  context.save();\r\n  let points = opts.chartData.wordCloudData;\r\n  context.translate(opts.width / 2, opts.height / 2);\r\n  for (let i = 0; i < points.length; i++) {\r\n    context.save();\r\n    if (points[i].rotate) {\r\n      context.rotate(90 * Math.PI / 180);\r\n    }\r\n    let text = points[i].name;\r\n    let tHeight = points[i].textSize * opts.pix;\r\n    let tWidth = measureText(text, tHeight, context);\r\n    context.beginPath();\r\n    context.setStrokeStyle(points[i].color);\r\n    context.setFillStyle(points[i].color);\r\n    context.setFontSize(tHeight);\r\n    if (points[i].rotate) {\r\n      if (points[i].areav[0] > 0) {\r\n        if (opts.tooltip) {\r\n          if (opts.tooltip.index == i) {\r\n            context.strokeText(text, (points[i].areav[0] + 5 - opts.width / 2) * process - tWidth * (1 - process) / 2, (points[i].areav[1] + 5 + tHeight - opts.height / 2) * process);\r\n          } else {\r\n            context.fillText(text, (points[i].areav[0] + 5 - opts.width / 2) * process - tWidth * (1 - process) / 2, (points[i].areav[1] + 5 + tHeight - opts.height / 2) * process);\r\n          }\r\n        } else {\r\n          context.fillText(text, (points[i].areav[0] + 5 - opts.width / 2) * process - tWidth * (1 - process) / 2, (points[i].areav[1] + 5 + tHeight - opts.height / 2) * process);\r\n        }\r\n      }\r\n    } else {\r\n      if (points[i].area[0] > 0) {\r\n        if (opts.tooltip) {\r\n          if (opts.tooltip.index == i) {\r\n            context.strokeText(text, (points[i].area[0] + 5 - opts.width / 2) * process - tWidth * (1 - process) / 2, (points[i].area[1] + 5 + tHeight - opts.height / 2) * process);\r\n          } else {\r\n            context.fillText(text, (points[i].area[0] + 5 - opts.width / 2) * process - tWidth * (1 - process) / 2, (points[i].area[1] + 5 + tHeight - opts.height / 2) * process);\r\n          }\r\n        } else {\r\n          context.fillText(text, (points[i].area[0] + 5 - opts.width / 2) * process - tWidth * (1 - process) / 2, (points[i].area[1] + 5 + tHeight - opts.height / 2) * process);\r\n        }\r\n      }\r\n    }\r\n    context.stroke();\r\n    context.restore();\r\n  }\r\n  context.restore();\r\n}\r\n\r\nfunction drawFunnelDataPoints(series, opts, config, context) {\r\n  let process = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\r\n  let funnelOption = assign({}, {\r\n    type:'funnel',\r\n    activeWidth: 10,\r\n    activeOpacity: 0.3,\r\n    border: false,\r\n    borderWidth: 2,\r\n    borderColor: '#FFFFFF',\r\n    fillOpacity: 1,\r\n    labelAlign: 'right',\r\n    linearType: 'none',\r\n    customColor: [],\r\n  }, opts.extra.funnel);\r\n  let eachSpacing = (opts.height - opts.area[0] - opts.area[2]) / series.length;\r\n  let centerPosition = {\r\n    x: opts.area[3] + (opts.width - opts.area[1] - opts.area[3]) / 2,\r\n    y: opts.height - opts.area[2]\r\n  };\r\n  let activeWidth = funnelOption.activeWidth * opts.pix;\r\n  let radius = Math.min((opts.width - opts.area[1] - opts.area[3]) / 2 - activeWidth, (opts.height - opts.area[0] - opts.area[2]) / 2 - activeWidth);\r\n  series = getFunnelDataPoints(series, radius, funnelOption.type, eachSpacing, process);\r\n  context.save();\r\n  context.translate(centerPosition.x, centerPosition.y);\r\n  funnelOption.customColor = fillCustomColor(funnelOption.linearType, funnelOption.customColor, series, config);\r\n  if(funnelOption.type == 'pyramid'){\r\n    for (let i = 0; i < series.length; i++) {\r\n      if (i == series.length -1) {\r\n        if (opts.tooltip) {\r\n          if (opts.tooltip.index == i) {\r\n            context.beginPath();\r\n            context.setFillStyle(hexToRgb(series[i].color, funnelOption.activeOpacity));\r\n            context.moveTo(-activeWidth, -eachSpacing);\r\n            context.lineTo(-series[i].radius - activeWidth, 0);\r\n            context.lineTo(series[i].radius + activeWidth, 0);\r\n            context.lineTo(activeWidth, -eachSpacing);\r\n            context.lineTo(-activeWidth, -eachSpacing);\r\n            context.closePath();\r\n            context.fill();\r\n          }\r\n        }\r\n        series[i].funnelArea = [centerPosition.x - series[i].radius, centerPosition.y - eachSpacing * (i + 1), centerPosition.x + series[i].radius, centerPosition.y - eachSpacing * i];\r\n        context.beginPath();\r\n        context.setLineWidth(funnelOption.borderWidth * opts.pix);\r\n        context.setStrokeStyle(funnelOption.borderColor);\r\n        var fillColor = hexToRgb(series[i].color, funnelOption.fillOpacity);\r\n        if (funnelOption.linearType == 'custom') {\r\n          var grd = context.createLinearGradient(series[i].radius, -eachSpacing, -series[i].radius, -eachSpacing);\r\n          grd.addColorStop(0, hexToRgb(series[i].color, funnelOption.fillOpacity));\r\n          grd.addColorStop(0.5, hexToRgb(funnelOption.customColor[series[i].linearIndex], funnelOption.fillOpacity));\r\n          grd.addColorStop(1, hexToRgb(series[i].color, funnelOption.fillOpacity));\r\n          fillColor = grd\r\n        }\r\n        context.setFillStyle(fillColor);\r\n        context.moveTo(0, -eachSpacing);\r\n        context.lineTo(-series[i].radius, 0);\r\n        context.lineTo(series[i].radius, 0);\r\n        context.lineTo(0, -eachSpacing);\r\n        context.closePath();\r\n        context.fill();\r\n        if (funnelOption.border == true) {\r\n          context.stroke();\r\n        }\r\n      } else {\r\n        if (opts.tooltip) {\r\n          if (opts.tooltip.index == i) {\r\n            context.beginPath();\r\n            context.setFillStyle(hexToRgb(series[i].color, funnelOption.activeOpacity));\r\n            context.moveTo(0, 0);\r\n            context.lineTo(-series[i].radius - activeWidth, 0);\r\n            context.lineTo(-series[i + 1].radius - activeWidth, -eachSpacing);\r\n            context.lineTo(series[i + 1].radius + activeWidth, -eachSpacing);\r\n            context.lineTo(series[i].radius + activeWidth, 0);\r\n            context.lineTo(0, 0);\r\n            context.closePath();\r\n            context.fill();\r\n          }\r\n        }\r\n        series[i].funnelArea = [centerPosition.x - series[i].radius, centerPosition.y - eachSpacing * (i + 1), centerPosition.x + series[i].radius, centerPosition.y - eachSpacing * i];\r\n        context.beginPath();\r\n        context.setLineWidth(funnelOption.borderWidth * opts.pix);\r\n        context.setStrokeStyle(funnelOption.borderColor);\r\n        var fillColor = hexToRgb(series[i].color, funnelOption.fillOpacity);\r\n        if (funnelOption.linearType == 'custom') {\r\n          var grd = context.createLinearGradient(series[i].radius, -eachSpacing, -series[i].radius, -eachSpacing);\r\n          grd.addColorStop(0, hexToRgb(series[i].color, funnelOption.fillOpacity));\r\n          grd.addColorStop(0.5, hexToRgb(funnelOption.customColor[series[i].linearIndex], funnelOption.fillOpacity));\r\n          grd.addColorStop(1, hexToRgb(series[i].color, funnelOption.fillOpacity));\r\n          fillColor = grd\r\n        }\r\n        context.setFillStyle(fillColor);\r\n        context.moveTo(0, 0);\r\n        context.lineTo(-series[i].radius, 0);\r\n        context.lineTo(-series[i + 1].radius, -eachSpacing);\r\n        context.lineTo(series[i + 1].radius, -eachSpacing);\r\n        context.lineTo(series[i].radius, 0);\r\n        context.lineTo(0, 0);\r\n        context.closePath();\r\n        context.fill();\r\n        if (funnelOption.border == true) {\r\n          context.stroke();\r\n        }\r\n      }\r\n      context.translate(0, -eachSpacing)\r\n    }\r\n  }else{\r\n    for (let i = 0; i < series.length; i++) {\r\n      if (i == 0) {\r\n        if (opts.tooltip) {\r\n          if (opts.tooltip.index == i) {\r\n            context.beginPath();\r\n            context.setFillStyle(hexToRgb(series[i].color, funnelOption.activeOpacity));\r\n            context.moveTo(-activeWidth, 0);\r\n            context.lineTo(-series[i].radius - activeWidth, -eachSpacing);\r\n            context.lineTo(series[i].radius + activeWidth, -eachSpacing);\r\n            context.lineTo(activeWidth, 0);\r\n            context.lineTo(-activeWidth, 0);\r\n            context.closePath();\r\n            context.fill();\r\n          }\r\n        }\r\n        series[i].funnelArea = [centerPosition.x - series[i].radius, centerPosition.y - eachSpacing, centerPosition.x + series[i].radius, centerPosition.y];\r\n        context.beginPath();\r\n        context.setLineWidth(funnelOption.borderWidth * opts.pix);\r\n        context.setStrokeStyle(funnelOption.borderColor);\r\n        var fillColor = hexToRgb(series[i].color, funnelOption.fillOpacity);\r\n        if (funnelOption.linearType == 'custom') {\r\n          var grd = context.createLinearGradient(series[i].radius, -eachSpacing, -series[i].radius, -eachSpacing);\r\n          grd.addColorStop(0, hexToRgb(series[i].color, funnelOption.fillOpacity));\r\n          grd.addColorStop(0.5, hexToRgb(funnelOption.customColor[series[i].linearIndex], funnelOption.fillOpacity));\r\n          grd.addColorStop(1, hexToRgb(series[i].color, funnelOption.fillOpacity));\r\n          fillColor = grd\r\n        }\r\n        context.setFillStyle(fillColor);\r\n        context.moveTo(0, 0);\r\n        context.lineTo(-series[i].radius, -eachSpacing);\r\n        context.lineTo(series[i].radius, -eachSpacing);\r\n        context.lineTo(0, 0);\r\n        context.closePath();\r\n        context.fill();\r\n        if (funnelOption.border == true) {\r\n          context.stroke();\r\n        }\r\n      } else {\r\n        if (opts.tooltip) {\r\n          if (opts.tooltip.index == i) {\r\n            context.beginPath();\r\n            context.setFillStyle(hexToRgb(series[i].color, funnelOption.activeOpacity));\r\n            context.moveTo(0, 0);\r\n            context.lineTo(-series[i - 1].radius - activeWidth, 0);\r\n            context.lineTo(-series[i].radius - activeWidth, -eachSpacing);\r\n            context.lineTo(series[i].radius + activeWidth, -eachSpacing);\r\n            context.lineTo(series[i - 1].radius + activeWidth, 0);\r\n            context.lineTo(0, 0);\r\n            context.closePath();\r\n            context.fill();\r\n          }\r\n        }\r\n        series[i].funnelArea = [centerPosition.x - series[i].radius, centerPosition.y - eachSpacing * (i + 1), centerPosition.x + series[i].radius, centerPosition.y - eachSpacing * i];\r\n        context.beginPath();\r\n        context.setLineWidth(funnelOption.borderWidth * opts.pix);\r\n        context.setStrokeStyle(funnelOption.borderColor);\r\n        var fillColor = hexToRgb(series[i].color, funnelOption.fillOpacity);\r\n        if (funnelOption.linearType == 'custom') {\r\n          var grd = context.createLinearGradient(series[i].radius, -eachSpacing, -series[i].radius, -eachSpacing);\r\n          grd.addColorStop(0, hexToRgb(series[i].color, funnelOption.fillOpacity));\r\n          grd.addColorStop(0.5, hexToRgb(funnelOption.customColor[series[i].linearIndex], funnelOption.fillOpacity));\r\n          grd.addColorStop(1, hexToRgb(series[i].color, funnelOption.fillOpacity));\r\n          fillColor = grd\r\n        }\r\n        context.setFillStyle(fillColor);\r\n        context.moveTo(0, 0);\r\n        context.lineTo(-series[i - 1].radius, 0);\r\n        context.lineTo(-series[i].radius, -eachSpacing);\r\n        context.lineTo(series[i].radius, -eachSpacing);\r\n        context.lineTo(series[i - 1].radius, 0);\r\n        context.lineTo(0, 0);\r\n        context.closePath();\r\n        context.fill();\r\n        if (funnelOption.border == true) {\r\n          context.stroke();\r\n        }\r\n      }\r\n      context.translate(0, -eachSpacing)\r\n    }\r\n  }\r\n  \r\n  context.restore();\r\n  if (opts.dataLabel !== false && process === 1) {\r\n    drawFunnelText(series, opts, context, eachSpacing, funnelOption.labelAlign, activeWidth, centerPosition);\r\n  }\r\n  return {\r\n    center: centerPosition,\r\n    radius: radius,\r\n    series: series\r\n  };\r\n}\r\n\r\nfunction drawFunnelText(series, opts, context, eachSpacing, labelAlign, activeWidth, centerPosition) {\r\n  for (let i = 0; i < series.length; i++) {\r\n    let item = series[i];\r\n    let startX, endX, startY, fontSize;\r\n    let text = item.formatter ? item.formatter(item,i,series) : util.toFixed(item._proportion_ * 100) + '%';\r\n    if (labelAlign == 'right') {\r\n      if(opts.extra.funnel.type === 'pyramid'){\r\n        if (i == series.length -1) {\r\n          startX = (item.funnelArea[2] + centerPosition.x) / 2;\r\n        } else {\r\n          startX = (item.funnelArea[2] + series[i + 1].funnelArea[2]) / 2;\r\n        }\r\n      }else{\r\n        if (i == 0) {\r\n          startX = (item.funnelArea[2] + centerPosition.x) / 2;\r\n        } else {\r\n          startX = (item.funnelArea[2] + series[i - 1].funnelArea[2]) / 2;\r\n        }\r\n      }\r\n      endX = startX + activeWidth * 2;\r\n      startY = item.funnelArea[1] + eachSpacing / 2;\r\n      fontSize = item.textSize * opts.pix || opts.fontSize * opts.pix;\r\n      context.setLineWidth(1 * opts.pix);\r\n      context.setStrokeStyle(item.color);\r\n      context.setFillStyle(item.color);\r\n      context.beginPath();\r\n      context.moveTo(startX, startY);\r\n      context.lineTo(endX, startY);\r\n      context.stroke();\r\n      context.closePath();\r\n      context.beginPath();\r\n      context.moveTo(endX, startY);\r\n      context.arc(endX, startY, 2, 0, 2 * Math.PI);\r\n      context.closePath();\r\n      context.fill();\r\n      context.beginPath();\r\n      context.setFontSize(fontSize);\r\n      context.setFillStyle(item.textColor || opts.fontColor);\r\n      context.fillText(text, endX + 5, startY + fontSize / 2 - 2);\r\n      context.closePath();\r\n      context.stroke();\r\n      context.closePath();\r\n    } else {\r\n      if(opts.extra.funnel.type === 'pyramid'){\r\n        if (i == series.length -1) {\r\n          startX = (item.funnelArea[0] + centerPosition.x) / 2;\r\n        } else {\r\n          startX = (item.funnelArea[0] + series[i + 1].funnelArea[0]) / 2;\r\n        }\r\n      }else{\r\n        if (i == 0) {\r\n          startX = (item.funnelArea[0] + centerPosition.x) / 2;\r\n        } else {\r\n          startX = (item.funnelArea[0] + series[i - 1].funnelArea[0]) / 2;\r\n        }\r\n      }\r\n      endX = startX - activeWidth * 2;\r\n      startY = item.funnelArea[1] + eachSpacing / 2;\r\n      fontSize = item.textSize * opts.pix || opts.fontSize * opts.pix;\r\n      context.setLineWidth(1 * opts.pix);\r\n      context.setStrokeStyle(item.color);\r\n      context.setFillStyle(item.color);\r\n      context.beginPath();\r\n      context.moveTo(startX, startY);\r\n      context.lineTo(endX, startY);\r\n      context.stroke();\r\n      context.closePath();\r\n      context.beginPath();\r\n      context.moveTo(endX, startY);\r\n      context.arc(endX, startY, 2, 0, 2 * Math.PI);\r\n      context.closePath();\r\n      context.fill();\r\n      context.beginPath();\r\n      context.setFontSize(fontSize);\r\n      context.setFillStyle(item.textColor || opts.fontColor);\r\n      context.fillText(text, endX - 5 - measureText(text, fontSize, context), startY + fontSize / 2 - 2);\r\n      context.closePath();\r\n      context.stroke();\r\n      context.closePath();\r\n    }\r\n\r\n  }\r\n}\r\n\r\nfunction drawCanvas(opts, context) {\r\n  context.draw();\r\n}\r\n\r\nvar Timing = {\r\n  easeIn: function easeIn(pos) {\r\n    return Math.pow(pos, 3);\r\n  },\r\n  easeOut: function easeOut(pos) {\r\n    return Math.pow(pos - 1, 3) + 1;\r\n  },\r\n  easeInOut: function easeInOut(pos) {\r\n    if ((pos /= 0.5) < 1) {\r\n      return 0.5 * Math.pow(pos, 3);\r\n    } else {\r\n      return 0.5 * (Math.pow(pos - 2, 3) + 2);\r\n    }\r\n  },\r\n  linear: function linear(pos) {\r\n    return pos;\r\n  }\r\n};\r\n\r\nfunction Animation(opts) {\r\n  this.isStop = false;\r\n  opts.duration = typeof opts.duration === 'undefined' ? 1000 : opts.duration;\r\n  opts.timing = opts.timing || 'easeInOut';\r\n  var delay = 17;\r\n  function createAnimationFrame() {\r\n    if (typeof setTimeout !== 'undefined') {\r\n      return function(step, delay) {\r\n        setTimeout(function() {\r\n          var timeStamp = +new Date();\r\n          step(timeStamp);\r\n        }, delay);\r\n      };\r\n    } else if (typeof requestAnimationFrame !== 'undefined') {\r\n      return requestAnimationFrame;\r\n    } else {\r\n      return function(step) {\r\n        step(null);\r\n      };\r\n    }\r\n  };\r\n  var animationFrame = createAnimationFrame();\r\n  var startTimeStamp = null;\r\n  var _step = function step(timestamp) {\r\n    if (timestamp === null || this.isStop === true) {\r\n      opts.onProcess && opts.onProcess(1);\r\n      opts.onAnimationFinish && opts.onAnimationFinish();\r\n      return;\r\n    }\r\n    if (startTimeStamp === null) {\r\n      startTimeStamp = timestamp;\r\n    }\r\n    if (timestamp - startTimeStamp < opts.duration) {\r\n      var process = (timestamp - startTimeStamp) / opts.duration;\r\n      var timingFunction = Timing[opts.timing];\r\n      process = timingFunction(process);\r\n      opts.onProcess && opts.onProcess(process);\r\n      animationFrame(_step, delay);\r\n    } else {\r\n      opts.onProcess && opts.onProcess(1);\r\n      opts.onAnimationFinish && opts.onAnimationFinish();\r\n    }\r\n  };\r\n  _step = _step.bind(this);\r\n  animationFrame(_step, delay);\r\n}\r\n\r\nAnimation.prototype.stop = function() {\r\n  this.isStop = true;\r\n};\r\n\r\nfunction drawCharts(type, opts, config, context) {\r\n  var _this = this;\r\n  var series = opts.series;\r\n  //兼容ECharts饼图类数据格式\r\n  if (type === 'pie' || type === 'ring' || type === 'rose' || type === 'funnel') {\r\n    series = fixPieSeries(series, opts, config);\r\n  }\r\n  var categories = opts.categories;\r\n  series = fillSeries(series, opts, config);\r\n  var duration = opts.animation ? opts.duration : 0;\r\n  _this.animationInstance && _this.animationInstance.stop();\r\n  var seriesMA = null;\r\n  if (type == 'candle') {\r\n    let average = assign({}, opts.extra.candle.average);\r\n    if (average.show) {\r\n      seriesMA = calCandleMA(average.day, average.name, average.color, series[0].data);\r\n      seriesMA = fillSeries(seriesMA, opts, config);\r\n      opts.seriesMA = seriesMA;\r\n    } else if (opts.seriesMA) {\r\n      seriesMA = opts.seriesMA = fillSeries(opts.seriesMA, opts, config);\r\n    } else {\r\n      seriesMA = series;\r\n    }\r\n  } else {\r\n    seriesMA = series;\r\n  }\r\n  /* 过滤掉show=false的series */\r\n  opts._series_ = series = filterSeries(series);\r\n  //重新计算图表区域\r\n  opts.area = new Array(4);\r\n  //复位绘图区域\r\n  for (let j = 0; j < 4; j++) {\r\n    opts.area[j] = opts.padding[j] * opts.pix;\r\n  }\r\n  //通过计算三大区域：图例、X轴、Y轴的大小，确定绘图区域\r\n  var _calLegendData = calLegendData(seriesMA, opts, config, opts.chartData, context),\r\n    legendHeight = _calLegendData.area.wholeHeight,\r\n    legendWidth = _calLegendData.area.wholeWidth;\r\n\r\n  switch (opts.legend.position) {\r\n    case 'top':\r\n      opts.area[0] += legendHeight;\r\n      break;\r\n    case 'bottom':\r\n      opts.area[2] += legendHeight;\r\n      break;\r\n    case 'left':\r\n      opts.area[3] += legendWidth;\r\n      break;\r\n    case 'right':\r\n      opts.area[1] += legendWidth;\r\n      break;\r\n  }\r\n\r\n  let _calYAxisData = {},\r\n    yAxisWidth = 0;\r\n  if (opts.type === 'line' || opts.type === 'column' || opts.type === 'area' || opts.type === 'mix' || opts.type === 'candle' || opts.type === 'scatter'  || opts.type === 'bubble' || opts.type === 'bar') {\r\n      _calYAxisData = calYAxisData(series, opts, config, context);\r\n      yAxisWidth = _calYAxisData.yAxisWidth;\r\n    //如果显示Y轴标题\r\n    if (opts.yAxis.showTitle) {\r\n      let maxTitleHeight = 0;\r\n      for (let i = 0; i < opts.yAxis.data.length; i++) {\r\n        maxTitleHeight = Math.max(maxTitleHeight, opts.yAxis.data[i].titleFontSize ? opts.yAxis.data[i].titleFontSize * opts.pix : config.fontSize)\r\n      }\r\n      opts.area[0] += maxTitleHeight;\r\n    }\r\n    let rightIndex = 0,\r\n      leftIndex = 0;\r\n    //计算主绘图区域左右位置\r\n    for (let i = 0; i < yAxisWidth.length; i++) {\r\n      if (yAxisWidth[i].position == 'left') {\r\n        if (leftIndex > 0) {\r\n          opts.area[3] += yAxisWidth[i].width + opts.yAxis.padding * opts.pix;\r\n        } else {\r\n          opts.area[3] += yAxisWidth[i].width;\r\n        }\r\n        leftIndex += 1;\r\n      } else if (yAxisWidth[i].position == 'right') {\r\n        if (rightIndex > 0) {\r\n          opts.area[1] += yAxisWidth[i].width + opts.yAxis.padding * opts.pix;\r\n        } else {\r\n          opts.area[1] += yAxisWidth[i].width;\r\n        }\r\n        rightIndex += 1;\r\n      }\r\n    }\r\n  } else {\r\n    config.yAxisWidth = yAxisWidth;\r\n  }\r\n  opts.chartData.yAxisData = _calYAxisData;\r\n\r\n  if (opts.categories && opts.categories.length && opts.type !== 'radar' && opts.type !== 'gauge' && opts.type !== 'bar') {\r\n    opts.chartData.xAxisData = getXAxisPoints(opts.categories, opts, config);\r\n    let _calCategoriesData = calCategoriesData(opts.categories, opts, config, opts.chartData.xAxisData.eachSpacing, context),\r\n      xAxisHeight = _calCategoriesData.xAxisHeight,\r\n      angle = _calCategoriesData.angle;\r\n    config.xAxisHeight = xAxisHeight;\r\n    config._xAxisTextAngle_ = angle;\r\n    opts.area[2] += xAxisHeight;\r\n    opts.chartData.categoriesData = _calCategoriesData;\r\n  } else {\r\n    if (opts.type === 'line' || opts.type === 'area' || opts.type === 'scatter' || opts.type === 'bubble' || opts.type === 'bar') {\r\n      opts.chartData.xAxisData = calXAxisData(series, opts, config, context);\r\n      categories = opts.chartData.xAxisData.rangesFormat;\r\n      let _calCategoriesData = calCategoriesData(categories, opts, config, opts.chartData.xAxisData.eachSpacing, context),\r\n        xAxisHeight = _calCategoriesData.xAxisHeight,\r\n        angle = _calCategoriesData.angle;\r\n      config.xAxisHeight = xAxisHeight;\r\n      config._xAxisTextAngle_ = angle;\r\n      opts.area[2] += xAxisHeight;\r\n      opts.chartData.categoriesData = _calCategoriesData;\r\n    } else {\r\n      opts.chartData.xAxisData = {\r\n        xAxisPoints: []\r\n      };\r\n    }\r\n  }\r\n  //计算右对齐偏移距离\r\n  if (opts.enableScroll && opts.xAxis.scrollAlign == 'right' && opts._scrollDistance_ === undefined) {\r\n    let offsetLeft = 0,\r\n      xAxisPoints = opts.chartData.xAxisData.xAxisPoints,\r\n      startX = opts.chartData.xAxisData.startX,\r\n      endX = opts.chartData.xAxisData.endX,\r\n      eachSpacing = opts.chartData.xAxisData.eachSpacing;\r\n    let totalWidth = eachSpacing * (xAxisPoints.length - 1);\r\n    let screenWidth = endX - startX;\r\n    offsetLeft = screenWidth - totalWidth;\r\n    _this.scrollOption = {\r\n      currentOffset: offsetLeft,\r\n      startTouchX: offsetLeft,\r\n      distance: 0,\r\n      lastMoveTime: 0\r\n    };\r\n    opts._scrollDistance_ = offsetLeft;\r\n  }\r\n\r\n  if (type === 'pie' || type === 'ring' || type === 'rose') {\r\n    config._pieTextMaxLength_ = opts.dataLabel === false ? 0 : getPieTextMaxLength(seriesMA, config, context, opts);\r\n  }\r\n  switch (type) {\r\n    case 'word':\r\n      this.animationInstance = new Animation({\r\n        timing: opts.timing,\r\n        duration: duration,\r\n        onProcess: function(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          drawWordCloudDataPoints(series, opts, config, context, process);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.uevent.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n    case 'map':\r\n      context.clearRect(0, 0, opts.width, opts.height);\r\n      drawMapDataPoints(series, opts, config, context);\r\n      break;\r\n    case 'funnel':\r\n      this.animationInstance = new Animation({\r\n        timing: opts.timing,\r\n        duration: duration,\r\n        onProcess: function(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          opts.chartData.funnelData = drawFunnelDataPoints(series, opts, config, context, process);\r\n          drawLegend(opts.series, opts, config, context, opts.chartData);\r\n          drawToolTipBridge(opts, config, context, process);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.uevent.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n    case 'line':\r\n      this.animationInstance = new Animation({\r\n        timing: opts.timing,\r\n        duration: duration,\r\n        onProcess: function onProcess(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          drawYAxisGrid(categories, opts, config, context);\r\n          drawXAxis(categories, opts, config, context);\r\n          var _drawLineDataPoints = drawLineDataPoints(series, opts, config, context, process),\r\n            xAxisPoints = _drawLineDataPoints.xAxisPoints,\r\n            calPoints = _drawLineDataPoints.calPoints,\r\n            eachSpacing = _drawLineDataPoints.eachSpacing;\r\n          opts.chartData.xAxisPoints = xAxisPoints;\r\n          opts.chartData.calPoints = calPoints;\r\n          opts.chartData.eachSpacing = eachSpacing;\r\n          drawYAxis(series, opts, config, context);\r\n          if (opts.enableMarkLine !== false && process === 1) {\r\n            drawMarkLine(opts, config, context);\r\n          }\r\n          drawLegend(opts.series, opts, config, context, opts.chartData);\r\n          drawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.uevent.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n    case 'scatter':\r\n      this.animationInstance = new Animation({\r\n        timing: opts.timing,\r\n        duration: duration,\r\n        onProcess: function onProcess(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          drawYAxisGrid(categories, opts, config, context);\r\n          drawXAxis(categories, opts, config, context);\r\n          var _drawScatterDataPoints = drawScatterDataPoints(series, opts, config, context, process),\r\n            xAxisPoints = _drawScatterDataPoints.xAxisPoints,\r\n            calPoints = _drawScatterDataPoints.calPoints,\r\n            eachSpacing = _drawScatterDataPoints.eachSpacing;\r\n          opts.chartData.xAxisPoints = xAxisPoints;\r\n          opts.chartData.calPoints = calPoints;\r\n          opts.chartData.eachSpacing = eachSpacing;\r\n          drawYAxis(series, opts, config, context);\r\n          if (opts.enableMarkLine !== false && process === 1) {\r\n            drawMarkLine(opts, config, context);\r\n          }\r\n          drawLegend(opts.series, opts, config, context, opts.chartData);\r\n          drawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.uevent.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n    case 'bubble':\r\n      this.animationInstance = new Animation({\r\n        timing: opts.timing,\r\n        duration: duration,\r\n        onProcess: function onProcess(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          drawYAxisGrid(categories, opts, config, context);\r\n          drawXAxis(categories, opts, config, context);\r\n          var _drawBubbleDataPoints = drawBubbleDataPoints(series, opts, config, context, process),\r\n            xAxisPoints = _drawBubbleDataPoints.xAxisPoints,\r\n            calPoints = _drawBubbleDataPoints.calPoints,\r\n            eachSpacing = _drawBubbleDataPoints.eachSpacing;\r\n          opts.chartData.xAxisPoints = xAxisPoints;\r\n          opts.chartData.calPoints = calPoints;\r\n          opts.chartData.eachSpacing = eachSpacing;\r\n          drawYAxis(series, opts, config, context);\r\n          if (opts.enableMarkLine !== false && process === 1) {\r\n            drawMarkLine(opts, config, context);\r\n          }\r\n          drawLegend(opts.series, opts, config, context, opts.chartData);\r\n          drawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.uevent.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n    case 'mix':\r\n      this.animationInstance = new Animation({\r\n        timing: opts.timing,\r\n        duration: duration,\r\n        onProcess: function onProcess(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          drawYAxisGrid(categories, opts, config, context);\r\n          drawXAxis(categories, opts, config, context);\r\n          var _drawMixDataPoints = drawMixDataPoints(series, opts, config, context, process),\r\n            xAxisPoints = _drawMixDataPoints.xAxisPoints,\r\n            calPoints = _drawMixDataPoints.calPoints,\r\n            eachSpacing = _drawMixDataPoints.eachSpacing;\r\n          opts.chartData.xAxisPoints = xAxisPoints;\r\n          opts.chartData.calPoints = calPoints;\r\n          opts.chartData.eachSpacing = eachSpacing;\r\n          drawYAxis(series, opts, config, context);\r\n          if (opts.enableMarkLine !== false && process === 1) {\r\n            drawMarkLine(opts, config, context);\r\n          }\r\n          drawLegend(opts.series, opts, config, context, opts.chartData);\r\n          drawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.uevent.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n    case 'column':\r\n      this.animationInstance = new Animation({\r\n        timing: opts.timing,\r\n        duration: duration,\r\n        onProcess: function onProcess(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          drawYAxisGrid(categories, opts, config, context);\r\n          drawXAxis(categories, opts, config, context);\r\n          var _drawColumnDataPoints = drawColumnDataPoints(series, opts, config, context, process),\r\n            xAxisPoints = _drawColumnDataPoints.xAxisPoints,\r\n            calPoints = _drawColumnDataPoints.calPoints,\r\n            eachSpacing = _drawColumnDataPoints.eachSpacing;\r\n          opts.chartData.xAxisPoints = xAxisPoints;\r\n          opts.chartData.calPoints = calPoints;\r\n          opts.chartData.eachSpacing = eachSpacing;\r\n          drawYAxis(series, opts, config, context);\r\n          if (opts.enableMarkLine !== false && process === 1) {\r\n            drawMarkLine(opts, config, context);\r\n          }\r\n          drawLegend(opts.series, opts, config, context, opts.chartData);\r\n          drawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.uevent.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n    case 'bar':\r\n      this.animationInstance = new Animation({\r\n        timing: opts.timing,\r\n        duration: duration,\r\n        onProcess: function onProcess(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          drawXAxis(categories, opts, config, context);\r\n          var _drawBarDataPoints = drawBarDataPoints(series, opts, config, context, process),\r\n            yAxisPoints = _drawBarDataPoints.yAxisPoints,\r\n            calPoints = _drawBarDataPoints.calPoints,\r\n            eachSpacing = _drawBarDataPoints.eachSpacing;\r\n          opts.chartData.yAxisPoints = yAxisPoints;\r\n          opts.chartData.xAxisPoints = opts.chartData.xAxisData.xAxisPoints;\r\n          opts.chartData.calPoints = calPoints;\r\n          opts.chartData.eachSpacing = eachSpacing;\r\n          drawYAxis(series, opts, config, context);\r\n          if (opts.enableMarkLine !== false && process === 1) {\r\n            drawMarkLine(opts, config, context);\r\n          }\r\n          drawLegend(opts.series, opts, config, context, opts.chartData);\r\n          drawToolTipBridge(opts, config, context, process, eachSpacing, yAxisPoints);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.uevent.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n    case 'area':\r\n      this.animationInstance = new Animation({\r\n        timing: opts.timing,\r\n        duration: duration,\r\n        onProcess: function onProcess(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          drawYAxisGrid(categories, opts, config, context);\r\n          drawXAxis(categories, opts, config, context);\r\n          var _drawAreaDataPoints = drawAreaDataPoints(series, opts, config, context, process),\r\n            xAxisPoints = _drawAreaDataPoints.xAxisPoints,\r\n            calPoints = _drawAreaDataPoints.calPoints,\r\n            eachSpacing = _drawAreaDataPoints.eachSpacing;\r\n          opts.chartData.xAxisPoints = xAxisPoints;\r\n          opts.chartData.calPoints = calPoints;\r\n          opts.chartData.eachSpacing = eachSpacing;\r\n          drawYAxis(series, opts, config, context);\r\n          if (opts.enableMarkLine !== false && process === 1) {\r\n            drawMarkLine(opts, config, context);\r\n          }\r\n          drawLegend(opts.series, opts, config, context, opts.chartData);\r\n          drawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.uevent.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n    case 'ring':\r\n    case 'pie':\r\n      this.animationInstance = new Animation({\r\n        timing: opts.timing,\r\n        duration: duration,\r\n        onProcess: function onProcess(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          opts.chartData.pieData = drawPieDataPoints(series, opts, config, context, process);\r\n          drawLegend(opts.series, opts, config, context, opts.chartData);\r\n          drawToolTipBridge(opts, config, context, process);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.uevent.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n    case 'rose':\r\n      this.animationInstance = new Animation({\r\n        timing: opts.timing,\r\n        duration: duration,\r\n        onProcess: function onProcess(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          opts.chartData.pieData = drawRoseDataPoints(series, opts, config, context, process);\r\n          drawLegend(opts.series, opts, config, context, opts.chartData);\r\n          drawToolTipBridge(opts, config, context, process);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.uevent.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n    case 'radar':\r\n      this.animationInstance = new Animation({\r\n        timing: opts.timing,\r\n        duration: duration,\r\n        onProcess: function onProcess(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          opts.chartData.radarData = drawRadarDataPoints(series, opts, config, context, process);\r\n          drawLegend(opts.series, opts, config, context, opts.chartData);\r\n          drawToolTipBridge(opts, config, context, process);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.uevent.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n    case 'arcbar':\r\n      this.animationInstance = new Animation({\r\n        timing: opts.timing,\r\n        duration: duration,\r\n        onProcess: function onProcess(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          opts.chartData.arcbarData = drawArcbarDataPoints(series, opts, config, context, process);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.uevent.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n    case 'gauge':\r\n      this.animationInstance = new Animation({\r\n        timing: opts.timing,\r\n        duration: duration,\r\n        onProcess: function onProcess(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          opts.chartData.gaugeData = drawGaugeDataPoints(categories, series, opts, config, context, process);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.uevent.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n    case 'candle':\r\n      this.animationInstance = new Animation({\r\n        timing: opts.timing,\r\n        duration: duration,\r\n        onProcess: function onProcess(process) {\r\n          context.clearRect(0, 0, opts.width, opts.height);\r\n          if (opts.rotate) {\r\n            contextRotate(context, opts);\r\n          }\r\n          drawYAxisGrid(categories, opts, config, context);\r\n          drawXAxis(categories, opts, config, context);\r\n          var _drawCandleDataPoints = drawCandleDataPoints(series, seriesMA, opts, config, context, process),\r\n            xAxisPoints = _drawCandleDataPoints.xAxisPoints,\r\n            calPoints = _drawCandleDataPoints.calPoints,\r\n            eachSpacing = _drawCandleDataPoints.eachSpacing;\r\n          opts.chartData.xAxisPoints = xAxisPoints;\r\n          opts.chartData.calPoints = calPoints;\r\n          opts.chartData.eachSpacing = eachSpacing;\r\n          drawYAxis(series, opts, config, context);\r\n          if (opts.enableMarkLine !== false && process === 1) {\r\n            drawMarkLine(opts, config, context);\r\n          }\r\n          if (seriesMA) {\r\n            drawLegend(seriesMA, opts, config, context, opts.chartData);\r\n          } else {\r\n            drawLegend(opts.series, opts, config, context, opts.chartData);\r\n          }\r\n          drawToolTipBridge(opts, config, context, process, eachSpacing, xAxisPoints);\r\n          drawCanvas(opts, context);\r\n        },\r\n        onAnimationFinish: function onAnimationFinish() {\r\n          _this.uevent.trigger('renderComplete');\r\n        }\r\n      });\r\n      break;\r\n  }\r\n}\r\n\r\nfunction uChartsEvent() {\r\n  this.events = {};\r\n}\r\n\r\nuChartsEvent.prototype.addEventListener = function(type, listener) {\r\n  this.events[type] = this.events[type] || [];\r\n  this.events[type].push(listener);\r\n};\r\n\r\nuChartsEvent.prototype.delEventListener = function(type) {\r\n  this.events[type] = [];\r\n};\r\n\r\nuChartsEvent.prototype.trigger = function() {\r\n  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\r\n    args[_key] = arguments[_key];\r\n  }\r\n  var type = args[0];\r\n  var params = args.slice(1);\r\n  if (!!this.events[type]) {\r\n    this.events[type].forEach(function(listener) {\r\n      try {\r\n        listener.apply(null, params);\r\n      } catch (e) {\r\n          //console.log('[uCharts] '+e);\r\n      }\r\n    });\r\n  }\r\n};\r\n\r\nvar uCharts = function uCharts(opts) {\r\n  opts.pix = opts.pixelRatio ? opts.pixelRatio : 1;\r\n  opts.fontSize = opts.fontSize ? opts.fontSize : 13;\r\n  opts.fontColor = opts.fontColor ? opts.fontColor : config.fontColor;\r\n  if (opts.background == \"\" || opts.background == \"none\") {\r\n    opts.background = \"#FFFFFF\"\r\n  }\r\n  opts.title = assign({}, opts.title);\r\n  opts.subtitle = assign({}, opts.subtitle);\r\n  opts.duration = opts.duration ? opts.duration : 1000;\r\n  opts.yAxis = assign({}, {\r\n    data: [],\r\n    showTitle: false,\r\n    disabled: false,\r\n    disableGrid: false,\r\n    splitNumber: 5,\r\n    gridType: 'solid',\r\n    dashLength: 4 * opts.pix,\r\n    gridColor: '#cccccc',\r\n    padding: 10,\r\n    fontColor: '#666666'\r\n  }, opts.yAxis);\r\n  opts.xAxis = assign({}, {\r\n    rotateLabel: false,\r\n    disabled: false,\r\n    disableGrid: false,\r\n    splitNumber: 5,\r\n    calibration:false,\r\n    gridType: 'solid',\r\n    dashLength: 4,\r\n    scrollAlign: 'left',\r\n    boundaryGap: 'center',\r\n    axisLine: true,\r\n    axisLineColor: '#cccccc'\r\n  }, opts.xAxis);\r\n  opts.xAxis.scrollPosition = opts.xAxis.scrollAlign;\r\n  opts.legend = assign({}, {\r\n    show: true,\r\n    position: 'bottom',\r\n    float: 'center',\r\n    backgroundColor: 'rgba(0,0,0,0)',\r\n    borderColor: 'rgba(0,0,0,0)',\r\n    borderWidth: 0,\r\n    padding: 5,\r\n    margin: 5,\r\n    itemGap: 10,\r\n    fontSize: opts.fontSize,\r\n    lineHeight: opts.fontSize,\r\n    fontColor: opts.fontColor,\r\n    formatter: {},\r\n    hiddenColor: '#CECECE'\r\n  }, opts.legend);\r\n  opts.extra = assign({}, opts.extra);\r\n  opts.rotate = opts.rotate ? true : false;\r\n  opts.animation = opts.animation ? true : false;\r\n  opts.rotate = opts.rotate ? true : false;\r\n  opts.canvas2d = opts.canvas2d ? true : false;\r\n  \r\n  let config$$1 = JSON.parse(JSON.stringify(config));\r\n  config$$1.color = opts.color ? opts.color : config$$1.color;\r\n  config$$1.yAxisTitleWidth = opts.yAxis.disabled !== true && opts.yAxis.title ? config$$1.yAxisTitleWidth : 0;\r\n  if (opts.type == 'pie') {\r\n    config$$1.pieChartLinePadding = opts.dataLabel === false ? 0 : opts.extra.pie.labelWidth * opts.pix || config$$1.pieChartLinePadding * opts.pix;\r\n  }\r\n  if (opts.type == 'ring') {\r\n    config$$1.pieChartLinePadding = opts.dataLabel === false ? 0 : opts.extra.ring.labelWidth * opts.pix || config$$1.pieChartLinePadding * opts.pix;\r\n  }\r\n  if (opts.type == 'rose') {\r\n    config$$1.pieChartLinePadding = opts.dataLabel === false ? 0 : opts.extra.rose.labelWidth * opts.pix || config$$1.pieChartLinePadding * opts.pix;\r\n  }\r\n  config$$1.pieChartTextPadding = opts.dataLabel === false ? 0 : config$$1.pieChartTextPadding * opts.pix;\r\n  config$$1.yAxisSplit = opts.yAxis.splitNumber ? opts.yAxis.splitNumber : config.yAxisSplit;\r\n\r\n  //屏幕旋转\r\n  config$$1.rotate = opts.rotate;\r\n  if (opts.rotate) {\r\n    let tempWidth = opts.width;\r\n    let tempHeight = opts.height;\r\n    opts.width = tempHeight;\r\n    opts.height = tempWidth;\r\n  }\r\n\r\n  //适配高分屏\r\n  opts.padding = opts.padding ? opts.padding : config$$1.padding;\r\n  config$$1.yAxisWidth = config.yAxisWidth * opts.pix;\r\n  config$$1.xAxisHeight = config.xAxisHeight * opts.pix;\r\n  if (opts.enableScroll && opts.xAxis.scrollShow) {\r\n    config$$1.xAxisHeight += 6 * opts.pix;\r\n  }\r\n  config$$1.xAxisLineHeight = config.xAxisLineHeight * opts.pix;\r\n  config$$1.fontSize = opts.fontSize * opts.pix;\r\n  config$$1.titleFontSize = config.titleFontSize * opts.pix;\r\n  config$$1.subtitleFontSize = config.subtitleFontSize * opts.pix;\r\n  config$$1.toolTipPadding = config.toolTipPadding * opts.pix;\r\n  config$$1.toolTipLineHeight = config.toolTipLineHeight * opts.pix;\r\n  config$$1.columePadding = config.columePadding * opts.pix;\r\n  //this.context = opts.context ? opts.context : uni.createCanvasContext(opts.canvasId, opts.$this);\r\n  //v2.0版本后需要自行获取context并传入opts进行初始化，这么做是为了确保uCharts可以跨更多端使用，并保证了自定义组件this实例不被循环嵌套。如果您觉得不便请取消上面注释，采用v1.0版本的方式使用，对此给您带来的不便敬请谅解！\r\n  if(!opts.context){\r\n    throw new Error('[uCharts] 未获取到context！注意：v2.0版本后，需要自行获取canvas的绘图上下文并传入opts.context！');\r\n  }\r\n  this.context = opts.context;\r\n  if (!this.context.setTextAlign) {\r\n    this.context.setStrokeStyle = function(e) {\r\n      return this.strokeStyle = e;\r\n    }\r\n    this.context.setLineWidth = function(e) {\r\n      return this.lineWidth = e;\r\n    }\r\n    this.context.setLineCap = function(e) {\r\n      return this.lineCap = e;\r\n    }\r\n    this.context.setFontSize = function(e) {\r\n      return this.font = e + \"px sans-serif\";\r\n    }\r\n    this.context.setFillStyle = function(e) {\r\n      return this.fillStyle = e;\r\n    }\r\n    this.context.setTextAlign = function(e) {\r\n      return this.textAlign = e;\r\n    }\r\n    this.context.draw = function() {}\r\n  }\r\n  //兼容NVUEsetLineDash\r\n  if(!this.context.setLineDash){\r\n    this.context.setLineDash = function(e) {}\r\n  }\r\n  opts.chartData = {};\r\n  this.uevent = new uChartsEvent();\r\n  this.scrollOption = {\r\n    currentOffset: 0,\r\n    startTouchX: 0,\r\n    distance: 0,\r\n    lastMoveTime: 0\r\n  };\r\n  this.opts = opts;\r\n  this.config = config$$1;\r\n  drawCharts.call(this, opts.type, opts, config$$1, this.context);\r\n};\r\n\r\nuCharts.prototype.updateData = function() {\r\n  let data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n  this.opts = assign({}, this.opts, data);\r\n  this.opts.updateData = true;\r\n  let scrollPosition = data.scrollPosition || 'current';\r\n  switch (scrollPosition) {\r\n    case 'current':\r\n      //this.opts._scrollDistance_ = this.scrollOption.currentOffset;\r\n      break;\r\n    case 'left':\r\n      this.opts._scrollDistance_ = 0;\r\n      this.scrollOption = {\r\n        currentOffset: 0,\r\n        startTouchX: 0,\r\n        distance: 0,\r\n        lastMoveTime: 0\r\n      };\r\n      break;\r\n    case 'right':\r\n      let _calYAxisData = calYAxisData(this.opts.series, this.opts, this.config, this.context), yAxisWidth = _calYAxisData.yAxisWidth;\r\n      this.config.yAxisWidth = yAxisWidth;\r\n      let offsetLeft = 0;\r\n      let _getXAxisPoints0 = getXAxisPoints(this.opts.categories, this.opts, this.config), xAxisPoints = _getXAxisPoints0.xAxisPoints,\r\n        startX = _getXAxisPoints0.startX,\r\n        endX = _getXAxisPoints0.endX,\r\n        eachSpacing = _getXAxisPoints0.eachSpacing;\r\n      let totalWidth = eachSpacing * (xAxisPoints.length - 1);\r\n      let screenWidth = endX - startX;\r\n      offsetLeft = screenWidth - totalWidth;\r\n      this.scrollOption = {\r\n        currentOffset: offsetLeft,\r\n        startTouchX: offsetLeft,\r\n        distance: 0,\r\n        lastMoveTime: 0\r\n      };\r\n      this.opts._scrollDistance_ = offsetLeft;\r\n      break;\r\n  }\r\n  drawCharts.call(this, this.opts.type, this.opts, this.config, this.context);\r\n};\r\n\r\nuCharts.prototype.zoom = function() {\r\n  var val = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.opts.xAxis.itemCount;\r\n  if (this.opts.enableScroll !== true) {\r\n    console.log('[uCharts] 请启用滚动条后使用')\r\n    return;\r\n  }\r\n  //当前屏幕中间点\r\n  let centerPoint = Math.round(Math.abs(this.scrollOption.currentOffset) / this.opts.chartData.eachSpacing) + Math.round(this.opts.xAxis.itemCount / 2);\r\n  this.opts.animation = false;\r\n  this.opts.xAxis.itemCount = val.itemCount;\r\n  //重新计算x轴偏移距离\r\n  let _calYAxisData = calYAxisData(this.opts.series, this.opts, this.config, this.context),\r\n    yAxisWidth = _calYAxisData.yAxisWidth;\r\n  this.config.yAxisWidth = yAxisWidth;\r\n  let offsetLeft = 0;\r\n  let _getXAxisPoints0 = getXAxisPoints(this.opts.categories, this.opts, this.config),\r\n    xAxisPoints = _getXAxisPoints0.xAxisPoints,\r\n    startX = _getXAxisPoints0.startX,\r\n    endX = _getXAxisPoints0.endX,\r\n    eachSpacing = _getXAxisPoints0.eachSpacing;\r\n  let centerLeft = eachSpacing * centerPoint;\r\n  let screenWidth = endX - startX;\r\n  let MaxLeft = screenWidth - eachSpacing * (xAxisPoints.length - 1);\r\n  offsetLeft = screenWidth / 2 - centerLeft;\r\n  if (offsetLeft > 0) {\r\n    offsetLeft = 0;\r\n  }\r\n  if (offsetLeft < MaxLeft) {\r\n    offsetLeft = MaxLeft;\r\n  }\r\n  this.scrollOption = {\r\n    currentOffset: offsetLeft,\r\n    startTouchX: offsetLeft,\r\n    distance: 0,\r\n    lastMoveTime: 0\r\n  };\r\n  this.opts._scrollDistance_ = offsetLeft;\r\n  drawCharts.call(this, this.opts.type, this.opts, this.config, this.context);\r\n};\r\n\r\nuCharts.prototype.stopAnimation = function() {\r\n  this.animationInstance && this.animationInstance.stop();\r\n};\r\n\r\nuCharts.prototype.addEventListener = function(type, listener) {\r\n  this.uevent.addEventListener(type, listener);\r\n};\r\n\r\nuCharts.prototype.delEventListener = function(type) {\r\n  this.uevent.delEventListener(type);\r\n};\r\n\r\nuCharts.prototype.getCurrentDataIndex = function(e) {\r\n  var touches = null;\r\n  if (e.changedTouches) {\r\n    touches = e.changedTouches[0];\r\n  } else {\r\n    touches = e.mp.changedTouches[0];\r\n  }\r\n  if (touches) {\r\n    let _touches$ = getTouches(touches, this.opts, e);\r\n    if (this.opts.type === 'pie' || this.opts.type === 'ring') {\r\n      return findPieChartCurrentIndex({\r\n        x: _touches$.x,\r\n        y: _touches$.y\r\n      }, this.opts.chartData.pieData, this.opts);\r\n    } else if (this.opts.type === 'rose') {\r\n      return findRoseChartCurrentIndex({\r\n        x: _touches$.x,\r\n        y: _touches$.y\r\n      }, this.opts.chartData.pieData, this.opts);\r\n    } else if (this.opts.type === 'radar') {\r\n      return findRadarChartCurrentIndex({\r\n        x: _touches$.x,\r\n        y: _touches$.y\r\n      }, this.opts.chartData.radarData, this.opts.categories.length);\r\n    } else if (this.opts.type === 'funnel') {\r\n      return findFunnelChartCurrentIndex({\r\n        x: _touches$.x,\r\n        y: _touches$.y\r\n      }, this.opts.chartData.funnelData);\r\n    } else if (this.opts.type === 'map') {\r\n      return findMapChartCurrentIndex({\r\n        x: _touches$.x,\r\n        y: _touches$.y\r\n      }, this.opts);\r\n    } else if (this.opts.type === 'word') {\r\n      return findWordChartCurrentIndex({\r\n        x: _touches$.x,\r\n        y: _touches$.y\r\n      }, this.opts.chartData.wordCloudData);\r\n    } else if (this.opts.type === 'bar') {\r\n      return findBarChartCurrentIndex({\r\n        x: _touches$.x,\r\n        y: _touches$.y\r\n      }, this.opts.chartData.calPoints, this.opts, this.config, Math.abs(this.scrollOption.currentOffset));\r\n    } else {\r\n      return findCurrentIndex({\r\n        x: _touches$.x,\r\n        y: _touches$.y\r\n      }, this.opts.chartData.calPoints, this.opts, this.config, Math.abs(this.scrollOption.currentOffset));\r\n    }\r\n  }\r\n  return -1;\r\n};\r\n\r\nuCharts.prototype.getLegendDataIndex = function(e) {\r\n  var touches = null;\r\n  if (e.changedTouches) {\r\n    touches = e.changedTouches[0];\r\n  } else {\r\n    touches = e.mp.changedTouches[0];\r\n  }\r\n  if (touches) {\r\n    let _touches$ = getTouches(touches, this.opts, e);\r\n    return findLegendIndex({\r\n      x: _touches$.x,\r\n      y: _touches$.y\r\n    }, this.opts.chartData.legendData);\r\n  }\r\n  return -1;\r\n};\r\n\r\nuCharts.prototype.touchLegend = function(e) {\r\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\r\n  var touches = null;\r\n  if (e.changedTouches) {\r\n    touches = e.changedTouches[0];\r\n  } else {\r\n    touches = e.mp.changedTouches[0];\r\n  }\r\n  if (touches) {\r\n    var _touches$ = getTouches(touches, this.opts, e);\r\n    var index = this.getLegendDataIndex(e);\r\n    if (index >= 0) {\r\n      if (this.opts.type == 'candle') {\r\n        this.opts.seriesMA[index].show = !this.opts.seriesMA[index].show;\r\n      } else {\r\n        this.opts.series[index].show = !this.opts.series[index].show;\r\n      }\r\n      this.opts.animation = option.animation ? true : false;\r\n      this.opts._scrollDistance_ = this.scrollOption.currentOffset;\r\n      drawCharts.call(this, this.opts.type, this.opts, this.config, this.context);\r\n    }\r\n  }\r\n\r\n};\r\n\r\nuCharts.prototype.showToolTip = function(e) {\r\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\r\n  var touches = null;\r\n  if (e.changedTouches) {\r\n    touches = e.changedTouches[0];\r\n  } else {\r\n    touches = e.mp.changedTouches[0];\r\n  }\r\n  if (!touches) {\r\n    console.log(\"[uCharts] 未获取到event坐标信息\");\r\n  }\r\n  var _touches$ = getTouches(touches, this.opts, e);\r\n  var currentOffset = this.scrollOption.currentOffset;\r\n  var opts = assign({}, this.opts, {\r\n    _scrollDistance_: currentOffset,\r\n    animation: false\r\n  });\r\n  if (this.opts.type === 'line' || this.opts.type === 'area' || this.opts.type === 'column' || this.opts.type === 'scatter' || this.opts.type === 'bubble') {\r\n    var current = this.getCurrentDataIndex(e);\r\n    var index = option.index == undefined ? current.index : option.index;\r\n    if (index > -1 || index.length>0) {\r\n      var seriesData = getSeriesDataItem(this.opts.series, index, current.group);\r\n      if (seriesData.length !== 0) {\r\n        var _getToolTipData = getToolTipData(seriesData, this.opts, index, current.group, this.opts.categories, option),\r\n          textList = _getToolTipData.textList,\r\n          offset = _getToolTipData.offset;\r\n        offset.y = _touches$.y;\r\n        opts.tooltip = {\r\n          textList: option.textList !== undefined ? option.textList : textList,\r\n          offset: option.offset !== undefined ? option.offset : offset,\r\n          option: option,\r\n          index: index\r\n        };\r\n      }\r\n    }\r\n    drawCharts.call(this, opts.type, opts, this.config, this.context);\r\n  }\r\n  if (this.opts.type === 'bar') {\r\n    var current = this.getCurrentDataIndex(e);\r\n    var index = option.index == undefined ? current.index : option.index;\r\n    if (index > -1 || index.length>0) {\r\n      var seriesData = getSeriesDataItem(this.opts.series, index, current.group);\r\n      if (seriesData.length !== 0) {\r\n        var _getToolTipData = getToolTipData(seriesData, this.opts, index, current.group, this.opts.categories, option),\r\n          textList = _getToolTipData.textList,\r\n          offset = _getToolTipData.offset;\r\n        offset.x = _touches$.x;\r\n        opts.tooltip = {\r\n          textList: option.textList !== undefined ? option.textList : textList,\r\n          offset: option.offset !== undefined ? option.offset : offset,\r\n          option: option,\r\n          index: index\r\n        };\r\n      }\r\n    }\r\n    drawCharts.call(this, opts.type, opts, this.config, this.context);\r\n  }\r\n  if (this.opts.type === 'mix') {\r\n    var current = this.getCurrentDataIndex(e);\r\n    var index = option.index == undefined ? current.index : option.index;\r\n    if (index > -1) {\r\n      var currentOffset = this.scrollOption.currentOffset;\r\n      var opts = assign({}, this.opts, {\r\n        _scrollDistance_: currentOffset,\r\n        animation: false\r\n      });\r\n      var seriesData = getSeriesDataItem(this.opts.series, index);\r\n      if (seriesData.length !== 0) {\r\n        var _getMixToolTipData = getMixToolTipData(seriesData, this.opts, index, this.opts.categories, option),\r\n          textList = _getMixToolTipData.textList,\r\n          offset = _getMixToolTipData.offset;\r\n        offset.y = _touches$.y;\r\n        opts.tooltip = {\r\n          textList: option.textList ? option.textList : textList,\r\n          offset: option.offset !== undefined ? option.offset : offset,\r\n          option: option,\r\n          index: index\r\n        };\r\n      }\r\n    }\r\n    drawCharts.call(this, opts.type, opts, this.config, this.context);\r\n  }\r\n  if (this.opts.type === 'candle') {\r\n    var current = this.getCurrentDataIndex(e);\r\n    var index = option.index == undefined ? current.index : option.index;\r\n    if (index > -1) {\r\n      var currentOffset = this.scrollOption.currentOffset;\r\n      var opts = assign({}, this.opts, {\r\n        _scrollDistance_: currentOffset,\r\n        animation: false\r\n      });\r\n      var seriesData = getSeriesDataItem(this.opts.series, index);\r\n      if (seriesData.length !== 0) {\r\n        var _getToolTipData = getCandleToolTipData(this.opts.series[0].data, seriesData, this.opts, index, this.opts.categories, this.opts.extra.candle, option),\r\n          textList = _getToolTipData.textList,\r\n          offset = _getToolTipData.offset;\r\n        offset.y = _touches$.y;\r\n        opts.tooltip = {\r\n          textList: option.textList ? option.textList : textList,\r\n          offset: option.offset !== undefined ? option.offset : offset,\r\n          option: option,\r\n          index: index\r\n        };\r\n      }\r\n    }\r\n    drawCharts.call(this, opts.type, opts, this.config, this.context);\r\n  }\r\n  if (this.opts.type === 'pie' || this.opts.type === 'ring' || this.opts.type === 'rose' || this.opts.type === 'funnel') {\r\n    var index = option.index == undefined ? this.getCurrentDataIndex(e) : option.index;\r\n    if (index > -1) {\r\n      var opts = assign({}, this.opts, {animation: false});\r\n      var seriesData = assign({}, opts._series_[index]);\r\n      var textList = [{\r\n        text: option.formatter ? option.formatter(seriesData, undefined, index, opts) : seriesData.name + ': ' + seriesData.data,\r\n        color: seriesData.color\r\n      }];\r\n      var offset = {\r\n        x: _touches$.x,\r\n        y: _touches$.y\r\n      };\r\n      opts.tooltip = {\r\n        textList: option.textList ? option.textList : textList,\r\n        offset: option.offset !== undefined ? option.offset : offset,\r\n        option: option,\r\n        index: index\r\n      };\r\n    }\r\n    drawCharts.call(this, opts.type, opts, this.config, this.context);\r\n  }\r\n  if (this.opts.type === 'map') {\r\n    var index = option.index == undefined ? this.getCurrentDataIndex(e) : option.index;\r\n    if (index > -1) {\r\n      var opts = assign({}, this.opts, {animation: false});\r\n      var seriesData = assign({}, this.opts.series[index]);\r\n      seriesData.name = seriesData.properties.name\r\n      var textList = [{\r\n        text: option.formatter ? option.formatter(seriesData, undefined, index, this.opts) : seriesData.name,\r\n        color: seriesData.color\r\n      }];\r\n      var offset = {\r\n        x: _touches$.x,\r\n        y: _touches$.y\r\n      };\r\n      opts.tooltip = {\r\n        textList: option.textList ? option.textList : textList,\r\n        offset: option.offset !== undefined ? option.offset : offset,\r\n        option: option,\r\n        index: index\r\n      };\r\n    }\r\n    opts.updateData = false;\r\n    drawCharts.call(this, opts.type, opts, this.config, this.context);\r\n  }\r\n  if (this.opts.type === 'word') {\r\n    var index = option.index == undefined ? this.getCurrentDataIndex(e) : option.index;\r\n    if (index > -1) {\r\n      var opts = assign({}, this.opts, {animation: false});\r\n      var seriesData = assign({}, this.opts.series[index]);\r\n      var textList = [{\r\n        text: option.formatter ? option.formatter(seriesData, undefined, index, this.opts) : seriesData.name,\r\n        color: seriesData.color\r\n      }];\r\n      var offset = {\r\n        x: _touches$.x,\r\n        y: _touches$.y\r\n      };\r\n      opts.tooltip = {\r\n        textList: option.textList ? option.textList : textList,\r\n        offset: option.offset !== undefined ? option.offset : offset,\r\n        option: option,\r\n        index: index\r\n      };\r\n    }\r\n    opts.updateData = false;\r\n    drawCharts.call(this, opts.type, opts, this.config, this.context);\r\n  }\r\n  if (this.opts.type === 'radar') {\r\n    var index = option.index == undefined ? this.getCurrentDataIndex(e) : option.index;\r\n    if (index > -1) {\r\n      var opts = assign({}, this.opts, {animation: false});\r\n      var seriesData = getSeriesDataItem(this.opts.series, index);\r\n      if (seriesData.length !== 0) {\r\n        var textList = seriesData.map((item) => {\r\n          return {\r\n            text: option.formatter ? option.formatter(item, this.opts.categories[index], index, this.opts) : item.name + ': ' + item.data,\r\n            color: item.color\r\n          };\r\n        });\r\n        var offset = {\r\n          x: _touches$.x,\r\n          y: _touches$.y\r\n        };\r\n        opts.tooltip = {\r\n          textList: option.textList ? option.textList : textList,\r\n          offset: option.offset !== undefined ? option.offset : offset,\r\n          option: option,\r\n          index: index\r\n        };\r\n      }\r\n    }\r\n    drawCharts.call(this, opts.type, opts, this.config, this.context);\r\n  }\r\n};\r\n\r\nuCharts.prototype.translate = function(distance) {\r\n  this.scrollOption = {\r\n    currentOffset: distance,\r\n    startTouchX: distance,\r\n    distance: 0,\r\n    lastMoveTime: 0\r\n  };\r\n  let opts = assign({}, this.opts, {\r\n    _scrollDistance_: distance,\r\n    animation: false\r\n  });\r\n  drawCharts.call(this, this.opts.type, opts, this.config, this.context);\r\n};\r\n\r\nuCharts.prototype.scrollStart = function(e) {\r\n  var touches = null;\r\n  if (e.changedTouches) {\r\n    touches = e.changedTouches[0];\r\n  } else {\r\n    touches = e.mp.changedTouches[0];\r\n  }\r\n  var _touches$ = getTouches(touches, this.opts, e);\r\n  if (touches && this.opts.enableScroll === true) {\r\n    this.scrollOption.startTouchX = _touches$.x;\r\n  }\r\n};\r\n\r\nuCharts.prototype.scroll = function(e) {\r\n  if (this.scrollOption.lastMoveTime === 0) {\r\n    this.scrollOption.lastMoveTime = Date.now();\r\n  }\r\n  let Limit = this.opts.touchMoveLimit || 60;\r\n  let currMoveTime = Date.now();\r\n  let duration = currMoveTime - this.scrollOption.lastMoveTime;\r\n  if (duration < Math.floor(1000 / Limit)) return;\r\n  this.scrollOption.lastMoveTime = currMoveTime;\r\n  var touches = null;\r\n  if (e.changedTouches) {\r\n    touches = e.changedTouches[0];\r\n  } else {\r\n    touches = e.mp.changedTouches[0];\r\n  }\r\n  if (touches && this.opts.enableScroll === true) {\r\n    var _touches$ = getTouches(touches, this.opts, e);\r\n    var _distance;\r\n    _distance = _touches$.x - this.scrollOption.startTouchX;\r\n    var currentOffset = this.scrollOption.currentOffset;\r\n    var validDistance = calValidDistance(this, currentOffset + _distance, this.opts.chartData, this.config, this.opts);\r\n    this.scrollOption.distance = _distance = validDistance - currentOffset;\r\n    var opts = assign({}, this.opts, {\r\n      _scrollDistance_: currentOffset + _distance,\r\n      animation: false\r\n    });\r\n\t\tthis.opts = opts;\r\n    drawCharts.call(this, opts.type, opts, this.config, this.context);\r\n    return currentOffset + _distance;\r\n  }\r\n};\r\n\r\nuCharts.prototype.scrollEnd = function(e) {\r\n  if (this.opts.enableScroll === true) {\r\n    var _scrollOption = this.scrollOption,\r\n      currentOffset = _scrollOption.currentOffset,\r\n      distance = _scrollOption.distance;\r\n    this.scrollOption.currentOffset = currentOffset + distance;\r\n    this.scrollOption.distance = 0;\r\n  }\r\n};\r\n\r\nexport default uCharts;"],"sourceRoot":""}