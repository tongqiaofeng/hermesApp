require('./common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["order/orderList"],{279:function(e,t,o){"use strict";(function(e){o(5);n(o(3));var t=n(o(280));function n(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=o,e(t.default)}).call(this,o(1)["createPage"])},280:function(e,t,o){"use strict";o.r(t);var n=o(281),r=o(283);for(var i in r)"default"!==i&&function(e){o.d(t,e,(function(){return r[e]}))}(i);o(285);var a,c=o(11),s=Object(c["default"])(r["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],a);s.options.__file="order/orderList.vue",t["default"]=s.exports},281:function(e,t,o){"use strict";o.r(t);var n=o(282);o.d(t,"render",(function(){return n["render"]})),o.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]})),o.d(t,"recyclableRender",(function(){return n["recyclableRender"]})),o.d(t,"components",(function(){return n["components"]}))},282:function(e,t,o){"use strict";var n;o.r(t),o.d(t,"render",(function(){return r})),o.d(t,"staticRenderFns",(function(){return a})),o.d(t,"recyclableRender",(function(){return i})),o.d(t,"components",(function(){return n}));try{n={uniPopup:function(){return o.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(o.bind(null,409))}}}catch(c){if(-1===c.message.indexOf("Cannot find module")||-1===c.message.indexOf(".vue"))throw c;console.error(c.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var e=this,t=e.$createElement,o=(e._self._c,e.isShow?e.__map(e.orderAllList,(function(t,o){var n=e.__get_orig(t),r=0!=t.orderList.length?e.__map(t.orderList,(function(t,o){var n=e.__get_orig(t),r=e.statusDecide(t.orderStatus),i=e.__map(t.detailList,(function(t,o){var n=e.__get_orig(t),r=e.formatNumberRgx(t.productPrice),i=e.formatNumberRgx(t.productPrice);return{$orig:n,m1:r,m2:i}}));return{$orig:n,m0:r,l0:i}})):null;return{$orig:n,l1:r}})):null),n=e.isShow?e.formatNumberRgx(e.payPrice):null;e.$mp.data=Object.assign({},{$root:{l2:o,m3:n}})},i=!1,a=[];r._withStripped=!0},283:function(e,t,o){"use strict";o.r(t);var n=o(284),r=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,(function(){return n[e]}))}(i);t["default"]=r.a},284:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{isActive:0,index:0,currentindex:0,category:[{id:1,name:"全部"},{id:2,name:"待付款"},{id:3,name:"已付款"},{id:4,name:"已发货"},{id:5,name:"已签收"}],scrollLeft:0,fullHeight:"",isShow:!1,haveData:1,orderAllList:[],payPrice:0,verification:{},radioItems:[{name:"微信支付",value:"0",img:o(275),checked:!0}],current:0,payId:null}},mounted:function(){var t=this;this.$nextTick((function(){e.getSystemInfo({success:function(e){t.fullHeight="height:"+e.windowHeight+"px"}})}))},onLoad:function(){this.orderAllList=[],this.getorderAllList()},methods:{chenked:function(e){this.isActive=e},change:function(e){var t=e.detail.current;this.currentindex=t},goOrderDetail:function(t){console.log(t),e.navigateTo({url:"orderDetail?id="+t})},logistics:function(t){console.log("查看物流"),e.navigateTo({url:"../soldPackage/logistics?id="+t.id})},deliverySure:function(t){var o=this;console.log("确认收货"),console.log(t),e.request({url:this.$baseUrl+"/order/api/checkReceive",method:"POST",data:{id:t.id},header:{"content-type":"application/json",token:e.getStorageSync("token")},complete:function(t){console.log("确认收货"),console.log(t),200==t.statusCode?(o.getorderAllList(),e.showToast({icon:"none",title:"确认收货成功"})):e.showToast({icon:"none",title:t.data.message})}})},delOrder:function(t){var o=this;console.log(t),e.showModal({title:"删除订单",content:"确定要删除这个订单么 ？",confirmText:"删除",confirmColor:"#85dbd0",cancelColor:"#85dbd0",success:function(n){console.log(n),1==n.confirm&&(console.log("删除订单"),e.request({url:o.$baseUrl+"/order/api/orderDel",method:"POST",header:{"content-type":"application/json",token:e.getStorageSync("token")},data:{id:t.id},complete:function(t){console.log("res"),200==t.statusCode?(o.getorderAllList(),e.showToast({icon:"none",title:"删除成功"})):e.showToast({icon:"none",title:t.data.message})}}))}})},cancelOrder:function(t){var o=this;console.log("取消订单"),e.request({url:this.$baseUrl+"/order/api/closeOrder",method:"POST",header:{"content-type":"application/json",token:e.getStorageSync("token")},data:{outTradeNo:t},complete:function(t){console.log("取消订单"),console.log(t),200==t.statusCode?(o.getorderAllList(),e.showToast({icon:"none",title:"取消成功"})):e.showToast({icon:"none",title:t.data.message})}})},payOrder:function(e){console.log(e),this.payPrice=e.orderAmountTotal,this.payId=e.id,this.$refs.payPopup.open()},paySure:function(){var t=this;e.showLoading({title:""}),e.request({url:this.$baseUrl+"/wechat/api/payMsgGet",data:{id:this.payId,tradeType:1},header:{"content-type":"application/json",token:e.getStorageSync("token")},complete:function(o){e.hideLoading(),console.log("支付订单"),console.log(o),200==o.statusCode?(t.verification=o.data,console.log("微信小程序支付"),e.requestPayment({provider:"wxpay",timeStamp:t.verification.payMsg.timeStamp.toString(),nonceStr:t.verification.payMsg.nonceStr,package:t.verification.payMsg.package,signType:"RSA",paySign:t.verification.payMsg.paySign,success:function(e){console.log("success:"),console.log(e),t.$refs.payPopup.close(),t.getorderAllList()},fail:function(e){console.log("fail:"),console.log(e),t.$refs.payPopup.close()}})):e.showToast({icon:"none",title:o.data.message,duration:2e3})}})},getorderAllList:function(){var t=this;e.showLoading({title:"加载中..."}),e.request({url:this.$baseUrl+"/order/api/orderList",header:{"content-type":"application/json",token:e.getStorageSync("token")},data:{orderStatus:0==this.current?"":this.current-1,page:this.page,pageNum:10},complete:function(o){console.log("订单列表"),console.log(o),t.orderAllList=o.data,0==t.orderAllList.length?t.haveData=0:t.haveData=1,e.hideLoading(),t.isShow=!0}})},statusDecide:function(e){switch(e){case-2:return"交易取消";case-1:return"超时交易关闭";case 0:return"未付款";case 1:return"已付款";case 2:return"已发货";case 3:return"已签收"}}}};t.default=n}).call(this,o(1)["default"])},285:function(e,t,o){"use strict";o.r(t);var n=o(286),r=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,(function(){return n[e]}))}(i);t["default"]=r.a},286:function(e,t,o){}},[[279,"common/runtime","common/vendor","order/common/vendor"]]]);
//# sourceMappingURL=../../.sourcemap/mp-weixin/order/orderList.js.map