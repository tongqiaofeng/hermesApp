require('./common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["order/confirmAnOrder"],{269:function(e,t,n){"use strict";(function(e){n(5);r(n(3));var t=r(n(270));function r(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n(1)["createPage"])},270:function(e,t,n){"use strict";n.r(t);var r=n(271),o=n(273);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(277);var a,c=n(11),s=Object(c["default"])(o["default"],r["render"],r["staticRenderFns"],!1,null,"b7496ea0",null,!1,r["components"],a);s.options.__file="order/confirmAnOrder.vue",t["default"]=s.exports},271:function(e,t,n){"use strict";n.r(t);var r=n(272);n.d(t,"render",(function(){return r["render"]})),n.d(t,"staticRenderFns",(function(){return r["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return r["recyclableRender"]})),n.d(t,"components",(function(){return r["components"]}))},272:function(e,t,n){"use strict";var r;n.r(t),n.d(t,"render",(function(){return o})),n.d(t,"staticRenderFns",(function(){return a})),n.d(t,"recyclableRender",(function(){return i})),n.d(t,"components",(function(){return r}));try{r={uniPopup:function(){return n.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(n.bind(null,409))},uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,509))}}}catch(c){if(-1===c.message.indexOf("Cannot find module")||-1===c.message.indexOf(".vue"))throw c;console.error(c.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var o=function(){var e=this,t=e.$createElement,n=(e._self._c,e.__map(e.selList,(function(t,n){var r=e.__get_orig(t),o=decodeURIComponent(t.name),i=e.formatNumberRgx(t.price);return{$orig:r,m0:o,m1:i}}))),r=e.formatNumberRgx(e.totalPrice),o=e.formatNumberRgx(e.endPrice),i=e.formatNumberRgx(e.endPrice),a=e.formatNumberRgx(e.totalUsPrice);e.$mp.data=Object.assign({},{$root:{l0:n,m2:r,m3:o,m4:i,m5:a}})},i=!1,a=[];o._withStripped=!0},273:function(e,t,n){"use strict";n.r(t);var r=n(274),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=o.a},274:function(e,t,n){"use strict";(function(e){function r(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw a}}}}function o(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={data:function(){return{totalPrice:0,totalUsPrice:0,selAddress:{},selList:[],verification:{},num:0,tradeType:0,radioItems:[{name:"微信支付",value:"0",img:n(275),checked:!0},{name:"数字货币支付",value:"2",img:n(276),checked:!1}],remark:"",integralPrice:0,endPrice:0,usdtList:[{id:1,name:"TRC20",accountNumber:"TL7BvRcmZKvzDnhuNRVRH1inqReAX5Jhr5"},{id:2,name:"ERC20",accountNumber:"0x9b2117d4a942c110c63857dd44f77436766428fc"},{id:3,name:"HECO",accountNumber:"0x30cf1dfac257269883933c73fa470573708ce94d"},{id:4,name:"BSC",accountNumber:"0x723caf8974b62299a5ef62de4bffee07e2426527"}]}},onShow:function(){var t=e.getStorageSync("userAddress");void 0!==t&&t&&(this.selAddress=JSON.parse(decodeURIComponent(t)))},onLoad:function(e){if(console.log("传参"),console.log(e),e.productList){this.selList=JSON.parse(decodeURIComponent(e.productList)),console.log(this.selList);var t,n=r(this.selList);try{for(n.s();!(t=n.n()).done;){var o=t.value;this.num+=Number(o.num),this.totalPrice+=Number(o.price),this.totalUsPrice+=Number(o.usPrice)}}catch(i){n.e(i)}finally{n.f()}this.getIntegral()}},methods:{copyOut:function(t){var n=this;console.log("复制"),e.setClipboardData({data:t,success:function(){e.showToast({title:"复制成功，请转账支付",icon:"none",complete:function(){n.$refs.usdtPopup.close()}})}})},radioChange:function(e){console.log(e),this.tradeType=e.target.value,2==this.tradeType&&this.$refs.usdtPopup.open()},clickTradeType:function(e){this.radioItems[e].checked=!this.radioItems[e].checked,2==this.radioItems[e].value&&this.radioItems[e].checked&&this.$refs.usdtPopup.open()},getIntegral:function(){var t=e.getStorageSync("totalIntegral");t>0&&(this.integralPrice=t/100),this.endPrice=this.totalPrice-this.integralPrice},addRemark:function(){this.$refs.remarkPopup.open()},closePopup:function(){this.$refs.remarkPopup.close()},numChangeValue:function(e,t,n){if(1!=n){0==e?this.selList[t].num-=1:1==e&&(this.selList[t].num+=1),this.totalPrice=0,this.totalUsPrice=0,this.num=0;var o,i=r(this.selList);try{for(i.s();!(o=i.n()).done;){var a=o.value;this.num+=Number(a.num),this.totalPrice+=Number(a.price)*Number(a.num),this.totalUsPrice+=Number(a.usPrice)*Number(a.num)}}catch(c){i.e(c)}finally{i.f()}this.getIntegral()}},shippingAddress:function(){e.navigateTo({url:"./addr/addressAdmin"})},createOrder:function(){var t=this,n=1;n=1,e.showLoading({title:""}),e.request({url:this.$baseUrl+"/order/api/createOrder",method:"POST",data:{addressId:this.selAddress.id,detailList:this.selList,total:this.totalPrice,remark:this.remark,tradeType:n},header:{"content-type":"application/json",token:e.getStorageSync("token")},complete:function(n){e.hideLoading(),console.log("生成订单"),console.log(n),200==n.statusCode?(t.verification=n.data,t.payOrder()):e.showToast({icon:"none",title:n.data.status,duration:2e3})}})},payOrder:function(){console.log("微信小程序支付"),e.requestPayment({provider:"wxpay",timeStamp:this.verification.payMsg.timeStamp.toString(),nonceStr:this.verification.payMsg.nonceStr,package:this.verification.payMsg.package,signType:"RSA",paySign:this.verification.payMsg.paySign,success:function(t){console.log("success:"),console.log(t),e.reLaunch({url:"orderList"})},fail:function(t){console.log("fail:"),console.log(t),e.showToast({icon:"none",title:"支付失败",duration:2e3})}})}}};t.default=a}).call(this,n(1)["default"])},277:function(e,t,n){"use strict";n.r(t);var r=n(278),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=o.a},278:function(e,t,n){}},[[269,"common/runtime","common/vendor","order/common/vendor"]]]);
//# sourceMappingURL=../../.sourcemap/mp-weixin/order/confirmAnOrder.js.map