(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["jewelry/jewelryMaterial"],{103:function(t,e,i){"use strict";(function(t){i(5);a(i(3));var e=a(i(104));function a(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=i,t(e.default)}).call(this,i(1)["createPage"])},104:function(t,e,i){"use strict";i.r(e);var a=i(105),n=i(107);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i(109);var o,r=i(11),l=Object(r["default"])(n["default"],a["render"],a["staticRenderFns"],!1,null,"11d451ae",null,!1,a["components"],o);l.options.__file="jewelry/jewelryMaterial.vue",e["default"]=l.exports},105:function(t,e,i){"use strict";i.r(e);var a=i(106);i.d(e,"render",(function(){return a["render"]})),i.d(e,"staticRenderFns",(function(){return a["staticRenderFns"]})),i.d(e,"recyclableRender",(function(){return a["recyclableRender"]})),i.d(e,"components",(function(){return a["components"]}))},106:function(t,e,i){"use strict";var a;i.r(e),i.d(e,"render",(function(){return n})),i.d(e,"staticRenderFns",(function(){return o})),i.d(e,"recyclableRender",(function(){return s})),i.d(e,"components",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=(t._self._c,0!=t.haveData?t.__map(t.list,(function(e,i){var a=t.__get_orig(e),n=e.img?e.img.split("|"):null,s=e.unitPrice?t.formatNumberRgx(e.unitPrice):null,o=!e.unitPrice||"粒"!=e.chargeUnit&&"件"!=e.chargeUnit?null:t.formatNumberRgx(parseInt(e.unitPrice*e.number)),r=e.unitPrice&&"粒"!=e.chargeUnit&&"件"!=e.chargeUnit?t.formatNumberRgx(parseInt(e.unitPrice*e.weight)):null,l=t.stateIdx>0?t.getSaleStateClr(e):null,c=t.stateIdx>0?t.getSaleState(e):null;return{$orig:a,g0:n,m0:s,m1:o,m2:r,m3:l,m4:c}})):null);t._isMounted||(t.e0=function(e){t.bShowStock=!0},t.e1=function(e){t.bShowMaterial=!0},t.e2=function(e){t.bShowState=!0}),t.$mp.data=Object.assign({},{$root:{l0:i}})},s=!1,o=[];n._withStripped=!0},107:function(t,e,i){"use strict";i.r(e);var a=i(108),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},108:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(){i.e("components/popwnd/popwnd_select_blue").then(function(){return resolve(i(439))}.bind(null,i)).catch(i.oe)},n={components:{popwndSelect:a},data:function(){return{imgUrl:this.$baseUrl+"/jewellery/api",haveData:1,height:null,keyWord:"",page:1,sortType:null,isUp:null,img1:i(33),img2:i(34),img3:i(35),bShowStock:!1,stockIdx:0,stocks:[],bShowState:!1,stateIdx:3,states:[{id:-1,name:"全部"},{id:0,name:"存货"},{id:1,name:"运输中"},{id:5,name:"未加工"},{id:2,name:"加工中"},{id:3,name:"加工完成"},{id:4,name:"已出售"}],bShowMaterial:!1,materialIdx:0,materialModelList:[],list:[],total:0,haveMore:0}},onLoad:function(){var e=this;t.getSystemInfo({success:function(t){e.height=t.statusBarHeight}}),this.stockIdx=0,this.materialIdx=0,this.stateIdx=3,0==this.list.length&&t.getStorageSync("token").length>0&&(console.log("重新获取数据"),this.getStockList(),this.getMaterialModelList(),this.search())},onPullDownRefresh:function(){t.showLoading({title:"正在刷新"}),console.log("获取数据"),this.page=1,this.list=[],this.haveMore=0,this.search(),this.getStockList(),t.stopPullDownRefresh()},onReachBottom:function(){0==this.haveMore&&(this.page++,this.search())},methods:{filterSel:function(e){null==this.isUp?this.isUp=1:1==this.isUp?this.isUp=2:2==this.isUp&&(this.isUp=1),this.sortType!=e&&(this.isUp=1),this.sortType=e,this.page=1,this.list=[],this.haveMore=0,this.search(),t.pageScrollTo({scrollTop:0,duration:300})},search:function(){var e=this;t.showLoading({title:"加载中..."}),this.soldNum=0,this.reserveNum=0;var i={};i={keyword:this.keyWord.trim(),sortType:this.sortType,sortFlag:2==this.isUp?-1:this.isUp},this.stockIdx>0&&(i.storageId=this.stocks[this.stockIdx].id),this.materialIdx>0&&(i.materialModelId=this.materialModelList[this.materialIdx].id),this.stateIdx>0&&(i.state=this.states[this.stateIdx].id),t.request({url:this.$baseUrl+"/jewellery/api/materialStockSearch?page="+this.page+"&pageNum=10",method:"POST",header:{"content-type":"application/json",token:t.getStorageSync("token")},data:i,complete:function(i){if(t.hideLoading(),console.log("珠宝原材料列表"),console.log(i),0!=e.checkBack(i)){if(e.total=i.data.total,0==i.data.list.length)e.haveMore=1;else{var a=e.list.concat(i.data.list);e.list=a}0==e.list.length?(e.haveData=0,t.showToast({icon:"none",title:"暂无数据"})):e.haveData=1}}})},getStockList:function(){var e=this;t.request({url:this.$baseUrl+"/jewellery/api/storageList",header:{"content-type":"application/json",token:t.getStorageSync("token")},complete:function(i){console.log(i),t.hideLoading(),0!=e.checkBack(i,!0)&&i.data.length>0&&(e.stocks=i.data,"全部"==e.stocks[0].name&&(e.stocks[0].name="全部仓库"))}})},getMaterialModelList:function(){var e=this;t.request({url:this.$baseUrl+"/jewellery/api/materialModelList",header:{"content-type":"application/json",token:t.getStorageSync("token")},complete:function(i){console.log(i),t.hideLoading(),0!=e.checkBack(i,!0)&&(i.data.length>0&&(e.materialModelList=i.data),i.data.length>0&&(e.materialModelList=i.data,"全部"==e.materialModelList[0].name&&(e.materialModelList[0].name="全部裸石")))}})},inputChange:function(){this.page=1,this.list=[],this.haveMore=0,this.sortType=null,this.isUp=null,this.search(),t.pageScrollTo({scrollTop:0,duration:300})},stockChange:function(e){this.stockIdx=e.sel,this.page=1,this.list=[],this.haveMore=0,this.sortType=null,this.isUp=null,this.search(),t.pageScrollTo({scrollTop:0,duration:300})},materialChange:function(e){this.materialIdx=e.sel,this.page=1,this.list=[],this.haveMore=0,this.sortType=null,this.isUp=null,this.search(),t.pageScrollTo({scrollTop:0,duration:300})},stateChange:function(e){this.stateIdx=e.sel,this.page=1,this.list=[],this.haveMore=0,this.search(),t.pageScrollTo({scrollTop:0,duration:300})},getSaleStateClr:function(t){return 0==t.state?"#54b7eb":1==t.state?"#6bcda5":2==t.sold?"#ff8b62":(t.sold,"#ef5b5b")},getSaleState:function(t){for(var e=0;e<this.states.length;++e){if(t.state==this.states[e].id)return this.states[e].name;if(4==t.state)return"已售"}return""},checkDetails:function(e){t.navigateTo({url:"./materialDetails?id="+e.id})},goBack:function(){t.navigateBack({delta:1})}}};e.default=n}).call(this,i(1)["default"])},109:function(t,e,i){"use strict";i.r(e);var a=i(110),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},110:function(t,e,i){}},[[103,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../.sourcemap/mp-weixin/jewelry/jewelryMaterial.js.map