require('./common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["hermes/billSummary"],{237:function(e,t,n){"use strict";(function(e){n(5);r(n(3));var t=r(n(238));function r(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n(1)["createPage"])},238:function(e,t,n){"use strict";n.r(t);var r=n(239),o=n(241);for(var s in o)"default"!==s&&function(e){n.d(t,e,(function(){return o[e]}))}(s);n(243);var a,i=n(11),l=Object(i["default"])(o["default"],r["render"],r["staticRenderFns"],!1,null,"b93cc278",null,!1,r["components"],a);l.options.__file="hermes/billSummary.vue",t["default"]=l.exports},239:function(e,t,n){"use strict";n.r(t);var r=n(240);n.d(t,"render",(function(){return r["render"]})),n.d(t,"staticRenderFns",(function(){return r["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return r["recyclableRender"]})),n.d(t,"components",(function(){return r["components"]}))},240:function(e,t,n){"use strict";var r;n.r(t),n.d(t,"render",(function(){return o})),n.d(t,"staticRenderFns",(function(){return a})),n.d(t,"recyclableRender",(function(){return s})),n.d(t,"components",(function(){return r}));try{r={uniSegmentedControl:function(){return n.e("uni_modules/uni-segmented-control/components/uni-segmented-control/uni-segmented-control").then(n.bind(null,474))}}}catch(i){if(-1===i.message.indexOf("Cannot find module")||-1===i.message.indexOf(".vue"))throw i;console.error(i.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var o=function(){var e=this,t=e.$createElement,n=(e._self._c,0!=e.userType?e.getSaleStateClr(e.totalMoney):null),r=0!=e.userType?e.formatNumberRgx(e.totalMoney):null,o=0!=e.list.length&&0==e.userType?e.__map(e.listCensus,(function(t,n){var r=e.__get_orig(t),o=e.getSaleStateClr(t.totalPrice),s=e.getSaleStateClr(t.totalPrice),a=e.formatNumberRgx(t.totalPrice);return{$orig:r,m2:o,m3:s,m4:a}})):null,s=0!=e.list.length&&0==e.userType?e.__map(e.list,(function(t,n){var r=e.__get_orig(t),o=e.getSaleStateClr(t.totalHkPrice,t.flag),s=e.getTradeType(t.tradeType,t.flag),a=e.getSaleStateClr(e.getShowMoney(t)),i=e.formatNumberRgx(e.getShowMoney(t));return{$orig:r,m5:o,m6:s,m7:a,m8:i}})):null,a=0!=e.list.length&&0!=e.userType?e.__map(e.list,(function(t,n){var r=e.__get_orig(t),o=e.getSaleStateClr(t.totalHkPrice,t.flag),s=e.getTradeType(t.tradeType,t.flag),a=e.getSaleStateClr(e.getShowMoney(t)),i=e.formatNumberRgx(e.getShowMoney(t));return{$orig:r,m9:o,m10:s,m11:a,m12:i}})):null;e._isMounted||(e.e0=function(t){e.bShowUser=e.viewAll}),e.$mp.data=Object.assign({},{$root:{m0:n,m1:r,l0:o,l1:s,l2:a}})},s=!1,a=[];o._withStripped=!0},241:function(e,t,n){"use strict";n.r(t);var r=n(242),o=n.n(r);for(var s in r)"default"!==s&&function(e){n.d(t,e,(function(){return r[e]}))}(s);t["default"]=o.a},242:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(125));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,r,o,s,a){try{var i=e[s](a),l=i.value}catch(u){return void n(u)}i.done?t(l):Promise.resolve(l).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){s(a,r,o,i,l,"next",e)}function l(e){s(a,r,o,i,l,"throw",e)}i(void 0)}))}}var i=function(){n.e("components/popwnd/popwnd_select_blue").then(function(){return resolve(n(439))}.bind(null,n)).catch(n.oe)},l={components:{popwndSelect:i},data:function(){return{height:null,keyWord:"",page:1,bShowUser:!1,userIdx:0,usersList:[],tabItems:["债务统计","账单流水"],tabCurrent:0,listCensus:[],list:[],totalMoney:0,currency:"",userType:0,haveMore:0,viewAll:!1}},onLoad:function(){var t=this;return a(r.default.mark((function n(){return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$onLaunched;case 2:e.getSystemInfo({success:function(e){t.height=e.statusBarHeight}}),0==t.list.length&&e.getStorageSync("token").length>0&&t.getUserList();case 4:case"end":return n.stop()}}),n)})))()},onReady:function(){this.hidePageNavInWechatBrowser()},onPullDownRefresh:function(){e.showLoading({title:"正在刷新"}),this.page=1,this.list=[],this.haveMore=0,this.getUserList(),e.stopPullDownRefresh()},onReachBottom:function(){0==this.haveMore&&(this.page++,this.search())},methods:{search:function(){var t=this;e.showLoading({title:"加载中..."}),this.soldNum=0,this.reserveNum=0;var n={};n={keyword:this.keyWord.trim(),personId:this.usersList[this.userIdx].id,page:this.page,pageNum:10,flag:2},this.userType=this.usersList[this.userIdx].type,e.request({url:this.$baseFileUrl+"/billSearch?pageNum=10&page="+this.page,method:"POST",header:{"content-type":"application/json",token:e.getStorageSync("token")},data:n,complete:function(n){if(e.hideLoading(),0!=t.checkBack(n)){if(0==t.userType)if(t.listCensus=n.data.censusData,t.totalMoney=n.data.allRecord.personAllMoney,t.currency=n.data.allRecord.currency,0==n.data.allRecord.list.length)t.haveMore=1;else{var r=t.list.concat(n.data.allRecord.list);t.list=r}else if(t.totalMoney=n.data.personAllMoney,t.currency=n.data.currency,0==n.data.list.length)t.haveMore=1;else{var o=t.list.concat(n.data.list);t.list=o}0==t.list.length&&e.showToast({icon:"none",title:"暂无数据"})}}})},getUserList:function(){var t=this;e.request({url:this.$baseFileUrl+"/billUserList",header:{"content-type":"application/json",token:e.getStorageSync("token")},data:{},complete:function(n){if(e.hideLoading(),0!=t.checkBack(n,!0)){n.data.length>0&&(t.usersList=n.data);var r=getApp().globalData.userInfo.userPermissions;console.log(r),r.hermes_bill&&(r.hermes_bill.userId>0?t.selectUser(r.hermes_bill.userId):0==r.hermes_bill.userId&&(t.viewAll=!0)),t.search()}}})},inputChange:function(){this.page=1,this.list=[],this.haveMore=0,this.search(),e.pageScrollTo({scrollTop:0,duration:300})},userChange:function(t){this.userIdx=t.sel,this.page=1,this.list=[],this.haveMore=0,this.search(),e.pageScrollTo({scrollTop:0,duration:300})},onClickTabItem:function(e){this.tabCurrent!=e.currentIndex&&(this.tabCurrent=e.currentIndex)},getShowMoney:function(e){return 0==this.userType?e.totalHkPrice*e.flag:1==this.userType?e.totalHkPrice*-e.flag:e.money*e.flag},getSaleStateClr:function(e){return e<0?"#D62B46":"#4DCCB3"},getTradeType:function(e,t){var n="";switch(2==this.userType&&(n="TopTime"),e){case 0:return n+"买入";case 1:return n+"卖出";case 2:return"转账"+(1==t?"-收入":"-支出");case 3:return"买入退款";case 4:return"卖出退款";case 5:return"其他收入";case 6:return"其他支出";default:return"/"}},checkDetails:function(t){e.navigateTo({url:"billDetail?ut="+this.userType+"&id="+t.id})},selectUser:function(e){for(var t=0;t<this.usersList.length;++t)if(this.usersList[t].id==e){var n={sel:0};n.sel=t,this.userChange(n);break}},goBack:function(){e.navigateBack({delta:1})}}};t.default=l}).call(this,n(1)["default"])},243:function(e,t,n){"use strict";n.r(t);var r=n(244),o=n.n(r);for(var s in r)"default"!==s&&function(e){n.d(t,e,(function(){return r[e]}))}(s);t["default"]=o.a},244:function(e,t,n){}},[[237,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../.sourcemap/mp-weixin/hermes/billSummary.js.map