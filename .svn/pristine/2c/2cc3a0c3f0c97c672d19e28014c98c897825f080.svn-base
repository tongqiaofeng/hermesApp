(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["comm/login"],{64:function(e,n,o){"use strict";(function(e){o(5);t(o(3));var n=t(o(65));function t(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=o,e(n.default)}).call(this,o(1)["createPage"])},65:function(e,n,o){"use strict";o.r(n);var t=o(66),r=o(68);for(var s in r)"default"!==s&&function(e){o.d(n,e,(function(){return r[e]}))}(s);o(70);var i,c=o(11),u=Object(c["default"])(r["default"],t["render"],t["staticRenderFns"],!1,null,"818f8098",null,!1,t["components"],i);u.options.__file="comm/login.vue",n["default"]=u.exports},66:function(e,n,o){"use strict";o.r(n);var t=o(67);o.d(n,"render",(function(){return t["render"]})),o.d(n,"staticRenderFns",(function(){return t["staticRenderFns"]})),o.d(n,"recyclableRender",(function(){return t["recyclableRender"]})),o.d(n,"components",(function(){return t["components"]}))},67:function(e,n,o){"use strict";var t;o.r(n),o.d(n,"render",(function(){return r})),o.d(n,"staticRenderFns",(function(){return i})),o.d(n,"recyclableRender",(function(){return s})),o.d(n,"components",(function(){return t}));try{t={uniForms:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(o.bind(null,416))},uniFormsItem:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item")]).then(o.bind(null,424))}}}catch(c){if(-1===c.message.indexOf("Cannot find module")||-1===c.message.indexOf(".vue"))throw c;console.error(c.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var e=this,n=e.$createElement;e._self._c},s=!1,i=[];r._withStripped=!0},68:function(e,n,o){"use strict";o.r(n);var t=o(69),r=o.n(t);for(var s in t)"default"!==s&&function(e){o.d(n,e,(function(){return t[e]}))}(s);n["default"]=r.a},69:function(e,n,o){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o={data:function(){return{selectLogin:0,userData:{phoneNumber:"",code:"",psw:""},loginPhoneRules:{phoneNumber:{rules:[{required:!0,errorMessage:"请输入手机号",trigger:"blur"}]},code:{rules:[{required:!0,errorMessage:"请输入验证码",trigger:"blur"}]}},loginPswRules:{phoneNumber:{rules:[{required:!0,errorMessage:"请输入账号",trigger:"blur"}]},psw:{rules:[{required:!0,errorMessage:"请输入密码"}]}},time:"获取验证码",count:59,isGeting:!1,disable:!1,countDown:null}},methods:{getCode:function(){var n=this;""==this.userData.phoneNumber?e.showToast({title:"请输入手机号/邮箱",icon:"none"}):(e.showLoading({title:"验证码获取中..."}),e.request({method:"GET",url:this.$baseUrl+"/wechat/api/smsCodeGet",header:{"content-type":"application/json"},data:{phoneNumber:this.userData.phoneNumber},complete:function(o){e.hideLoading(),200==o.statusCode&&(n.countDown=setInterval((function(){n.count<1?(n.isGeting=!1,n.disable=!1,n.time="获取验证码",n.count=59,console.log(n.time),clearInterval(n.countDown),n.countDown=null):(n.isGeting=!0,n.disable=!0,n.time=n.count--+"s后可重发")}),1e3)),0!=n.checkBack(o,!0)&&n.$isResolve()}}))},userLoginPhone:function(){var n=this;this.$refs.loginFormPhone.validate().then((function(o){console.log("表单数据",o),e.showLoading({title:"登录中......"}),e.request({method:"POST",url:n.$baseUrl+"/wechat/api/wechatLogin",header:{"content-type":"application/json"},data:{username:n.userData.phoneNumber,code:n.userData.code},complete:function(o){console.log("登录啦",o.data),e.hideLoading(),0!=n.checkBack(o,!0)?(e.setStorageSync("userAddress",encodeURIComponent(JSON.stringify(o.data.address))),n.setUserInfo(o),n.$isResolve(),e.switchTab({url:"./mine"}),e.login({complete:function(o){console.log("code值"),console.log(o),e.request({url:n.$baseUrl+"/wechat/api/getOpenId?jsCode="+o.code,header:{"content-type":"application/json",token:e.getStorageSync("token")},complete:function(e){console.log("获取openID"),console.log(e)}})}})):n.$isResolve()}})})).catch((function(e){console.log("表单错误",e)}))},userLoginPsw:function(){var n=this;this.$refs.loginFormPsw.validate().then((function(o){console.log("表单数据",o),e.showLoading({title:"登录中......"}),e.request({method:"POST",url:n.$baseUrl+"/wechat/api/wechatLogin",header:{"content-type":"application/json"},data:{username:n.userData.phoneNumber,psw:n.userData.psw},complete:function(o){console.log("登录啦",o.data),e.hideLoading(),0!=n.checkBack(o,!0)?(e.setStorageSync("userAddress",encodeURIComponent(JSON.stringify(o.data.address))),n.setUserInfo(o),e.switchTab({url:"./mine"}),e.login({complete:function(o){console.log("code值"),console.log(o),e.request({url:n.$baseUrl+"/wechat/api/getOpenId?jsCode="+o.code,header:{"content-type":"application/json",token:e.getStorageSync("token")},complete:function(e){console.log("获取openID"),console.log(e)}})}})):n.$isResolve()}})})).catch((function(e){console.log("表单错误",e)}))},selectLoginPhone:function(e){console.log(e),this.selectLogin=0},selectLoginPsw:function(){this.selectLogin=1}}};n.default=o}).call(this,o(1)["default"])},70:function(e,n,o){"use strict";o.r(n);var t=o(71),r=o.n(t);for(var s in t)"default"!==s&&function(e){o.d(n,e,(function(){return t[e]}))}(s);n["default"]=r.a},71:function(e,n,o){}},[[64,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../.sourcemap/mp-weixin/comm/login.js.map