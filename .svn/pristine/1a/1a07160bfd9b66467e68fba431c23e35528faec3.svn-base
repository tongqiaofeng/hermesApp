(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["comm/search"],{27:function(e,t,i){"use strict";(function(e){i(5);s(i(3));var t=s(i(28));function s(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=i,e(t.default)}).call(this,i(1)["createPage"])},28:function(e,t,i){"use strict";i.r(t);var s=i(29),n=i(31);for(var a in n)"default"!==a&&function(e){i.d(t,e,(function(){return n[e]}))}(a);i(38);var r,o=i(11),l=Object(o["default"])(n["default"],s["render"],s["staticRenderFns"],!1,null,"6841d06d",null,!1,s["components"],r);l.options.__file="comm/search.vue",t["default"]=l.exports},29:function(e,t,i){"use strict";i.r(t);var s=i(30);i.d(t,"render",(function(){return s["render"]})),i.d(t,"staticRenderFns",(function(){return s["staticRenderFns"]})),i.d(t,"recyclableRender",(function(){return s["recyclableRender"]})),i.d(t,"components",(function(){return s["components"]}))},30:function(e,t,i){"use strict";var s;i.r(t),i.d(t,"render",(function(){return n})),i.d(t,"staticRenderFns",(function(){return r})),i.d(t,"recyclableRender",(function(){return a})),i.d(t,"components",(function(){return s}));try{s={easyLoadimage:function(){return i.e("components/easy-loadimage/easy-loadimage").then(i.bind(null,402))}}}catch(o){if(-1===o.message.indexOf("Cannot find module")||-1===o.message.indexOf(".vue"))throw o;console.error(o.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var n=function(){var e=this,t=e.$createElement,i=(e._self._c,e.getPickerSelValue()),s=0!=e.haveData&&"腕表"==e.type?e.__map(e.bagSearchList,(function(t,i){var s=e.__get_orig(t),n=e.getShowTitle(t),a=0!=t.price?e.formatNumberRgx(t.price):null;return{$orig:s,m1:n,m2:a}})):null,n=0!=e.haveData&&"爱马仕"==e.type?e.__map(e.bagSearchList,(function(t,i){var s=e.__get_orig(t),n=0!=t.sellPrice?e.formatNumberRgx(t.priceIndi):null;return{$orig:s,m3:n}})):null,a=0!=e.haveData&&"珠宝"==e.type?e.__map(e.bagSearchList,(function(t,i){var s=e.__get_orig(t),n=0!=t.sellPrice?e.formatNumberRgx(t.sellPrice):null;return{$orig:s,m4:n}})):null;e.$mp.data=Object.assign({},{$root:{m0:i,l0:s,l1:n,l2:a}})},a=!1,r=[];n._withStripped=!0},31:function(e,t,i){"use strict";i.r(t);var s=i(32),n=i.n(s);for(var a in s)"default"!==a&&function(e){i.d(t,e,(function(){return s[e]}))}(a);t["default"]=n.a},32:function(e,t,i){"use strict";(function(e){function s(e,t){var i;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=n(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var s=0,a=function(){};return{s:a,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,l=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){l=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(l)throw r}}}}function n(e,t){if(e){if("string"===typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={data:function(){return{scrollTop:0,jewelryImgUrl:this.$baseUrl+"/jewellery/api",haveData:1,height:null,topHeight:null,select:0,isUp:0,img1:i(33),img2:i(34),img3:i(35),imgFilter1:i(36),imgFilter2:i(37),bagSearchList:[],haveMore:0,page:1,keyword:"",model:"",size:"",sort:"",sizeList:[],jewelleryModelList:[],type:"腕表",selList:["腕表","爱马仕","珠宝"],tag:"",brand:"",series:"",topConHeight:0,initType:""}},mounted:function(){var t=this,i=e.createSelectorQuery().in(this);i.select("#search-top").boundingClientRect((function(e){t.topConHeight=e.height})).exec()},onLoad:function(t){var i=this;e.getSystemInfo({success:function(e){i.height=e.statusBarHeight}});var s=e.getStorageSync("initType");s&&(this.initType=s,"J"==this.initType?(this.selList=["珠宝"],this.type="珠宝"):"H"==this.initType?(this.selList=["爱马仕"],this.type="爱马仕"):"W"==this.initType&&(this.selList=["腕表"],this.type="腕表")),this.selList.indexOf(t.type)>-1&&(this.type=t.type,this.model=void 0===t.model?"":JSON.parse(decodeURIComponent(t.model)),this.size=void 0===t.size?"":JSON.parse(decodeURIComponent(t.size)),this.tag=t.tag,this.brand=void 0===t.brand?"":JSON.parse(decodeURIComponent(t.brand)),this.series=void 0===t.series?"":JSON.parse(decodeURIComponent(t.series))),this.getList(),this.getModelSizeList(),this.getJewelryClassify()},onPullDownRefresh:function(){this.page=1,this.bagSearchList=[],this.haveMore=0,this.getList(),e.stopPullDownRefresh()},onReachBottom:function(){0==this.haveMore&&(this.page++,this.getList())},onReady:function(){this.hidePageNavInWechatBrowser()},onPageScroll:function(e){this.scrollTop=e.scrollTop},methods:{getPickerSelValue:function(){var e=this.selList.indexOf(this.type);return e<0&&(e=0),e},selTypeChange:function(e){this.type=this.selList[Number(e.detail.value)],this.page=1,this.size="",this.keyword="",this.sort="",this.bagSearchList=[],this.haveMore=0,this.getList()},getList:function(){var t=this;e.showLoading({title:"加载中......"}),"爱马仕"==this.type?e.request({method:"POST",url:this.$baseUrl+"/wechat/api/modelSearch",data:{keyword:this.keyword,model:this.model,size:this.size,page:this.page,pageNum:10,sort:this.sort},header:{"content-type":"application/json"},complete:function(i){if(e.hideLoading(),0==i.data.length)t.haveMore=1;else{var s=t.bagSearchList.concat(i.data);t.bagSearchList=s}0==t.bagSearchList.length?(t.haveData=0,e.showToast({icon:"none",title:"暂无数据"})):t.haveData=1,setTimeout((function(){t.scrollTop++}),500)}}):"珠宝"==this.type?e.request({method:"POST",url:this.$baseUrl+"/jewellery/api/jewellerySearch?page="+this.page+"&pageNum=10",data:{keyword:this.keyword,tag:this.tag,sort:this.sort},header:{"content-type":"application/json"},complete:function(i){if(e.hideLoading(),0==i.data.length)t.haveMore=1;else{var s=t.bagSearchList.concat(i.data.list);t.bagSearchList=s}0==t.bagSearchList.length?(t.haveData=0,e.showToast({icon:"none",title:"暂无数据"})):t.haveData=1,setTimeout((function(){t.scrollTop++}),500)}}):"腕表"==this.type&&e.request({method:"POST",url:this.$baseUrl+"/watch/api/watchSearch",data:{keyword:this.keyword,brand:this.brand,series:this.series,page:this.page,pageNum:10,sort:this.sort},header:{"content-type":"application/json"},complete:function(i){if(e.hideLoading(),0==i.data.length)t.haveMore=1;else{for(var s=i.data.data,n=0;n<s.length;++n)0==s[n].pics.length?s[n].pics="~@/static/imgs/common/nopic.jpg":s[n].pics=t.$baseUrl+"/watch/api"+s[n].pics.replace("\\","/");t.bagSearchList=t.bagSearchList.concat(s)}0==t.bagSearchList.length?(t.haveData=0,e.showToast({icon:"none",title:"暂无数据"})):t.haveData=1,setTimeout((function(){t.scrollTop++}),500)}})},searchInput:function(){if(this.page=1,this.bagSearchList=[],this.select=0,this.isUp=0,this.haveMore=0,this.model="",this.size="",this.tag="",this.sort="",this.getList(),"爱马仕"==this.type){var e,t=s(this.modelSizeList);try{for(t.s();!(e=t.n()).done;){var i,n=e.value,a=s(n.list);try{for(a.s();!(i=a.n()).done;){var r=i.value;if(-1!==r.model.indexOf(this.keyword))return this.model=r.model,void(this.sizeList=r.sizeList)}}catch(o){a.e(o)}finally{a.f()}}}catch(o){t.e(o)}finally{t.f()}}},filterSel01:function(){this.page=1,this.bagSearchList=[],this.select=0,this.isUp=0,this.haveMore=0,this.sort="",this.getList()},filterSel02:function(){this.page=1,this.bagSearchList=[],this.select=1,1==this.isUp?(this.isUp=2,this.sort=-2):(this.isUp,this.isUp=1,this.sort=2),this.haveMore=0,this.getList()},filterSel03:function(){var t=this;"爱马仕"==this.type&&0==this.sizeList.length||"腕表"==this.type?this.goToClassify():2==this.select?this.select=3:(this.select=2,this.$nextTick((function(){var i=e.createSelectorQuery().select(".upAndDown");i.boundingClientRect((function(e){t.topHeight=e.height})).exec()})))},sizeSelect:function(e){this.select=3,this.page=1,this.bagSearchList=[],this.isUp=0,this.sort="",this.haveMore=0,this.size=e,this.getList()},tagSelect:function(e){this.select=3,this.page=1,this.bagSearchList=[],this.isUp=0,this.sort="",this.haveMore=0,this.tag=e,this.getList()},checkDetails:function(t){"爱马仕"==this.type?e.navigateTo({url:"../hermes/details?id="+t.id}):"珠宝"==this.type?e.navigateTo({url:"../jewelry/jewelryDetails?id="+t.id}):"腕表"==this.type&&e.navigateTo({url:"../watch/detail?id="+t.id})},getModelSizeList:function(){var t=this;e.request({url:this.$baseUrl+"/wechat/api/modelSort",header:{"content-type":"application/json"},complete:function(e){t.modelSizeList=e.data,t.getSizeList()}})},getSizeList:function(){var e,t=s(this.modelSizeList);try{for(t.s();!(e=t.n()).done;){var i,n=e.value,a=s(n.list);try{for(a.s();!(i=a.n()).done;){var r=i.value;r.model==this.model&&(this.sizeList=r.sizeList)}}catch(o){a.e(o)}finally{a.f()}}}catch(o){t.e(o)}finally{t.f()}},getJewelryClassify:function(){var t=this;e.request({url:this.$baseUrl+"/jewellery/api/jewelleryModelSort",header:{"content-type":"application/json",token:e.getStorageSync("token")},complete:function(e){t.jewelleryModelList=e.data}})},goBack:function(){e.navigateBack({delta:1})},goToClassify:function(){getApp().globalData.pageInItem=this.type,e.switchTab({url:"classify"})},getShowTitle:function(e){return e.series&&"其他"!=e.series?e.brand+" - "+e.series:e.brand}}};t.default=r}).call(this,i(1)["default"])},38:function(e,t,i){"use strict";i.r(t);var s=i(39),n=i.n(s);for(var a in s)"default"!==a&&function(e){i.d(t,e,(function(){return s[e]}))}(a);t["default"]=n.a},39:function(e,t,i){}},[[27,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../.sourcemap/mp-weixin/comm/search.js.map