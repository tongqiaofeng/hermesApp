(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["watch/detail"],{371:function(e,t,n){"use strict";(function(e){n(5);i(n(3));var t=i(n(372));function i(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n(1)["createPage"])},372:function(e,t,n){"use strict";n.r(t);var i=n(373),r=n(375);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n(377);var a,s=n(11),c=Object(s["default"])(r["default"],i["render"],i["staticRenderFns"],!1,null,"22da5f9f",null,!1,i["components"],a);c.options.__file="watch/detail.vue",t["default"]=c.exports},373:function(e,t,n){"use strict";n.r(t);var i=n(374);n.d(t,"render",(function(){return i["render"]})),n.d(t,"staticRenderFns",(function(){return i["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return i["recyclableRender"]})),n.d(t,"components",(function(){return i["components"]}))},374:function(e,t,n){"use strict";var i;n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return a})),n.d(t,"recyclableRender",(function(){return o})),n.d(t,"components",(function(){return i}));try{i={uniSwiperDot:function(){return n.e("uni_modules/uni-swiper-dot/components/uni-swiper-dot/uni-swiper-dot").then(n.bind(null,446))},uniSegmentedControl:function(){return n.e("uni_modules/uni-segmented-control/components/uni-segmented-control/uni-segmented-control").then(n.bind(null,474))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var e=this,t=e.$createElement,n=(e._self._c,e.getPrice(e.detail.price,"￥")),i=e.getPrice(e.detail.usPrice,"USD"),r=e.getPrice(e.detail.publicPrice,"￥","暂无"),o=1==e.tabSelType&&e.detail.cost?e.formatNumberRgx(e.detail.cost):null,a=1==e.tabSelType&&e.detail.cost&&"admin"==e.role?e.formatNumberRgx(e.detail.cnCost):null,s=1==e.tabSelType&&e.detail.pricePeer&&0!=e.detail.pricePeer?e.formatNumberRgx(e.detail.pricePeer):null,c=1==e.tabSelType&&e.detail.pricePeer&&0!=e.detail.pricePeer&&"admin"==e.role?e.formatNumberRgx(e.detail.cnPricePeer):null,l=2==e.tabSelType&&e.detail.saleTotalHkPrice?e.formatNumberRgx(e.detail.saleTotalHkPrice):null,u=2==e.tabSelType&&e.detail.saleTotalHkPrice&&"admin"==e.role?e.formatNumberRgx(e.detail.saleTotalCnPrice):null,d=2==e.tabSelType&&e.detail.saleTotalHkPrice&&e.detail.cost?e.formatNumberRgx(e.detail.saleTotalHkPrice-e.detail.cost):null,h=2==e.tabSelType&&e.detail.saleTotalHkPrice&&e.detail.cost&&"admin"==e.role?e.formatNumberRgx(e.detail.saleTotalCnPrice-e.detail.cnCost):null,m=3==e.tabSelType&&e.detail.allPaymentList.length>0?e.__map(e.detail.allPaymentList,(function(t,n){var i=e.__get_orig(t),r=e.getTradeType(t.tradeType),o=e.formatNumberRgx(t.totalHkPrice),a=e.getRateDesc(t);return{$orig:i,m11:r,m12:o,m13:a}})):null;e.$mp.data=Object.assign({},{$root:{m0:n,m1:i,m2:r,m3:o,m4:a,m5:s,m6:c,m7:l,m8:u,m9:d,m10:h,l0:m}})},o=!1,a=[];r._withStripped=!0},375:function(e,t,n){"use strict";n.r(t);var i=n(376),r=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=r.a},376:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(125));function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,i,r,o,a){try{var s=e[o](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(i,r)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){o(a,i,r,s,c,"next",e)}function c(e){o(a,i,r,s,c,"throw",e)}s(void 0)}))}}var s={data:function(){return{role:"",token:"",currency:"",detail:{},imgSrc:[],dotsStyles:{width:6,height:6,backgroundColor:"#fff",border:"#fff",selectedBackgroundColor:"#b0edd5",selectedBorder:"#b0edd5"},current:0,current2:0,collect1:n(128),collect2:n(129),tabItems:["参数"],tabCurrent:0,tabSelType:0,isShow:"0",detailId:null,share:{title:"PAULIANA 宝莉安娜高级珠宝",path:"/watch/detail?id="+this.detailId,imageUrl:"",desc:"",content:""}}},onLoad:function(t){var n=this;return a(i.default.mark((function r(){return i.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,n.$onLaunched;case 2:n.role=e.getStorageSync("role"),n.token=e.getStorageSync("token"),n.currency=getApp().globalData.userInfo.currency,n.detailId=t.id,n.getDetails(t.id);case 7:case"end":return i.stop()}}),r)})))()},onReady:function(){this.hidePageNavInWechatBrowser()},onPullDownRefresh:function(){e.showLoading({title:"正在刷新"}),this.getDetails(this.detailId),e.stopPullDownRefresh()},onShareAppMessage:function(t){return this.share.path="/watch/details?id="+this.detailId,{title:this.share.title,path:this.share.path,imageUrl:this.share.imageUrl,desc:this.share.desc,content:this.share.content,success:function(t){e.showToast({title:"分享成功",icon:"none"})},fail:function(t){e.showToast({title:"分享失败",icon:"none"})}}},onShareTimeline:function(t){return this.share.path="/watch/detail?id="+this.detailId,{title:this.share.title,path:this.share.path,imageUrl:this.share.imageUrl,desc:this.share.desc,content:this.share.content,success:function(t){e.showToast({title:"分享成功",icon:"none"})},fail:function(t){e.showToast({title:"分享失败",icon:"none"})}}},methods:{onClickTabItem:function(e){this.tabCurrent!=e.currentIndex&&(this.tabCurrent=e.currentIndex,"参数"==this.tabItems[this.tabCurrent]?this.tabSelType=0:"价格"==this.tabItems[this.tabCurrent]?this.tabSelType=1:"销售"==this.tabItems[this.tabCurrent]?this.tabSelType=2:"资金流"==this.tabItems[this.tabCurrent]?this.tabSelType=3:this.tabSelType=0)},swiperChange:function(e){this.current=e.detail.current},imagePreview:function(t){e.previewImage({current:t,urls:this.imgSrc})},getDetails:function(t){var n=this;e.showLoading({title:"加载中......"}),e.request({url:this.$baseUrl+"/watch/api/watchInfo?id="+t,header:{"content-type":"application/json",token:e.getStorageSync("token")},success:function(t){e.hideLoading(),console.log(t),n.detail=t.data,e.setNavigationBarTitle({title:n.detail.brand+" - "+n.detail.model});var i=t.data.pics.split("|");n.imgSrc=[];for(var r=0;r<i.length-1;r++)n.imgSrc.push(n.$baseUrl+"/watch/api"+i[r].trim());n.setTabItem()},fail:function(t){e.hideLoading(),console.log(t)}})},setTabItem:function(){this.tabItems=["参数"],(this.detail.createTime||this.detail.cost||this.detail.pricePeer||this.detail.note)&&this.tabItems.push("价格"),(this.detail.soldTime||this.detail.saleTotalHkPrice||this.detail.customer)&&this.tabItems.push("销售")},getTradeType:function(e){return 0==e?"買入":1==e?"賣出":2==e?"轉賬":3==e?"買入退款":4==e?"賣出退款":5==e?"其他收入":6==e?"其他支出":7==e?"-":void 0},getRateDesc:function(e){return e.money>0?"【"+e.currency+" "+this.formatNumberRgx(e.money)+" / "+e.totalToHkRate+"】":""},goIndex:function(){e.switchTab({url:"../comm/index"})},isCollect:function(){var t=this;if(0==e.getStorageSync("token").length)e.showToast({title:"请登录",icon:"none",success:function(){e.switchTab({url:"../comm/mine"})}});else{console.log("添加与取消收藏");var n=[];n.push({id:this.detail.id,type:0}),e.request({method:"POST",url:this.$baseUrl+"/wechat/api/favoriteSave",data:{stockList:n},header:{token:e.getStorageSync("token")},complete:function(e){console.log("添加与取消收藏"),console.log(e),0!=t.checkBack(e,!0)&&t.getDetails(t.detail.id)}})}},serviceClick:function(){e.navigateTo({url:"../comm/service?id="+this.detail.id})},addCart:function(){0==e.getStorageSync("token").length?e.showToast({title:"请登录",icon:"none",success:function(){e.switchTab({url:"../comm/mine"})}}):e.request({url:this.$baseUrl+"/cart/api/shoppingCartAdd",method:"POST",header:{"content-type":"application/json",token:e.getStorageSync("token")},data:{id:this.detail.id,num:1,productType:1},success:function(t){console.log("添加购物车"),console.log(t),200==t.statusCode?e.showToast({icon:"none",title:"添加成功"}):e.showToast({icon:"none",title:t.data.message})}})},sureOrder:function(){if(0==e.getStorageSync("token").length)e.showToast({title:"请登录",icon:"none",success:function(){e.switchTab({url:"../comm/mine"})}});else{var t=[{id:this.detail.id,imgSrc:this.imgSrc[0],name:encodeURIComponent(this.detail.model),price:this.detail.price,usPrice:this.detail.usPrice,num:1,currency:"CNY",productCategory:1}];console.log("跳转传参"),console.log(JSON.stringify(t)),e.navigateTo({url:"../order/confirmAnOrder?productList="+encodeURIComponent(JSON.stringify(t))})}}}};t.default=s}).call(this,n(1)["default"])},377:function(e,t,n){"use strict";n.r(t);var i=n(378),r=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=r.a},378:function(e,t,n){}},[[371,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../.sourcemap/mp-weixin/watch/detail.js.map