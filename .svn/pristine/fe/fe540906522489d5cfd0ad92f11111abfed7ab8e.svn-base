(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["jewelry/jewelryFinished"],{100:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(){n.e("components/popwnd/popwnd_select_blue").then(function(){return resolve(n(439))}.bind(null,n)).catch(n.oe)},o={components:{popwndSelect:a},data:function(){return{imgUrl:this.$baseUrl+"/jewellery/api",haveData:1,height:null,keyWord:"",page:1,bShowStock:!1,stockIdx:0,stocks:[],bShowState:!1,stateIdx:3,states:[{id:-1,name:"全部"},{id:0,name:"存货"},{id:1,name:"运输中"},{id:5,name:"未出售"},{id:4,name:"已出售"}],bShowTag:!1,tagIdx:0,tagList:[],list:[],total:0,haveMore:0}},onLoad:function(){var e=this;t.getSystemInfo({success:function(t){e.height=t.statusBarHeight}}),this.stockIdx=0,this.stateIdx=3,0==this.list.length&&t.getStorageSync("token").length>0&&(console.log("重新获取数据"),this.getStockList(),this.getTagList(),this.search())},onPullDownRefresh:function(){t.showLoading({title:"正在刷新"}),console.log("获取数据"),this.page=1,this.list=[],this.haveMore=0,this.search(),this.getStockList(),t.stopPullDownRefresh()},onReachBottom:function(){0==this.haveMore&&(this.page++,this.search())},methods:{search:function(){var e=this;t.showLoading({title:"加载中..."}),this.soldNum=0,this.reserveNum=0;var n={};n={keyword:this.keyWord.trim()},this.stockIdx>0&&(n.storageId=this.stocks[this.stockIdx].id),this.stateIdx>0&&(n.state=this.states[this.stateIdx].id),this.tagIdx>0&&(n.tag=this.tagList[this.tagIdx]),t.request({url:this.$baseUrl+"/jewellery/api/productStockSearch?page="+this.page+"&pageNum=10",method:"POST",header:{"content-type":"application/json",token:t.getStorageSync("token")},data:n,complete:function(n){if(t.hideLoading(),console.log("珠宝成品列表"),console.log(n),0!=e.checkBack(n)){if(e.total=n.data.total,0==n.data.list.length)e.haveMore=1;else{var a=e.list.concat(n.data.list);e.list=a}0==e.list.length?(e.haveData=0,t.showToast({icon:"none",title:"暂无数据"})):e.haveData=1}}})},getStockList:function(){var e=this;t.request({url:this.$baseUrl+"/jewellery/api/storageList",header:{"content-type":"application/json",token:t.getStorageSync("token")},complete:function(n){console.log("库存地列表"),console.log(n),t.hideLoading(),0!=e.checkBack(n,!0)&&(n.data.length>0&&(e.stocks=n.data),console.log(e.stocks))}})},getTagList:function(){var e=this;t.request({url:this.$baseUrl+"/jewellery/api/tagList",header:{"content-type":"application/json",token:t.getStorageSync("token")},complete:function(n){console.log("标签列表"),console.log(n),t.hideLoading(),0!=e.checkBack(n,!0)&&n.data.length>0&&(e.tagList=n.data)}})},inputChange:function(){this.page=1,this.list=[],this.haveMore=0,this.search(),t.pageScrollTo({scrollTop:0,duration:300})},stockChange:function(e){this.stockIdx=e.sel,this.page=1,this.list=[],this.haveMore=0,this.search(),t.pageScrollTo({scrollTop:0,duration:300})},stateChange:function(e){this.stateIdx=e.sel,this.page=1,this.list=[],this.haveMore=0,this.search(),t.pageScrollTo({scrollTop:0,duration:300})},tagChange:function(e){this.tagIdx=e.sel,this.page=1,this.list=[],this.haveMore=0,this.search(),t.pageScrollTo({scrollTop:0,duration:300})},getSaleStateClr:function(t){return 0==t.state?"#54b7eb":1==t.state?"#6bcda5":"#ef5b5b"},getSaleState:function(t){for(var e=0;e<this.states.length;++e){if(t.state==this.states[e].id)return this.states[e].name;if(4==t.state)return"已售"}return""},checkDetails:function(e){t.navigateTo({url:"./jewelryDetails?id="+e.id})},goBack:function(){t.navigateBack({delta:1})}}};e.default=o}).call(this,n(1)["default"])},101:function(t,e,n){"use strict";n.r(e);var a=n(102),o=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e["default"]=o.a},102:function(t,e,n){},95:function(t,e,n){"use strict";(function(t){n(5);a(n(3));var e=a(n(96));function a(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n(1)["createPage"])},96:function(t,e,n){"use strict";n.r(e);var a=n(97),o=n(99);for(var s in o)"default"!==s&&function(t){n.d(e,t,(function(){return o[t]}))}(s);n(101);var i,r=n(11),c=Object(r["default"])(o["default"],a["render"],a["staticRenderFns"],!1,null,"53d50f79",null,!1,a["components"],i);c.options.__file="jewelry/jewelryFinished.vue",e["default"]=c.exports},97:function(t,e,n){"use strict";n.r(e);var a=n(98);n.d(e,"render",(function(){return a["render"]})),n.d(e,"staticRenderFns",(function(){return a["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return a["recyclableRender"]})),n.d(e,"components",(function(){return a["components"]}))},98:function(t,e,n){"use strict";var a;n.r(e),n.d(e,"render",(function(){return o})),n.d(e,"staticRenderFns",(function(){return i})),n.d(e,"recyclableRender",(function(){return s})),n.d(e,"components",(function(){return a}));var o=function(){var t=this,e=t.$createElement,n=(t._self._c,0!=t.haveData?t.__map(t.list,(function(e,n){var a=t.__get_orig(e),o=e.img?e.img.split("|"):null,s=0==t.stateIdx||3==t.stateIdx?t.getSaleStateClr(e):null,i=0==t.stateIdx||3==t.stateIdx?t.getSaleState(e):null,r=4==e.state?t.getPrice(e.saleMoney,e.saleCurrency):null,c=4==e.state&&"CNY"==e.saleCurrency?t.getPrice(t.costPrice(e.saleMoney,e.totalCnPrice),"CNY"):null,l=4!=e.state?t.getPrice(e.tagPrice,"CNY"):null;return{$orig:a,g0:o,m0:s,m1:i,m2:r,m3:c,m4:l}})):null);t._isMounted||(t.e0=function(e){t.bShowStock=!0},t.e1=function(e){t.bShowTag=!0},t.e2=function(e){t.bShowState=!0}),t.$mp.data=Object.assign({},{$root:{l0:n}})},s=!1,i=[];o._withStripped=!0},99:function(t,e,n){"use strict";n.r(e);var a=n(100),o=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e["default"]=o.a}},[[95,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../.sourcemap/mp-weixin/jewelry/jewelryFinished.js.map