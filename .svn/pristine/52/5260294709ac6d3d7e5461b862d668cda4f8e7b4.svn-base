(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["jewelry/jewelryDetails"],{119:function(e,t,r){"use strict";(function(e){r(5);i(r(3));var t=i(r(120));function i(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=r,e(t.default)}).call(this,r(1)["createPage"])},120:function(e,t,r){"use strict";r.r(t);var i=r(121),l=r(123);for(var n in l)"default"!==n&&function(e){r.d(t,e,(function(){return l[e]}))}(n);r(130);var o,s=r(11),a=Object(s["default"])(l["default"],i["render"],i["staticRenderFns"],!1,null,"72a7a48b",null,!1,i["components"],o);a.options.__file="jewelry/jewelryDetails.vue",t["default"]=a.exports},121:function(e,t,r){"use strict";r.r(t);var i=r(122);r.d(t,"render",(function(){return i["render"]})),r.d(t,"staticRenderFns",(function(){return i["staticRenderFns"]})),r.d(t,"recyclableRender",(function(){return i["recyclableRender"]})),r.d(t,"components",(function(){return i["components"]}))},122:function(e,t,r){"use strict";var i;r.r(t),r.d(t,"render",(function(){return l})),r.d(t,"staticRenderFns",(function(){return o})),r.d(t,"recyclableRender",(function(){return n})),r.d(t,"components",(function(){return i}));try{i={uniSwiperDot:function(){return r.e("uni_modules/uni-swiper-dot/components/uni-swiper-dot/uni-swiper-dot").then(r.bind(null,446))},easyLoadimage:function(){return r.e("components/easy-loadimage/easy-loadimage").then(r.bind(null,402))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var l=function(){var e=this,t=e.$createElement,r=(e._self._c,0!=e.jewelryDetails.sellPrice?e.formatNumberRgx(e.jewelryDetails.sellPrice):null),i="admin"==e.role&&e.jewelryDetails.costPrice?e.formatNumberRgx(e.jewelryDetails.costPrice):null,l="admin"==e.role&&e.jewelryDetails.processCost?e.formatNumberRgx(e.jewelryDetails.processCost):null,n="admin"==e.role&&e.jewelryDetails.totalCnPrice?e.formatNumberRgx(e.jewelryDetails.totalCnPrice):null,o="admin"==e.role&&e.jewelryDetails.totalHkPrice?e.formatNumberRgx(e.jewelryDetails.totalHkPrice):null,s="admin"==e.role&&e.jewelryDetails.lowestSellPrice?e.formatNumberRgx(e.jewelryDetails.lowestSellPrice):null,a="admin"==e.role&&e.jewelryDetails.adviceWholesalePrice?e.formatNumberRgx(e.jewelryDetails.adviceWholesalePrice):null,c="admin"==e.role&&e.jewelryDetails.adviseSellPrice?e.formatNumberRgx(e.jewelryDetails.adviseSellPrice):null,u="admin"==e.role&&e.jewelryDetails.agentPrice?e.formatNumberRgx(e.jewelryDetails.agentPrice):null,m="admin"==e.role&&e.jewelryDetails.counterLowestSellPrice?e.formatNumberRgx(e.jewelryDetails.counterLowestSellPrice):null,d="admin"==e.role&&e.jewelryDetails.saleCommission?e.formatNumberRgx(e.jewelryDetails.saleCommission):null,w="admin"!=e.role&&"seller1"==e.role&&e.jewelryDetails.processCost?e.formatNumberRgx(e.jewelryDetails.processCost):null,f="admin"!=e.role&&"seller1"==e.role&&e.jewelryDetails.adviceWholesalePrice&&1==e.showPrice2?e.formatNumberRgx(e.jewelryDetails.adviceWholesalePrice):null,h="admin"!=e.role&&"seller1"==e.role&&e.jewelryDetails.agentPrice&&1==e.showPrice3?e.formatNumberRgx(e.jewelryDetails.agentPrice):null,g="admin"!=e.role&&"seller1"==e.role&&e.jewelryDetails.counterLowestSellPrice&&1==e.showPrice4?e.formatNumberRgx(e.jewelryDetails.counterLowestSellPrice):null,y="admin"!=e.role&&"seller1"!=e.role&&"seller2"==e.role&&e.jewelryDetails.counterLowestSellPrice&&1==e.showPrice1?e.formatNumberRgx(e.jewelryDetails.counterLowestSellPrice):null,p="admin"!=e.role&&"seller1"!=e.role&&"seller2"!=e.role&&"agent1"==e.role&&e.jewelryDetails.agentPrice&&1==e.showPrice1?e.formatNumberRgx(e.jewelryDetails.agentPrice):null,j="admin"!=e.role&&"seller1"!=e.role&&"seller2"!=e.role&&"agent1"==e.role&&e.jewelryDetails.counterLowestSellPrice&&1==e.showPrice2?e.formatNumberRgx(e.jewelryDetails.counterLowestSellPrice):null,D=4==e.jewelryDetails.state&&"admin"==e.role?e.formatNumberRgx(e.jewelryDetails.saleMoney):null,P=4==e.jewelryDetails.state&&"admin"==e.role?e.formatNumberRgx(e.jewelryDetails.sellTotalHkPrice):null,S=4==e.jewelryDetails.state&&"admin"==e.role&&e.jewelryDetails.saleCurrency==e.jewelryDetails.currency?e.formatNumberRgx(e.costPrice(e.jewelryDetails.saleMoney,e.jewelryDetails.costPrice)):null;e._isMounted||(e.e0=function(t){e.showPrice2=!0},e.e1=function(t){e.showPrice2=!1},e.e2=function(t){e.showPrice3=!0},e.e3=function(t){e.showPrice3=!1},e.e4=function(t){e.showPrice4=!0},e.e5=function(t){e.showPrice4=!1},e.e6=function(t){e.showPrice1=!0},e.e7=function(t){e.showPrice1=!1},e.e8=function(t){e.showPrice1=!0},e.e9=function(t){e.showPrice1=!1},e.e10=function(t){e.showPrice2=!0},e.e11=function(t){e.showPrice2=!1}),e.$mp.data=Object.assign({},{$root:{m0:r,m1:i,m2:l,m3:n,m4:o,m5:s,m6:a,m7:c,m8:u,m9:m,m10:d,m11:w,m12:f,m13:h,m14:g,m15:y,m16:p,m17:j,m18:D,m19:P,m20:S}})},n=!1,o=[];l._withStripped=!0},123:function(e,t,r){"use strict";r.r(t);var i=r(124),l=r.n(i);for(var n in i)"default"!==n&&function(e){r.d(t,e,(function(){return i[e]}))}(n);t["default"]=l.a},124:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=l(r(125));function l(e){return e&&e.__esModule?e:{default:e}}function n(e,t,r,i,l,n,o){try{var s=e[n](o),a=s.value}catch(c){return void r(c)}s.done?t(a):Promise.resolve(a).then(i,l)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(i,l){var o=e.apply(t,r);function s(e){n(o,i,l,s,a,"next",e)}function a(e){n(o,i,l,s,a,"throw",e)}s(void 0)}))}}var s={data:function(){return{scrollTop:0,imgUrl:this.$baseUrl+"/jewellery/api",role:"",token:e.getStorageSync("token"),jewelryDetails:{discount:[]},imgSrc:[],imgSrc2:[],imgSrc3:[],dotsStyles:{width:6,height:6,backgroundColor:"#fff",border:"#fff",selectedBackgroundColor:"#b0edd5",selectedBorder:"#b0edd5"},current:0,current2:0,collect1:r(128),collect2:r(129),isShow:"0",detailId:null,share:{title:"PAULIANA 宝莉安娜高级珠宝",path:"/jewelry/jewelryDetails?id="+this.detailId,imageUrl:"",desc:"",content:""},showPrice1:!1,showPrice2:!1,showPrice3:!1,showPrice4:!1}},onLoad:function(e){var t=this;return o(i.default.mark((function r(){var l;return i.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$onLaunched;case 2:l=getApp().globalData.userInfo.userPermissions,l&&l.jewelry_user&&(t.role=l.jewelry_user.seller),console.log(l),t.detailId=e.id,t.getDetails();case 7:case"end":return r.stop()}}),r)})))()},onReady:function(){this.hidePageNavInWechatBrowser()},onPageScroll:function(e){this.scrollTop=e.scrollTop},onPullDownRefresh:function(){e.showLoading({title:"正在刷新"}),this.getDetails(),e.stopPullDownRefresh()},onShareAppMessage:function(t){return this.share.path="/jewelry/jewelryDetails?id="+this.detailId,{title:this.share.title,path:this.share.path,imageUrl:this.share.imageUrl,desc:this.share.desc,content:this.share.content,success:function(t){e.showToast({title:"分享成功",icon:"none"})},fail:function(t){e.showToast({title:"分享失败",icon:"none"})}}},onShareTimeline:function(t){return this.share.path="/jewelry/jewelryDetails?id="+this.detailId,{title:this.share.title,path:this.share.path,imageUrl:this.share.imageUrl,desc:this.share.desc,content:this.share.content,success:function(t){e.showToast({title:"分享成功",icon:"none"})},fail:function(t){e.showToast({title:"分享失败",icon:"none"})}}},methods:{isShowChange:function(e){console.log(e),"0"==this.isShow?this.isShow="1":"1"==this.isShow&&(this.isShow="0")},swiperChange:function(e){this.current=e.detail.current},swiperChange2:function(e){this.current2=e.detail.current},imagePreview:function(t){e.previewImage({current:t,urls:this.imgSrc})},imagePreview2:function(t){e.previewImage({current:t,urls:this.imgSrc2})},imagePreview3:function(t){e.previewImage({current:t,urls:this.imgSrc3})},getDetails:function(t){var r=this;e.showLoading({title:"加载中......"}),e.request({url:this.$baseUrl+"/jewellery/api/jewelleryInfo?id="+this.detailId,header:{"content-type":"application/json",token:e.getStorageSync("token")},success:function(t){if(e.hideLoading(),console.log(t),r.jewelryDetails=t.data.productInfo,e.setNavigationBarTitle({title:r.jewelryDetails.productName}),r.imgSrc=[],""!=r.jewelryDetails.img&&null!=r.jewelryDetails.img)if(-1==r.jewelryDetails.img.indexOf("|"))r.imgSrc.push(r.imgUrl+"/file/"+r.jewelryDetails.img);else for(var i=r.jewelryDetails.img.split("|"),l=0;l<i.length;l++)r.imgSrc.push(r.imgUrl+"/file/"+i[l].trim());if(r.imgSrc2=[],""!=r.jewelryDetails.designImg&&null!=r.jewelryDetails.designImg)if(-1==r.jewelryDetails.designImg.indexOf("|"))r.imgSrc2.push(r.jewelryDetails.designImg);else for(var n=r.jewelryDetails.designImg.split("|"),o=0;o<n.length;o++)r.imgSrc2.push(n[o].trim());if(r.imgSrc3=[],""!=r.jewelryDetails.detailImg&&null!=r.jewelryDetails.detailImg)if(-1==r.jewelryDetails.detailImg.indexOf("|"))r.imgSrc3.push(r.imgUrl+"/file/"+r.jewelryDetails.detailImg);else for(var s=r.jewelryDetails.detailImg.split("|"),a=0;a<s.length;a++)r.imgSrc3.push(r.imgUrl+"/file/"+s[a].trim());"admin"!=r.role&&"seller1"!=r.role&&"seller2"!=r.role&&"agent1"!=r.role||(r.imgSrc3.splice(0,1),r.imgSrc3.length>4&&(r.imgSrc3.pop(),r.imgSrc3.pop(),r.imgSrc3.pop(),r.imgSrc3.pop())),r.jewelryDetails.certs=[];var c=[];c=r.jewelryDetails.certificateNumber.indexOf(",")>0?r.jewelryDetails.certificateNumber.split(","):r.jewelryDetails.certificateNumber.split("，");for(var u=0;u<c.length;++u){var m=c[u].trim();m.length>0&&r.jewelryDetails.certs.push(m)}r.jewelryDetails.discount=[];var d=[];d=r.jewelryDetails.activityInfo.indexOf(",")>0?r.jewelryDetails.activityInfo.split(","):r.jewelryDetails.activityInfo.split("，");for(var w=0;w<d.length;++w){var f=d[w].trim();f.length>0&&r.jewelryDetails.discount.push(f)}setTimeout((function(){r.scrollTop++}),500)},fail:function(t){e.hideLoading(),console.log(t)}})},goIndex:function(){e.switchTab({url:"../comm/index"})},isCollect:function(){var t=this;if(0==e.getStorageSync("token").length)e.showToast({title:"请登录",icon:"none",success:function(){e.switchTab({url:"../comm/mine"})}});else{console.log("添加与取消收藏");var r=[];r.push({id:this.jewelryDetails.id,type:1}),e.request({method:"POST",url:this.$baseUrl+"/wechat/api/favoriteSave",data:{stockList:r},header:{token:e.getStorageSync("token")},complete:function(e){console.log("添加与取消收藏"),console.log(e),0!=t.checkBack(e,!0)&&t.getDetails(t.jewelryDetails.id)}})}},serviceClick:function(){e.navigateTo({url:"../comm/service"})},addCart:function(){0==e.getStorageSync("token").length?e.showToast({title:"请登录",icon:"none",success:function(){e.switchTab({url:"../comm/mine"})}}):e.request({url:this.$baseUrl+"/cart/api/shoppingCartAdd",method:"POST",header:{"content-type":"application/json",token:e.getStorageSync("token")},data:{id:this.jewelryDetails.id,num:1,productType:2},success:function(t){console.log("添加购物车"),console.log(t),200==t.statusCode?e.showToast({icon:"none",title:"添加成功"}):e.showToast({icon:"none",title:t.data.message})}})},sureOrder:function(){if(0==e.getStorageSync("token").length)e.showToast({title:"请登录",icon:"none",success:function(){e.switchTab({url:"../comm/mine"})}});else{var t=[{id:this.jewelryDetails.id,imgSrc:this.imgSrc[0],name:encodeURIComponent(this.jewelryDetails.productName),price:this.jewelryDetails.sellPrice,usPrice:this.jewelryDetails.sellUsdPrice,num:1,currency:"CNY",productCategory:2}];console.log("跳转传参"),console.log(JSON.stringify(t)),e.navigateTo({url:"../order/confirmAnOrder?productList="+encodeURIComponent(JSON.stringify(t))})}}}};t.default=s}).call(this,r(1)["default"])},130:function(e,t,r){"use strict";r.r(t);var i=r(131),l=r.n(i);for(var n in i)"default"!==n&&function(e){r.d(t,e,(function(){return i[e]}))}(n);t["default"]=l.a},131:function(e,t,r){}},[[119,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../.sourcemap/mp-weixin/jewelry/jewelryDetails.js.map