(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],[function(e,t,n){"use strict";(function(e,t){n(5);var r=c(n(3)),o=c(n(6)),a=c(n(679));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}wx.__webpack_require_UNI_MP_PLUGIN__=n,r.default.config.productionTip=!1,r.default.prototype.$baseUrl="https://hk.wistechx.cn/HermesNewApi",r.default.prototype.$baseFileUrl="https://hk.wistechx.cn/HermesApi",r.default.prototype.$chatServerUrl="ws://192.168.0.118:8089/chat",r.default.config.ignoredElements.push("wx-open-launch-weapp"),r.default.prototype.checkBack=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 200==t.statusCode||(1==n&&(400==t.statusCode?e.showToast({icon:"none",title:t.data.message,duration:2e3}):300==t.statusCode?e.showToast({icon:"none",title:"请登录后再操作",duration:2e3}):e.showToast({icon:"none",title:"操作失败，请重试",duration:2e3})),!1)},r.default.prototype.$onLaunched=new Promise((function(e){r.default.prototype.$isResolve=e})),r.default.prototype.checkLogin=function(){return console.log("要去登录"),0==e.getStorageSync("token").length&&(e.showToast({title:"请先登录",icon:"none"}),e.switchTab({url:"/comm/mine"}),!0)},r.default.prototype.setUserInfo=function(t){if(console.log("用户信息"),null!=t.data.id){var n={};n.userId=t.data.id,n.userRole=t.data.role,n.userToken=t.data.token,n.userNick=t.data.nick,n.userHeadPic=t.data.headPic,n.phoneNumber=t.data.username,n.totalIntegral=t.data.totalIntegral,t.data.permissions?n.userPermissions=JSON.parse(t.data.permissions):n.userPermissions={},n.currency=t.data.currency,getApp().globalData.userInfo=n,e.setStorageSync("userId",n.userId),e.setStorageSync("token",n.userToken),e.setStorageSync("role",n.userRole),e.setStorageSync("nick",n.userNick),e.setStorageSync("headPic",n.userHeadPic),e.setStorageSync("phoneNumber",n.phoneNumber),e.setStorageSync("totalIntegral",n.totalIntegral),null==getApp().globalData.g_chat&&(getApp().globalData.g_chat=new a.default(this.$chatServerUrl,"TopTime","chat/list","chat/chat",2)),getApp().globalData.g_chat.setUserInfo(n.userId,n.userToken,n.userNick,n.userHeadPic)}},r.default.prototype.createTempChat=function(){null==getApp().globalData.g_chat&&(getApp().globalData.g_chat=new a.default(this.$chatServerUrl,"TopTime","chat/list","chat/chat",2));var e="tempChat_"+this.getClientUUID(),t="神秘人士"+e.substring(e.length-4);setTimeout((function(){getApp().globalData.g_chat.setUserInfo(e,e,t,"")}),2e3)},r.default.prototype.formatNumberRgx=function(e){if(""==e||null==e||0==e)return 0;var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},r.default.prototype.ensignSel=function(e){switch(e){case"CNY":return n(12);case"HKD":return n(13);case"USD":return n(14);case"EUR":return n(15);case"GBP":return n(16);case"AUD":return n(17)}},r.default.prototype.currencySel=function(e){switch(e){case"1":return"CNY";case"2":return"HKD";case"3":return"USD";case"4":return"EUR";case"5":return"GBP";case"6":return"AUD"}},r.default.prototype.regionSel=function(e){switch(e){case"香港":return"HK";case"大陆":return"CN";case"金边":return"KH";case"海外":return"ABD";case"成都":return"CN";default:return"ABD"}},r.default.prototype.ensignReSel=function(e){switch(e){case"大陆":return n(12);case"成都":return n(12);case"香港":return n(13);case"金边":return n(18);case"海外":return n(14);default:return n(14)}},r.default.prototype.getPrice=function(e,t,n,r){if(console.log(e),void 0==n&&(n="--"),null==e||"null"==e||""==e||0==e)return n;e=String(e),void 0==r&&(r=2);var o=e.toString().split(".");return 2==o.length&&(0==r?o.splice(1,1):o[1].length>r&&(o[1]=o[1].substring(0,r))),o[0]=o[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t+" "+o.join(".")},r.default.prototype.costPrice=function(e,t){var n,r,o;try{n=e.toString().split(".")[1].length}catch(a){n=0}try{r=t.toString().split(".")[1].length}catch(a){r=0}return o=Math.pow(10,Math.max(n,r)+1),(e*o-t*o)/o},r.default.prototype.getNoRepeatArry=function(e){var t=new Set(e);return Array.from(t)},r.default.prototype.deepClone=function(e){var t=JSON.stringify(e),n=JSON.parse(t);return n},r.default.prototype.hidePageNavInWechatBrowser=function(){},r.default.prototype.getClientUUID=function(){var t=e.getStorageSync("TopTime_UUID");if(32!=t.length){for(var n=[],r="0123456789abcdefABCDEFJKLMNXYZOP",o=0;o<32;o++)n[o]=r.substr(Math.floor(32*Math.random()),1);t=n.join(""),e.setStorageSync("TopTime_UUID",t)}return t},o.default.mpType="app";var l=new r.default(s({},o.default));t(l).$mount()}).call(this,n(1)["default"],n(1)["createApp"])},,,,,,function(e,t,n){"use strict";n.r(t);var r=n(7);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n(9);var a,c,u,s,i=n(11),l=Object(i["default"])(r["default"],a,c,!1,null,null,null,!1,u,s);l.options.__file="App.vue",t["default"]=l.exports},function(e,t,n){"use strict";n.r(t);var r=n(8),o=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=o.a},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={globalData:{userInfo:{userId:0,userRole:"",userToken:"",userNick:"",userHeadPic:"",phoneNumber:"",userPermissions:"",currency:""},cid:null,isWithinProgram:!0,pageInItem:"",g_chat:null},onLaunch:function(){if(e.canIUse("getUpdateManager")){console.log("可更新");var t=e.getUpdateManager();t.onCheckForUpdate((function(n){n.hasUpdate&&(console.log("有新版本"),t.onUpdateReady((function(){e.showModal({title:"更新提示",content:"新版本已经准备好，是否重启应用？",cancelText:"稍后进行",confirmText:"立即更新",confirmColor:"#85dbd0",success:function(e){e.confirm&&t.applyUpdate()}})})),t.onUpdateFailed((function(){e.showModal({title:"温馨提示",content:"新版本已经上线，请您删除当前小程序，重新搜索打开"})})))}))}else console.log("不可更新"),e.showModal({title:"温馨提示",content:"当前微信版本过低，可能无法使用该功能，请升级到最新版本后重试~"});this.getUserMsg()},onShow:function(){console.log("App Show")},onHide:function(){console.log("App Hide")},methods:{getUserMsg:function(){var t=this,n=e.getStorageSync("token");0!==n.length?e.request({url:this.$baseFileUrl+"/userMsg",method:"GET",header:{"content-type":"application/json",token:n},complete:function(e){1==t.checkBack(e,!0)?(t.setUserInfo(e),t.$isResolve()):(t.createTempChat(),t.$isResolve())}}):(this.createTempChat(),this.$isResolve())},updateNew:function(t){e.showModal({title:"更新提示",content:"新版本已经准备好，是否立即更新？",cancelText:"稍后进行",confirmText:"立即更新",confirmColor:"#85dbd0",success:function(e){e.confirm&&plus.runtime.openURL(t)}})}}};t.default=n}).call(this,n(1)["default"])},function(e,t,n){"use strict";n.r(t);var r=n(10),o=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=o.a},function(e,t,n){}],[[0,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../.sourcemap/mp-weixin/common/main.js.map