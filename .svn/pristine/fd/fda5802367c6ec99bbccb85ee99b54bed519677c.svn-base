require('./common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["hermes/hermesSellBar"],{196:function(e,t,a){"use strict";(function(e){a(5);r(a(3));var t=r(a(197));function r(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=a,e(t.default)}).call(this,a(1)["createPage"])},197:function(e,t,a){"use strict";a.r(t);var r=a(198),n=a(200);for(var i in n)"default"!==i&&function(e){a.d(t,e,(function(){return n[e]}))}(i);a(203);var s,o=a(11),c=Object(o["default"])(n["default"],r["render"],r["staticRenderFns"],!1,null,"ed4b6c80",null,!1,r["components"],s);c.options.__file="hermes/hermesSellBar.vue",t["default"]=c.exports},198:function(e,t,a){"use strict";a.r(t);var r=a(199);a.d(t,"render",(function(){return r["render"]})),a.d(t,"staticRenderFns",(function(){return r["staticRenderFns"]})),a.d(t,"recyclableRender",(function(){return r["recyclableRender"]})),a.d(t,"components",(function(){return r["components"]}))},199:function(e,t,a){"use strict";var r;a.r(t),a.d(t,"render",(function(){return n})),a.d(t,"staticRenderFns",(function(){return s})),a.d(t,"recyclableRender",(function(){return i})),a.d(t,"components",(function(){return r}));try{r={uniSegmentedControl:function(){return a.e("uni_modules/uni-segmented-control/components/uni-segmented-control/uni-segmented-control").then(a.bind(null,474))},uniTable:function(){return a.e("uni_modules/uni-table/components/uni-table/uni-table").then(a.bind(null,481))},uniTr:function(){return a.e("uni_modules/uni-table/components/uni-tr/uni-tr").then(a.bind(null,488))},uniTh:function(){return a.e("uni_modules/uni-table/components/uni-th/uni-th").then(a.bind(null,495))},uniTd:function(){return a.e("uni_modules/uni-table/components/uni-td/uni-td").then(a.bind(null,502))}}}catch(o){if(-1===o.message.indexOf("Cannot find module")||-1===o.message.indexOf(".vue"))throw o;console.error(o.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var n=function(){var e=this,t=e.$createElement,a=(e._self._c,1==e.tabCurrent?e.__map(e.chartData1.categories,(function(t,a){var r=e.__get_orig(t),n=e.getShowTime(e.chartData1.categories[e.chartData1.categories.length-1-a]),i=e.getPrice(e.chartData1.series[0].data[e.chartData1.categories.length-1-a],"","-",0),s=e.getPrice(e.chartData1.series[1].data[e.chartData1.categories.length-1-a],"","-",0),o=0!=e.chartData1.series[1].data[e.chartData1.categories.length-1-a]?(e.chartData1.series[1].data[e.chartData1.categories.length-1-a]/e.chartData1.series[0].data[e.chartData1.categories.length-1-a]*100).toFixed(2):null;return{$orig:r,m0:n,m1:i,m2:s,g0:o}})):null);e.$mp.data=Object.assign({},{$root:{l0:a}})},i=!1,s=[];n._withStripped=!0},200:function(e,t,a){"use strict";a.r(t);var r=a(201),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,(function(){return r[e]}))}(i);t["default"]=n.a},201:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(a(125)),n=i(a(202));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(u){return void a(u)}o.done?t(c):Promise.resolve(c).then(r,n)}function o(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var i=e.apply(t,a);function o(e){s(i,r,n,o,c,"next",e)}function c(e){s(i,r,n,o,c,"throw",e)}o(void 0)}))}}var c={},u={data:function(){return{tabItems:["曲线","表格"],tabCurrent:0,chartData1:{categories:[],series:[{name:"",color:"#7bdcca",data:[]},{name:"",color:"#f9b004",data:[]}]},chartData2:{categories:[],series:[{name:"",color:"#e24877",data:[]}]},chartData3:{categories:[],series:[{name:"",type:"column",color:"#5A82F5",data:[]},{name:"",type:"area",style:"curve",data:[]}]},salesOverview:{},arcBarData1:"",arcBarData2:"",selName:"总体数据",sellMoney:"-",profit:"-",profitPer:"-",sellVolume:"-",selValue1:["按年统计","按季度统计","按月统计"],curSel1:0,selValue2:["营业额","利润","销量"],curSel2:0,selValue3:["营业额","利润","销量"],curSel3:0,currency:""}},onLoad:function(){var e=this;return o(r.default.mark((function t(){return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$onLaunched;case 2:e.currency=getApp().globalData.userInfo.currency,e.getInfo(),e.getInfo2();case 5:case"end":return t.stop()}}),t)})))()},onReady:function(){this.hidePageNavInWechatBrowser()},onPullDownRefresh:function(){this.getInfo(),this.getInfo2(),e.stopPullDownRefresh()},methods:{getInfo:function(){var t=this;e.showLoading({title:"加载中..."});var a=this.curSel1;e.request({url:this.$baseFileUrl+"/salesComparison?flag="+ ++a,header:{"content-type":"application/json",token:e.getStorageSync("token")},success:function(a){e.hideLoading();t.deepClone(t.chartData1);for(var r=t.deepClone(t.chartData3),n=(t.deepClone(t.chartData3),[]),i=[],s=0;s<a.data.annualTurnoverList.length;++s)n.push(a.data.annualTurnoverList[s].time),i.push(a.data.annualTurnoverList[s].saleMoney);t.chartData1.categories=n,t.chartData1.series[0].data=i,t.chartData1.total=t.getSum(i),n=[],i=[];for(var o=0;o<a.data.annualProfitList.length;++o)n.push(a.data.annualProfitList[o].time),i.push(a.data.annualProfitList[o].profit);t.chartData2.categories=n,t.chartData2.series[0].data=i,t.chartData1.series[1].data=i,t.chartData2.total=t.getSum(i),console.log(r.total),n=[],i=[];for(var c=0;c<a.data.annualSalesVolumeList.length;++c)n.push(a.data.annualSalesVolumeList[c].time),i.push(a.data.annualSalesVolumeList[c].salesVolume);t.chartData3.categories=n,t.chartData3.series[0].data=i,t.chartData3.series[1].data=i,t.chartData3.total=t.getSum(i),t.drawChart1("chart1",t.chartData1),t.drawChart3("chart3",t.chartData3),t.indexChangeEx(-1)},fail:function(t){e.hideLoading()}})},getInfo2:function(){var t=this;e.showLoading({title:"加载中..."});this.curSel1;e.request({url:this.$baseFileUrl+"/salesOverview",header:{"content-type":"application/json",token:e.getStorageSync("token")},success:function(a){e.hideLoading(),t.salesOverview=a.data,t.selChange2(t.curSel2),t.selChange3(t.curSel3)},fail:function(t){e.hideLoading()}})},selChange1:function(e){this.curSel1=e,this.getInfo()},selChange2:function(e){this.curSel2=e;var t=null;0==e?(t=this.salesOverview.saleMsgRes.turnoverDetail,this.arcBarData1=this.getPrice(t.currentYear,this.currency,"-",2),this.arcBarData2=this.getPrice(t.currentQuarter,this.currency,"-",2)):1==e?(t=this.salesOverview.saleMsgRes.profitDetail,this.arcBarData1=this.getPrice(t.currentYear,this.currency,"-",2),this.arcBarData2=this.getPrice(t.currentQuarter,this.currency,"-",2)):(t=this.salesOverview.saleMsgRes.salesVolumeDetail,this.arcBarData1=this.getPrice(t.currentYear,"","-",2),this.arcBarData2=this.getPrice(t.currentQuarter,"","-",2));var a=t.yearPercentage/100,r=t.quarterPercentage/100;a>1&&(a=1),r>1&&(r=1),this.drawArcbar("arcbar1",250,a,"#1890FF",t.yearPercentage+"%","年度目标"),this.drawArcbar("arcbar2",250,r,"#91CB74",t.quarterPercentage+"%","季度目标")},selChange3:function(e){this.curSel3=e;var t=null;t=0==e?this.salesOverview.customerMsgRes.turnoverDetail:1==e?this.salesOverview.customerMsgRes.profitDetail:this.salesOverview.customerMsgRes.salesVolumeDetail,console.log("ddd"),console.log(t);var a={data:t.customerTypeList};console.log(a),this.drawPie("pie1",[{data:t.customerTypeList}]),this.drawPie("pie2",[{data:t.customerList}])},indexChangeEx:function(e){-1==e?(this.selName="总体数据",this.sellMoney=this.getPrice(this.chartData1.total,this.currency,"-",0),this.profit=this.getPrice(this.chartData2.total,this.currency,"-",0),console.log(this.chartData2),this.profitPer=this.getPrice(this.chartData2.total/this.chartData1.total*100,"","-",2)+"%",this.sellVolume=this.getPrice(this.chartData3.total,"","-",0)):(this.selName=this.chartData1.categories[e]+"数据",this.sellMoney=this.getPrice(this.chartData1.series[0].data[e],this.currency,"-",0),this.profit=this.getPrice(this.chartData2.series[0].data[e],this.currency,"-",0),this.profitPer=this.getPrice(this.chartData2.series[0].data[e]/this.chartData1.series[0].data[e]*100,"","-",2)+"%",this.sellVolume=this.getPrice(this.chartData3.series[0].data[e],"","-",0))},onClickTabItem:function(e){this.tabCurrent!=e.currentIndex&&(this.tabCurrent=e.currentIndex,0==this.tabCurrent&&(this.drawChart1("chart1",this.chartData1),this.drawChart3("chart3",this.chartData3),this.indexChangeEx(-1)))},getShowTime:function(e){return 1==this.curSel1||2==this.curSel1?e.replace("-","\r\n"):e},getSum:function(e){for(var t=0,a=0;a<e.length;++a)t+=e[a];return t},drawChart1:function(t,a){var r=e.createCanvasContext(t,this);c[t]=new n.default({categories:a.categories,series:a.series,type:"column",context:r,width:e.upx2px(700),height:e.upx2px(550),background:"#FFFFFF",dataLabel:!1,enableScroll:!0,xAxis:{disableGrid:!0,itemCount:5,fontSize:10,axisLineColor:"#FFFFFF"},yAxis:{disableGrid:!0,data:[{fontSize:10,axisLineColor:"#FFFFFF",title:""}]},legend:{show:!1},extra:{column:{width:20,linearType:"opacity",linearOpacity:.5},tooltip:{showBox:!1}}})},drawChart3:function(t,a){var r=e.createCanvasContext(t,this);c[t]=new n.default({categories:a.categories,series:a.series,type:"mix",context:r,width:e.upx2px(700),height:e.upx2px(550),background:"#FFFFFF",dataLabel:!1,enableScroll:!0,xAxis:{disableGrid:!0,itemCount:5,fontSize:10,axisLineColor:"#FFFFFF"},yAxis:{disableGrid:!0,data:[{fontSize:10,axisLineColor:"#FFFFFF",title:""}]},legend:{show:!1},extra:{column:{width:20,linearType:"opacity",linearOpacity:.5},tooltip:{showBox:!1},mix:{column:{width:20}}}})},drawArcbar:function(t,a,r,i,s,o){var u=[{name:"",data:r}],l=e.createCanvasContext(t,this);c[t]=new n.default({type:"arcbar",context:l,width:e.upx2px(a),height:e.upx2px(a),series:u,animation:!0,background:"#FFFFFF",color:[i],padding:void 0,title:{name:s,fontSize:20,color:i},subtitle:{name:o,fontSize:10,color:"#666666"},extra:{arcbar:{type:"circle",width:8,backgroundColor:"#E9E9E9",startAngle:1.5,endAngle:.25,gap:2}}})},drawPie:function(t,a){var r=e.createCanvasContext(t,this);c[t]=new n.default({type:"pie",context:r,width:e.upx2px(700),height:e.upx2px(500),series:a,animation:!0,background:"#FFFFFF",color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],padding:[5,5,5,5],legend:{show:!0,position:"right",lineHeight:25},extra:{pie:{activeOpacity:.5,activeRadius:10,offsetAngle:0,labelWidth:15,border:!0,borderWidth:3,borderColor:"#FFFFFF"}}})},tapColumn:function(e,t){var a=c[t];if(a){var r=c[e.target.id].getCurrentDataIndex(e);this.indexChangeEx(r.index)}},touchColumn:function(e,t){var a=c[t];a&&a.scrollStart(e)},moveColumn:function(e,t){var a=c[t];a&&a.scroll(e)},touchEndColumn:function(e,t){var a=c[t];a&&a.scrollEnd(e)}}};t.default=u}).call(this,a(1)["default"])},203:function(e,t,a){"use strict";a.r(t);var r=a(204),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,(function(){return r[e]}))}(i);t["default"]=n.a},204:function(e,t,a){}},[[196,"common/runtime","common/vendor","hermes/common/vendor"]]]);
//# sourceMappingURL=../../.sourcemap/mp-weixin/hermes/hermesSellBar.js.map