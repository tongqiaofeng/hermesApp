(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["jewelryPackage/jewelryMaterial"],{"0495":function(t,e,i){"use strict";i.r(e);var a=i("d74d"),s=i("bd47");for(var n in s)"default"!==n&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("9cab");var o,l=i("f0c5"),r=Object(l["a"])(s["default"],a["b"],a["c"],!1,null,"6e23224c",null,!1,a["a"],o);e["default"]=r.exports},"31eb":function(t,e,i){},4156:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(){i.e("components/popwnd/popwnd_select_blue").then(function(){return resolve(i("a3a6"))}.bind(null,i)).catch(i.oe)},s={components:{popwndSelect:a},data:function(){return{imgUrl:this.$baseJewelleryUrl,haveData:1,height:null,keyWord:"",page:1,sortType:null,isUp:null,img1:i("d3b5"),img2:i("0778"),img3:i("2933"),bShowStock:!1,stockIdx:0,stocks:[],bShowState:!1,stateIdx:3,states:[{id:-1,name:"全部"},{id:0,name:"存货"},{id:1,name:"运输中"},{id:5,name:"未加工"},{id:2,name:"加工中"},{id:3,name:"加工完成"},{id:4,name:"已出售"}],bShowMaterial:!1,materialIdx:0,materialModelList:[],list:[],total:0,haveMore:0}},onLoad:function(){var e=this;t.getSystemInfo({success:function(t){e.height=t.statusBarHeight}}),this.stockIdx=0,this.materialIdx=0,this.stateIdx=3,0==this.list.length&&t.getStorageSync("token").length>0&&(console.log("重新获取数据"),this.getStockList(),this.getMaterialModelList(),this.search())},onPullDownRefresh:function(){t.showLoading({title:"正在刷新"}),console.log("获取数据"),this.page=1,this.list=[],this.haveMore=0,this.search(),this.getStockList(),t.stopPullDownRefresh()},onReachBottom:function(){0==this.haveMore&&(this.page++,this.search())},methods:{filterSel:function(e){null==this.isUp?this.isUp=1:1==this.isUp?this.isUp=2:2==this.isUp&&(this.isUp=1),this.sortType!=e&&(this.isUp=1),this.sortType=e,this.page=1,this.list=[],this.haveMore=0,this.search(),t.pageScrollTo({scrollTop:0,duration:300})},search:function(){var e=this;t.showLoading({title:"加载中..."}),this.soldNum=0,this.reserveNum=0;var i={};i={keyword:this.keyWord.trim(),sortType:this.sortType,sortFlag:2==this.isUp?-1:this.isUp},this.stockIdx>0&&(i.storageId=this.stocks[this.stockIdx].id),this.materialIdx>0&&(i.materialModelId=this.materialModelList[this.materialIdx].id),this.stateIdx>0&&(i.state=this.states[this.stateIdx].id),t.request({url:this.$baseJewelleryUrl+"/materialStockSearch?page="+this.page+"&pageNum=10",method:"POST",header:{"content-type":"application/json",token:t.getStorageSync("token")},data:i,complete:function(i){if(t.hideLoading(),console.log("珠宝原材料列表"),console.log(i),0!=e.checkBack(i)){if(e.total=i.data.total,0==i.data.list.length)e.haveMore=1;else{var a=e.list.concat(i.data.list);e.list=a}0==e.list.length?(e.haveData=0,t.showToast({icon:"none",title:"暂无数据"})):e.haveData=1}}})},getStockList:function(){var e=this;t.request({url:this.$baseJewelleryUrl+"/storageList",header:{"content-type":"application/json",token:t.getStorageSync("token")},complete:function(i){console.log(i),t.hideLoading(),0!=e.checkBack(i,!0)&&i.data.length>0&&(e.stocks=i.data)}})},getMaterialModelList:function(){var e=this;t.request({url:this.$baseJewelleryUrl+"/materialModelList",header:{"content-type":"application/json",token:t.getStorageSync("token")},complete:function(i){console.log(i),t.hideLoading(),0!=e.checkBack(i,!0)&&i.data.length>0&&(e.materialModelList=i.data)}})},inputChange:function(){this.page=1,this.list=[],this.haveMore=0,this.sortType=null,this.isUp=null,this.search(),t.pageScrollTo({scrollTop:0,duration:300})},stockChange:function(e){this.stockIdx=e.sel,this.page=1,this.list=[],this.haveMore=0,this.sortType=null,this.isUp=null,this.search(),t.pageScrollTo({scrollTop:0,duration:300})},materialChange:function(e){this.materialIdx=e.sel,this.page=1,this.list=[],this.haveMore=0,this.sortType=null,this.isUp=null,this.search(),t.pageScrollTo({scrollTop:0,duration:300})},stateChange:function(e){this.stateIdx=e.sel,this.page=1,this.list=[],this.haveMore=0,this.search(),t.pageScrollTo({scrollTop:0,duration:300})},getSaleStateClr:function(t){return 0==t.state?"#54b7eb":1==t.state?"#6bcda5":2==t.sold?"#ff8b62":(t.sold,"#ef5b5b")},getSaleState:function(t){for(var e=0;e<this.states.length;++e){if(t.state==this.states[e].id)return this.states[e].name;if(4==t.state)return"已售"}return""},checkDetails:function(e){t.navigateTo({url:"./materialDetails?id="+e.id})},goBack:function(){t.navigateBack({delta:1})}}};e.default=s}).call(this,i("543d")["default"])},"6b5d":function(t,e,i){"use strict";(function(t){i("06ad");a(i("66fd"));var e=a(i("0495"));function a(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=i,t(e.default)}).call(this,i("543d")["createPage"])},"9cab":function(t,e,i){"use strict";var a=i("31eb"),s=i.n(a);s.a},bd47:function(t,e,i){"use strict";i.r(e);var a=i("4156"),s=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},d74d:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var s=function(){var t=this,e=t.$createElement,i=(t._self._c,0!=t.haveData?t.__map(t.list,(function(e,i){var a=t.__get_orig(e),s=e.img?e.img.split("|"):null,n=e.unitPrice?t.formatNumberRgx(e.unitPrice):null,o=!e.unitPrice||"粒"!=e.chargeUnit&&"件"!=e.chargeUnit?null:t.formatNumberRgx(parseInt(e.unitPrice*e.number)),l=e.unitPrice&&"粒"!=e.chargeUnit&&"件"!=e.chargeUnit?t.formatNumberRgx(parseInt(e.unitPrice*e.weight)):null,r=t.stateIdx>0?t.getSaleStateClr(e):null,c=t.stateIdx>0?t.getSaleState(e):null;return{$orig:a,g0:s,m0:n,m1:o,m2:l,m3:r,m4:c}})):null);t._isMounted||(t.e0=function(e){t.bShowStock=!0},t.e1=function(e){t.bShowMaterial=!0},t.e2=function(e){t.bShowState=!0}),t.$mp.data=Object.assign({},{$root:{l0:i}})},n=[]}},[["6b5d","common/runtime","common/vendor"]]]);