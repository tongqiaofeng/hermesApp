(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["jewelryPackage/jewelryFinished"],{"06e9":function(t,e,a){"use strict";(function(t){a("06ad");o(a("66fd"));var e=o(a("dedd"));function o(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=a,t(e.default)}).call(this,a("543d")["createPage"])},"313e":function(t,e,a){"use strict";var o;a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return o}));var s=function(){var t=this,e=t.$createElement,a=(t._self._c,0!=t.haveData?t.__map(t.list,(function(e,a){var o=t.__get_orig(e),s=e.img?e.img.split("|"):null,n=0==t.stateIdx||3==t.stateIdx?t.getSaleStateClr(e):null,i=0==t.stateIdx||3==t.stateIdx?t.getSaleState(e):null,c=4==e.state?t.getPrice(e.saleMoney,e.saleCurrency):null,l=4==e.state&&"CNY"==e.saleCurrency?t.getPrice(t.costPrice(e.saleMoney,e.totalCnPrice),"CNY"):null,r=4!=e.state?t.getPrice(e.adviseSellPrice,"CNY"):null;return{$orig:o,g0:s,m0:n,m1:i,m2:c,m3:l,m4:r}})):null);t._isMounted||(t.e0=function(e){t.bShowStock=!0},t.e1=function(e){t.bShowTag=!0},t.e2=function(e){t.bShowState=!0}),t.$mp.data=Object.assign({},{$root:{l0:a}})},n=[]},"690f":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){a.e("components/popwnd/popwnd_select_blue").then(function(){return resolve(a("a3a6"))}.bind(null,a)).catch(a.oe)},s={components:{popwndSelect:o},data:function(){return{imgUrl:this.$baseJewelleryUrl,haveData:1,height:null,keyWord:"",page:1,bShowStock:!1,stockIdx:0,stocks:[],bShowState:!1,stateIdx:3,states:[{id:-1,name:"全部"},{id:0,name:"存货"},{id:1,name:"运输中"},{id:5,name:"未出售"},{id:4,name:"已出售"}],bShowTag:!1,tagIdx:0,tagList:[],list:[],total:0,haveMore:0}},onLoad:function(){var e=this;t.getSystemInfo({success:function(t){e.height=t.statusBarHeight}}),this.stockIdx=0,this.stateIdx=3,0==this.list.length&&t.getStorageSync("token").length>0&&(console.log("重新获取数据"),this.getStockList(),this.getTagList(),this.search())},onPullDownRefresh:function(){t.showLoading({title:"正在刷新"}),console.log("获取数据"),this.page=1,this.list=[],this.haveMore=0,this.search(),this.getStockList(),t.stopPullDownRefresh()},onReachBottom:function(){0==this.haveMore&&(this.page++,this.search())},methods:{search:function(){var e=this;t.showLoading({title:"加载中..."}),this.soldNum=0,this.reserveNum=0;var a={};a={keyword:this.keyWord.trim()},this.stockIdx>0&&(a.storageId=this.stocks[this.stockIdx].id),this.stateIdx>0&&(a.state=this.states[this.stateIdx].id),this.tagIdx>0&&(a.tag=this.tagList[this.tagIdx]),t.request({url:this.$baseJewelleryUrl+"/productStockSearch?page="+this.page+"&pageNum=10",method:"POST",header:{"content-type":"application/json",token:t.getStorageSync("token")},data:a,complete:function(a){if(t.hideLoading(),console.log("珠宝成品列表"),console.log(a),0!=e.checkBack(a)){if(e.total=a.data.total,0==a.data.list.length)e.haveMore=1;else{var o=e.list.concat(a.data.list);e.list=o}0==e.list.length?(e.haveData=0,t.showToast({icon:"none",title:"暂无数据"})):e.haveData=1}}})},getStockList:function(){var e=this;t.request({url:this.$baseJewelleryUrl+"/storageList",header:{"content-type":"application/json",token:t.getStorageSync("token")},complete:function(a){console.log("库存地列表"),console.log(a),t.hideLoading(),0!=e.checkBack(a,!0)&&(a.data.length>0&&(e.stocks=a.data),console.log(e.stocks))}})},getTagList:function(){var e=this;t.request({url:this.$baseJewelleryUrl+"/tagList",header:{"content-type":"application/json",token:t.getStorageSync("token")},complete:function(a){console.log("标签列表"),console.log(a),t.hideLoading(),0!=e.checkBack(a,!0)&&a.data.length>0&&(e.tagList=a.data)}})},inputChange:function(){this.page=1,this.list=[],this.haveMore=0,this.search(),t.pageScrollTo({scrollTop:0,duration:300})},stockChange:function(e){this.stockIdx=e.sel,this.page=1,this.list=[],this.haveMore=0,this.search(),t.pageScrollTo({scrollTop:0,duration:300})},stateChange:function(e){this.stateIdx=e.sel,this.page=1,this.list=[],this.haveMore=0,this.search(),t.pageScrollTo({scrollTop:0,duration:300})},tagChange:function(e){this.tagIdx=e.sel,this.page=1,this.list=[],this.haveMore=0,this.search(),t.pageScrollTo({scrollTop:0,duration:300})},getSaleStateClr:function(t){return 0==t.state?"#54b7eb":1==t.state?"#6bcda5":"#ef5b5b"},getSaleState:function(t){for(var e=0;e<this.states.length;++e){if(t.state==this.states[e].id)return this.states[e].name;if(4==t.state)return"已售"}return""},checkDetails:function(e){t.navigateTo({url:"./jewelryDetails?id="+e.id})},goBack:function(){t.navigateBack({delta:1})}}};e.default=s}).call(this,a("543d")["default"])},"774d":function(t,e,a){"use strict";var o=a("b7c0"),s=a.n(o);s.a},ab9c:function(t,e,a){"use strict";a.r(e);var o=a("690f"),s=a.n(o);for(var n in o)"default"!==n&&function(t){a.d(e,t,(function(){return o[t]}))}(n);e["default"]=s.a},b7c0:function(t,e,a){},dedd:function(t,e,a){"use strict";a.r(e);var o=a("313e"),s=a("ab9c");for(var n in s)"default"!==n&&function(t){a.d(e,t,(function(){return s[t]}))}(n);a("774d");var i,c=a("f0c5"),l=Object(c["a"])(s["default"],o["b"],o["c"],!1,null,"bde8e8ca",null,!1,o["a"],i);e["default"]=l.exports}},[["06e9","common/runtime","common/vendor"]]]);